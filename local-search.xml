<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>扬州中学实习</title>
    <link href="/2023/10/30/%E6%89%AC%E5%B7%9E%E4%B8%AD%E5%AD%A6%E5%AE%9E%E4%B9%A0/"/>
    <url>/2023/10/30/%E6%89%AC%E5%B7%9E%E4%B8%AD%E5%AD%A6%E5%AE%9E%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1>扬州中学实习</h1><h2 id="任务">任务</h2><h3 id="日常">日常</h3><ul><li>大课间改作业</li></ul><h3 id="文字">文字</h3><ol><li><strong>800字手写体，对扬中工作建议书(扬中要求)</strong></li></ol><h4 id="实习报告">实习报告</h4><ul><li>考研后上交</li></ul><ol><li>1份 教研活动记录</li><li>10份 听课记录 ，先写 听课记录，点评反思 考研后补</li><li>6份 内容不同 的 授课分析，指导老师 评阅意见 和 签名</li><li>3份 班级主题活动记录</li><li>1份 师德体验总结</li><li>实习班级基本情况表，部分学生情况表(未要求完成)</li></ol><h3 id="授课">授课</h3><ol><li><strong>1节课，40分钟教学视频，教案提前给指导老师签字</strong></li><li><s>15课时</s></li></ol><h3 id="线上">线上</h3><ul><li>周末 填报 <a href="http://nstinternshipmanage.20220705.truezirpowered.com/#/student/index">南信大教师院实习管理系统 </a> 实习情况</li></ul><h4 id="每周实习情况">每周实习情况</h4><ul><li>2-3 次试讲</li></ul><h4 id="班主任工作记录">班主任工作记录</h4><ol><li>总共 3次 主持班会 记录</li><li>结合 节日，考试，活动(运动会)<s>瞎编</s></li></ol><h3 id="研习">研习</h3><ul><li>实习结束后进行</li></ul><h2 id="安排">安排</h2><h3 id="指导老师">指导老师</h3><ul><li>蒋 - 办公楼4楼数学组(1)</li></ul><h3 id="课表">课表</h3><table><thead><tr><th></th><th></th><th>周一</th><th>周二</th><th>周三</th><th>周四</th><th>周五</th></tr></thead><tbody><tr><td>第1节</td><td>07:40-08:25</td><td></td><td></td><td>数学-04班</td><td></td><td>数学-12班</td></tr><tr><td>第2节</td><td>08:35-09:20</td><td></td><td></td><td>数学-12班</td><td></td><td>数学-04班</td></tr><tr><td>大课间</td><td>09:20-09:50</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>第3节</td><td>09:50-10:35</td><td>数学-04班</td><td></td><td></td><td></td><td></td></tr><tr><td>第4节</td><td>10:45-11:35</td><td>数学-04班</td><td></td><td></td><td>数学-12班</td><td></td></tr><tr><td>第5节</td><td>14:00-14:45</td><td></td><td>数学-04班</td><td></td><td></td><td></td></tr><tr><td>第6节</td><td>14:55-15:45</td><td>数学-12班</td><td>数学-12班</td><td></td><td></td><td></td></tr><tr><td>第7节</td><td>15:55-16:40</td><td>数学-12班</td><td></td><td></td><td>数学-04班</td><td></td></tr><tr><td>第8节</td><td>16:50-17:35</td><td></td><td></td><td>班/健</td><td></td><td></td></tr></tbody></table><h3 id="教材">教材</h3><ul><li>数学书</li><li>自治自动教师版</li></ul><h3 id="教室">教室</h3><ul><li>高二(4) - 教学楼4楼</li><li>高二(12) - 教学楼2楼</li><li>自习室 - 实验楼阶梯教室四</li></ul><h3 id="时间">时间</h3><ul><li><s>09.11-11.17</s></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>杂谈</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>c++ 编程基础</title>
    <link href="/2023/10/30/c++%20%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    <url>/2023/10/30/c++%20%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1>c++ 编程基础</h1><h2 id="三目运算符">三目运算符</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">条件 ? 值<span class="hljs-number">1</span> : 值<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><ul><li>条件为真时，返回 值1，条件为假时，返回 值2</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">max</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a &gt; b ? a : b;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="队列模拟栈">队列模拟栈</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyStack</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    queue&lt;<span class="hljs-type">int</span>&gt; q_main, q_temp;<br><br>    <span class="hljs-built_in">MyStack</span>()<br>    &#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function">    </span>&#123;<br>        q_main.<span class="hljs-built_in">push</span>(x);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-type">int</span> size = q_main.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size - <span class="hljs-number">1</span>; i++)<br>        &#123;<br>            q_temp.<span class="hljs-built_in">push</span>(q_main.<span class="hljs-built_in">front</span>());<br>            q_main.<span class="hljs-built_in">pop</span>();<br>        &#125;<br><br>        <span class="hljs-type">int</span> res = q_main.<span class="hljs-built_in">front</span>();<br>        q_main.<span class="hljs-built_in">pop</span>();<br><br>        <span class="hljs-built_in">swap</span>(q_main, q_temp);<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">top</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-type">int</span> top = <span class="hljs-built_in">pop</span>();<br><br>        q_main.<span class="hljs-built_in">push</span>(top);<br><br>        <span class="hljs-keyword">return</span> top;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> q_main.<span class="hljs-built_in">empty</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="栈模拟队列">栈模拟队列</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyQueue</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    stack&lt;<span class="hljs-type">int</span>&gt; s_main, s_temp;<br><br>    <span class="hljs-type">bool</span> rev_to_sq = <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-built_in">MyQueue</span>()<br>    &#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">reverse</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        rev_to_sq = !rev_to_sq;<br><br>        <span class="hljs-type">int</span> size = s_main.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)<br>        &#123;<br>            s_temp.<span class="hljs-built_in">push</span>(s_main.<span class="hljs-built_in">top</span>());<br>            s_main.<span class="hljs-built_in">pop</span>();<br>        &#125;<br><br>        <span class="hljs-built_in">swap</span>(s_main, s_temp);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span> (rev_to_sq)<br>            <span class="hljs-built_in">reverse</span>();<br><br>        s_main.<span class="hljs-built_in">push</span>(x);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span> (!rev_to_sq)<br>            <span class="hljs-built_in">reverse</span>();<br><br>        <span class="hljs-type">int</span> head = s_main.<span class="hljs-built_in">top</span>();<br>        s_main.<span class="hljs-built_in">pop</span>();<br><br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">peek</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-type">int</span> head = <span class="hljs-built_in">pop</span>();<br>        s_main.<span class="hljs-built_in">push</span>(head);<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> s_main.<span class="hljs-built_in">empty</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>915 编程题</title>
    <link href="/2023/10/30/915%20%E7%BC%96%E7%A8%8B%E9%A2%98/"/>
    <url>/2023/10/30/915%20%E7%BC%96%E7%A8%8B%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1>915 编程题</h1><h2 id="915-2018">915 - 2018</h2><h3 id="1">1</h3><ul><li>函数内部数组的初始化 0</li><li>string 的使用</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> count[<span class="hljs-number">10</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br><br>    string s;<br>    cin &gt;&gt; s;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; s.<span class="hljs-built_in">length</span>(); i++)<br>    &#123;<br>        <span class="hljs-type">int</span> n = s[i] - <span class="hljs-string">&#x27;0&#x27;</span>;<br><br>        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> &lt;= n &amp;&amp; n &lt; <span class="hljs-number">10</span>)<br>            count[n]++;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>        cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&#x27;:&#x27;</span> &lt;&lt; count[i] &lt;&lt; <span class="hljs-string">&#x27;,&#x27;</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2">2</h3><ul><li>struct 的声明</li><li>冒泡排序</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Stu</span><br>&#123;<br>    string name;<br>    <span class="hljs-type">int</span> score;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(Stu stu_arr[], <span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = n - <span class="hljs-number">1</span>; j &gt; i; j--)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (stu_arr[j - <span class="hljs-number">1</span>].score &lt; stu_arr[j].score)<br>                <span class="hljs-built_in">swap</span>(stu_arr[j - <span class="hljs-number">1</span>], stu_arr[j]);<br>        &#125;<br>    &#125;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n;<br><br>    Stu stu_arr[n];<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>        cin &gt;&gt; stu_arr[i].name &gt;&gt; stu_arr[i].score;<br><br>    <span class="hljs-built_in">sort</span>(stu_arr, n);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)<br>        cout &lt;&lt; stu_arr[i].name &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; stu_arr[i].score &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3">3</h3><ul><li>数组的赋值初始化</li><li>闰年</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_leap</span><span class="hljs-params">(<span class="hljs-type">int</span> year)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> year % <span class="hljs-number">400</span> == <span class="hljs-number">0</span> || (year % <span class="hljs-number">4</span> == <span class="hljs-number">0</span> &amp;&amp; year % <span class="hljs-number">100</span> != <span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-type">int</span> days[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span> ,<span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> year, month, day;<br>    cin &gt;&gt; year &gt;&gt; month &gt;&gt; day;<br>    <br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">is_leap</span>(year))<br>        days[<span class="hljs-number">2</span>] = <span class="hljs-number">29</span>;<br>    <span class="hljs-keyword">else</span><br>        days[<span class="hljs-number">2</span>] = <span class="hljs-number">28</span>;<br>    <br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; month; i++)<br>        cnt += days[i];<br>    cnt += day;<br>    <br>    cout &lt;&lt; cnt &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="915-2019">915 - 2019</h2><h3 id="1-2">1</h3><ul><li>无穷大的初始化</li><li>循环输入</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> left = INT_MAX, down = INT_MAX;<br>    <span class="hljs-type">int</span> right = INT_MIN, up = INT_MIN;<br><br>    <span class="hljs-type">int</span> x, y;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>    &#123;<br>        cin &gt;&gt; x &gt;&gt; y;<br>        <span class="hljs-keyword">if</span> (x == <span class="hljs-number">0</span> &amp;&amp; y == <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">break</span>;<br><br>        left = <span class="hljs-built_in">min</span>(left, x);<br>        down = <span class="hljs-built_in">min</span>(down, y);<br><br>        right = <span class="hljs-built_in">max</span>(right, x);<br>        up = <span class="hljs-built_in">max</span>(up, y);<br>    &#125;<br><br>    cout &lt;&lt; left &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; down &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; right &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; up &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2">2</h3><h4 id="1-3">(1)</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br>string s;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_palindrome</span><span class="hljs-params">(<span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (left &gt;= right)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-keyword">if</span> (s[left] != s[right])<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">is_palindrome</span>(left + <span class="hljs-number">1</span>, right - <span class="hljs-number">1</span>);<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">while</span> (cin &gt;&gt; s)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">is_palindrome</span>(<span class="hljs-number">0</span>, s.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>))<br>            cout &lt;&lt; <span class="hljs-string">&quot;Yes!&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">else</span><br>            cout &lt;&lt; <span class="hljs-string">&quot;No!&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-3">(2)</h4><ul><li>栈</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br>string str;<br><br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_palindrome</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    stack&lt;<span class="hljs-type">char</span>&gt; st;<br>    <span class="hljs-type">int</span> m = str.<span class="hljs-built_in">size</span>() / <span class="hljs-number">2</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i)<br>        st.<span class="hljs-built_in">push</span>(str[i]);<br><br>    <span class="hljs-keyword">if</span> (str.<span class="hljs-built_in">size</span>() % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>)<br>        m++;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = m; i &lt; str.<span class="hljs-built_in">size</span>(); ++i)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (st.<span class="hljs-built_in">top</span>() != str[i])<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>        st.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">while</span> (cin &gt;&gt; str)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">is_palindrome</span>())<br>            cout &lt;&lt; <span class="hljs-string">&quot;Yes!&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">else</span><br>            cout &lt;&lt; <span class="hljs-string">&quot;No!&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据结构名词解释</title>
    <link href="/2023/10/30/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A/"/>
    <url>/2023/10/30/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A/</url>
    
    <content type="html"><![CDATA[<h1>数据结构名词解释</h1><p>1、 **数据结构 **</p><p>数据结构是相互之间存在一种或多种特定关系的数据元素的集合，数据结构包括三方面的内容：逻辑结构、存储结构、数据的运算</p><p>2、 **逻辑结构 **</p><p>数据元素之间的逻辑关系，与数据的存储无关，独立于计算机</p><p>3、 **存储结构 **</p><p>数据结构在计算机中的表示，也叫物理结构，包括数据元素的表示和关系的表示。是用计算机语言实现的</p><p>4、 **索引存储 **</p><p>在存储元素信息的同时还建立附加的索引表。索引表中的每项称为索引项，索引项的一般形式是（关键字，地址）。</p><p>5、 **散列存储 **</p><p>根据元素的关键字直接计算出该元素的存储地址，又称哈希存储。缺点是与散列函数的好坏有关。</p><p>6、 **数据的运算 **</p><p>施加在数据上的运算，包括运算的定义和实现。定义针对逻辑结构，实现针对存储结构。</p><p>7、 **数据 **</p><p>是描述客观事物属性的能输入到计算机中并被识别和处理符号的集合，数据是计算机程序加工的原料。</p><p>8、 **数据元素 **</p><p>数据的基本单元，通常做一个整体进行考虑和处理。一个数据元素由若干个数据项组成。例如学生数据就是一个数据元素，由学号，姓名等数据项组成。</p><p>9、 **数据项 **</p><p>数据不可分割的最小单位，一个元素由若干个数据项组成</p><p>10、 **数据对象 **</p><p>具有相同性质的数据元素的集合，是数据的一个子集。比如整形数据对象是集合N={0，±1，±2，…}</p><p>11、 **数据类型 **</p><p>是一个值的集合和定义在此集合上的一组操作数的总称，分为原子类型（不可再分），结构类型（可再分为若干数据类型），抽象数据结构（抽象数据组织与之相关的操作）。</p><p>12、 **算法 **</p><p>对特定问题求解步骤的一种描述。</p><p>13、 **时间复杂度 **</p><p>一个语句在算法中被重复执行的次数，它是规模为n的函数。</p><p>14、 **空间复杂度 **</p><p>该算法所耗费的存储空间，它是规模为n的函数。</p><p>15、 **线性表 **</p><p>是具有相同数据类型的n(n&gt;=0)个元素的有限序列。</p><p>16、 **广义表 **</p><p>简称表，是零个或多个原子表所组成的有限序列。</p><p>17、 **顺序表 **</p><p>线性表的顺序存储又称顺序表。它是用一组地址连续的存储单元依次存储线性表中的数据元素，使逻辑上相邻的元素在物理位置上也相邻。</p><p>18、 **单链表 **</p><p>线性表的链式存储又称单链表，它是指通过一组任意的存储单元来存储线性表中的数据元素。除首尾元素外，每一个元素有唯一前驱和唯一后继。</p><p>19、 **头结点 **</p><p>为了使链表在第一个元素的处理操作和其他位置相同而设置的结点，指针域指向第一个结点，数据域为空，也可以存放表长。</p><p>20、 **双链表 **</p><p>每一个结点有两个指针域，一个指向其前驱，一个指向其后继。</p><p>21、 **静态链表 **</p><p>借助数组来描述线性表的链式存储结构，这里的指针是结点的相对地址（数组下标），又称游标。</p><p>22、 **栈 **</p><p>只允许在一端进行插入删除操作的线性表，可插入删除的位置叫栈顶，另一端为栈底。</p><p>23、 **队列 **</p><p>只允许在一段入队，另一端出队的线性表，先进先出。</p><p>24、 **循环队列 **</p><p>在队列的顺序存储结构中，把存储空间的首位逻辑上相连，构成一个环。使得存储空间只要有空余地址就可以进行入队操作。用头部和尾部两个指示器表示队头和队尾。</p><p>25、 **双端队列 **</p><p>队列的两端分别称为前端和后端，两端都可以入队出队。输出受限的双端队列是允许一段插入删除，另一端只能插入。</p><p>26、 **递归 **</p><p>一个函数中又用了它自身。</p><p>27、 **矩阵的压缩存储 **</p><p>为多个值相同的元素只分配一个存储空间，对零元素不分配，从而节省存储空间。</p><p>28、 **稀疏矩阵 **</p><p>矩阵中非零元素的个数相对矩阵元素的个数来说非常少。</p><p>29、 **串 **</p><p>是由零个或多个字符组成的有限序列。一般记为S = ‘a1a2…an’。</p><p>30、 **串的存储结构 **<br>定长顺序存储：为每一个串分配固定长度的存储空间。</p><p>堆分配存储：仍然以一组地址连续的存储单元存放，只不过存储空间是由动态分配得到的。</p><p>块链存储：采用链表方式存储串。</p><p>31、 **串的匹配模式 **</p><p>子串的定位操作通常称为串的模式匹配，它求的是子串（常称模式串）在主串中的位置。</p><p>32、 **树 **</p><p>树是n（n&gt;=0）个结点的有限集。在任意一棵非空树中</p><p>（1）有且仅有一个特殊的称为根的结点</p><p>（2）当n&gt;1时，其余结点可分为m（m&gt;0）个互不相交的有限集合，其中每一个集合本身又是一棵树，并称为根的子树。</p><p>33、 **二叉树 **</p><p>每个结点最多有两个孩子结点的一种树。两个孩子分别称左孩子和右孩子结点。</p><p>34、 **结点的度 **</p><p>结点的分支（子树）个数叫做该结点的度。</p><p>35、 **树的度 **</p><p>是树种所有结点的最大度数。</p><p>36、 **孩子结点与双亲结点 **</p><p>树中某结点的子树的根结点称为该结点的孩子结点。相反，该结点称为孩子结点的双亲结点。</p><p>37、 **兄弟结点 **</p><p>同一层上不同双亲的结点，互为兄弟</p><p>38、 **子孙 **</p><p>以某一结点为根的子树中任一结点称为该结点的子孙。</p><p>39、 **祖先 **</p><p>是指从根结点到该结点的路径上所有的结点。</p><p>40、 **叶子结点与分支结点 **</p><p>度为0的结点。度不为0的称为分支结点。</p><p>41、 **树的高度 **</p><p>树中所有结点的层次最大值。</p><p>42、 **平衡因子 **</p><p>结点的左子树深度与右子树深度的差。</p><p>43、 **满二叉树 **</p><p>深度为k，且有2k-1个结点的二叉树。</p><p>44、 **完全二叉树 **</p><p>高为h、有n个结点的二叉树，当且仅当每一个结点都与高度为h的满二叉树中编号为1~n的结点一一对应时，称为完全二叉树。</p><p>45、 **二叉排序树 **</p><p>左子树上的所有结点的关键字都小于根结点的关键字，右子树上所有结点的关键字都大于根结点的关键字。并且左右子树也分别是二叉排序树。</p><p>46、 **平衡二叉树 **</p><p>树上任一结点的左子树和右子树的深度之差不超的1.</p><p>47、 **二叉树的遍历 **</p><p>指按某条搜索路径访问树中每一结点，使得每一结点被访问且仅被访问一次。</p><p>48、 **线索二叉树 **</p><p>对二叉树以某种次序遍历并加上线索的过程称为线索化。线索化的二叉树为线索二叉树。</p><p>49、 **线索 **</p><p>在二叉树中，必有n+1个空域，利用这些空域存放二叉树以某种次序遍历的结点的前驱后继。</p><p>50、 **树的遍历 **</p><p>先根和后根遍历。树的后根遍历与其对应的二叉树的中序遍历相同。</p><p>51、 **森林的遍历 **</p><p>先序遍历和中序遍历，森林的先序和中序遍历即为其对应二叉树的先序和中序遍历。</p><p>52、 **森林 **</p><p>M棵互不相交的树构成的集合。</p><p>53、 **哈夫曼树（最优二叉树） **</p><p>在含有N个带权结点的二叉树中，其带权路径长度最小的二叉树称为哈夫曼树，也称最优二叉树。</p><p>54、 **哈夫曼编码 **</p><p>一般以N种字符出现的频率做权值，构造哈夫曼树，左孩子边为0，右孩子边为1，那么从根到叶子结点经过的0和1序列，构成了哈夫曼编码。</p><p>55、 **树的路径长度 **</p><p>每个结点到根结点路径长度之和。</p><p>56、 **树的带权路径长度（WPL） **</p><p>每个结点的带权路径长度之和</p><p>57、 **前缀编码 **</p><p>任何一个字符的编码都不是另一个字符编码的前缀。</p><p>58、 **图 **</p><p>图G是由顶点集V和边集E组成，记G=(V,E)，各个顶点之间是多对多的关系。</p><p>59、 **有向图 **</p><p>E是有向边（也称弧）的有限集合，记为&lt;v,w&gt;，v,w是顶点，v是弧尾，w是弧头，&lt;v,w&gt;称为从顶点v到顶点w的弧。</p><p>60、 **无向图 **</p><p>E是无向边（简称边）的有限集合，记(v,w)或(w,v)。可以说w和v互为邻接点。</p><p>61、 **简单图 **</p><p>（1）不存在重复边（2）不存在顶点到自身的边</p><p>62、 **多重图 **</p><p>与简单图相对，允许存在重复边，允许顶点到自身的边。</p><p>63、 **完全图（简单完全图） **</p><p>有n(n-1)/2条边的无向图称为完全图</p><p>64、 **子图 **</p><p>图G=(V,E)与图G1=(V1,E1)，若V1包含于V，E1包含于E，则G1称为G的子图。</p><p>65、 **连通，连通图 **</p><p>若两点之间存在路径，则称v,w连通。若图中任意两个顶点都是连通的，则称其为连通图，否则为非连通图。若n个顶点边数小于n-1，则一定是非连通图。</p><p>66、 **连通分量 **</p><p>无向图中极大连通子图称为连通分量。</p><p>67、 **强连通图，强连通分量 **</p><p>在有向图中，若v到w和w到v之间都有路径，则称为这两个顶点是强连通的。有向图中的极大强连通子图称为有向图的强连通分量。</p><p>68、 **生成树，生成森林（对于无向图） **</p><p>连通图的生成树是包含图中全部顶点的一个极小连通子图。若顶点个数为n，则生成树含有n-1条边，对于生成树而言，若砍去它的一条边，则会变成非连通图，若加上一条边则会变成一个回路。在非连通图中，连通分量的生成树构成了非连通图的生成森林。</p><p>69、 **顶点的度，入度，出度 **</p><p>每一个顶点的度为以该顶点为一端的边的数目。</p><p>对于无向图，顶点的度为依附该顶点的边的数目。</p><p>对于有向图，顶点v的度分为入度出度，入度是以v为终点的有向边的个数，出度是以v为起点的有向边的个数。</p><p>70、 **权，网 **</p><p>图的弧或边有与它相关的有意义的数，称作权，带有权值的图称为网。</p><p>71、 **稠密图，稀疏图 **</p><p>边数很少称为稀疏图，反之称为稠密图。</p><p>72、 **路径，路径长度 **</p><p>顶点v1到vn之间的一条路径是指顶点序列v1vivj…vn。</p><p>路径上边的数目称为路径长度。</p><p>73、 **回路 **</p><p>第一个顶点和最后一个顶点相同的路径称为回路或环，若n个顶点有大于n-1条边，则此图一定有环。</p><p>74、 **简单路径，简单回路 **</p><p>在路径序列中，顶点不重复出现的路径称为简单路径。除第一个顶点和最后一个顶点之外，其余顶点不重复出现的回路称为简单回路。</p><p>75、 **距离 **</p><p>从顶点u出发到v的最短路径长度称为u到v的距离。若从u到v路径不存在，记该距离为无穷(∞)。</p><p>76、 **有向树 **</p><p>一个顶点的入度为0，其余顶点的入度均为1的有向图，称为有向树。</p><p>77、 **图的存储 **</p><p>分为邻接矩阵法，邻接表法，十字链表法，邻接多重表</p><p>78、 **邻接矩阵法 **</p><p>用一个一维数组存储图中顶点的信息，用二阶数组存储图中边的信息，存储顶点之间邻接关系的二维数组称为邻接矩阵。</p><p>79、 **邻接表法 **</p><p>结合了顺序存储和链式存储，当一个图为稀疏图时，使用邻接表法可大大减少存储空间的浪费。</p><p>顶点vi的边表（对于有向图为出边表）：对vi建立单链表，表中的结点表示依附于顶点vi的边（有向图则为以vi为尾的弧）</p><p>顶点表：边表的头指针和顶点的数据信息采用顺序存储。</p><p>80、 **十字链表法 **</p><p>是有向图的一种链式存储结构，在十字链表中，对应于有向图的每条弧有一个结点，对应于每个顶点也有一个结点。</p><p>81、 **邻接多重表 **</p><p>是无向图的另一种链式存储，所有依附于同一顶点的边串联在同一链表中，由于每条边依附于两个顶点，因此每个边结点同时链接在两个链表中。</p><p>82、 **广度优先搜索BFS **</p><p>是一种分层查找过程，类似于二叉树的层序遍历，以v为起点，由近至远依次访问和v优路径相通且路径长度为1，2，… 的顶点。</p><p>广度优先生成树，由邻接矩阵得到的生成树是唯一的，由邻接表得到的不唯一。</p><p>83、 **深度优先搜索DFS **</p><p>类似于树的先序遍历，尽可能深的搜索一个图。深度优先生成树，由邻接矩阵得到的生成树是唯一的，由邻接表得到的不唯一。</p><p>84、 **最小生成树算法（无向带权图） **</p><p>在带权连通无向图图里搜索最小生成树。“P点K边”</p><p>**①Prim算法（普里姆） **</p><p>每次都从未选的顶点找到与已选的顶点之间权值最小的顶点并加进树中，如此重复，直到树包含所有顶点为止。适用于边稠密的图。</p><p>**②Kruskal算法（克鲁斯卡尔） **</p><p>每次都选未被选、权值最小且不构成回路的边，如此重复，直到树包含所有顶点为止。适用于点稠密的图。</p><p>85、 **最短路径算法（有向带权图） **</p><p>**①Dijkstra算法（迪杰斯特拉） **</p><p>求单源最短路径，从起始点开始，采用贪心算法的策略，每次遍历到始点距离最近且未访问过的顶点的邻接结点，直到扩展到终点为止。</p><p>**②Floyd算法（弗洛伊德） **</p><p>求每对顶点间的最短路径。利用动态规划的思想寻找给定的加权图中多源点之间最短路径的算法。</p><p>86、 **有向无环图（DAG图） **</p><p>若一个有向图中不存在环，则称为有向无环图，简称DAG图。</p><p>87、 **拓扑排序 **</p><p>由一个有向无环图的顶点组成的序列，当且仅当满足下列条件时，称为该图的一个拓扑排序：</p><p>①每个顶点出现且只出现一次</p><p>②若顶点A序列在顶点B的前面，则在图中不存在从B到A的路径。</p><p>88、 **AOV网 **</p><p>若用有向无环图表示一个工程，以顶点表示活动，用有向边表示活动先后关系，这样的图简称为AOV网。</p><p>89、 **AOE网 **</p><p>若用有向无环带权图表示一个工程，以顶点表示事件，有向边表示活动，边上的权值表示该活动持续的时间，这样的图简称为AOE网。</p><p>90、 **关键路径 **</p><p>从开始顶点（源点）到结束顶点（汇点）的所有路径中，具有最大路径长度的路径称为关键路径，把关键路径上的活动称为关键活动。</p><p>**①事件Vi: ** 早：early 迟：late</p><p>最早发生时间ve(i)</p><p>指从源点到vi的最长路径</p><p>最迟发生时间vl(i)</p><p>指不推迟整个工程时间下vi最迟发生的时间</p><p>**②活动ai： **</p><p>最早开始时间e(i)</p><p>指该活动弧的起点所表示的事件的最早发生时间</p><p>最迟开始时间l(i)</p><p>指该活动弧的终点所表示的事件的最迟发生时间与该活动所需时间之差。</p><p>91、 **时间余量 **d(i)=l(i)-e(l)</p><p>不增加完成整个工程所需总时间的情况下，活动可以拖延的时间，若d(i)=0，即l(i)=e(i)，则活动ai是关键活动。</p><p>92、 **查找表（查找结构） **</p><p>用于查找的数据集合称为查找表，由同一类型的数据元素组成，可以是一维数组或链表等数据类型。</p><p>93、 **静态查找表 **</p><p>只有查找操作，无须动态修改查找表。</p><p>94、 **关键字 **</p><p>数据元素中唯一标识该元素的某个数据项的值，使用基于关键字的查找，查找结果因该是唯一的。</p><p>95、 **平均查找长度 **</p><p>一次查找的长度是指需要比较的关键字次数，而平均查找长度则是所有查找过程中进行关键字的比较次数的平均值ASL=PiCi，Pi是查找第i个元素的概率，Ci是找到第i个数据元素所需要进行的比较次数。</p><p>96、 **顺序查找 **</p><p>又称线性查找，主要用于线性表中查找，从一端开始，逐个查找。分为一般线性表的顺序查找和对按关键字有序的顺序表的顺序查找。一般线性表需要从一端开始，逐个检查关键字是否满足给定条件。在有序的顺序表中，若a[i]小于key，a[i+1]大于key，则直接得出查找失败。</p><p>97、 **哨兵 **</p><p>将表的一个元素设置为哨兵，然后查找的时候当达到哨兵时不用再判断数组越界，引入哨兵可以避免很多不必要的判断语句，从而提高效率</p><p>98、 **失败结点 **</p><p>有序顺序表上的顺序查找判定树中的矩形结点称为失败结点</p><p>99、 **折半查找 **</p><p>又称二分查找，仅适用于有序的顺序表，将key与表中中间值比较，若相等则返回，若大于key则在表左半查找，若小于key则在表右半查找，重复上述操作直至查到或失败。折半查找的判定树是一个平衡二叉树。</p><p>100、 **判定树 **</p><p>是将查找过程通过二叉树进行描述。树中每个圆形结点表示一个记录,结点中的值为该记录的关键字值，树中最下面的叶结点都是方形的,它表示查找不成功的情况</p><p>101、 **分块查找 **</p><p>又称索引顺序查找，吸取了顺序查找和折半查找各自的优点。将查找表分为若干子块，块内的元素可以无序，块之间是有序的。先用折半查找在索引表中确定待查记录所在块，再用顺序查找块内元素。</p><p>102、 **B树 **</p><p>B树又称多路平衡查找树，是一种平衡的多分树，通常我们说m阶的B树，它必须满足如下条件：</p><p>（1）每个结点最多只有m个子结点。</p><p>（2）每个非叶子结点（除了根）具有至少⌈m/2⌉子数，至少有⌈m/2⌉-1个关键字。</p><p>（3）如果根不是叶结点，则根至少有两个子结点。</p><p>（4）具有k个子结点的非叶结点包含k-1个键。</p><p>（5）所有叶子都出现在同一水平，没有任何信息（高度一致）。</p><p>103、 **B+树 **</p><p>B+树是一种树数据结构，通常用于数据库和操作系统的文件系统中。B+树的特点是能够保持数据稳定有序，其插入与修改拥有较稳定的对数时间复杂度。B+树元素自底向上插入，这与二叉树恰好相反。</p><p>104、 **散列表 **</p><p>是根据关键码值而直接进行访问的数据结构。也就是说，它通过把关键码值映射到表中一个位置来访问记录，以加快查找的速度。这个映射函数叫做散列函数，存放记录的数组叫做散列表。</p><p>105、 **散列函数 **</p><p>一个把查找表中的关键字映射成该关键字对应的地址的函数</p><p>106、 **直接定址法 **</p><p>取关键字或关键字的某个线性函数值为散列地址。即H(key)=key或H(key) = a·key + b，其中a和b为常数（这种散列函数叫做自身函数）。</p><p>107、 **除留余数法 **</p><p>取关键字被某个不大于哈希表表长m的质数p除后所得余数为哈希地址。</p><p>108、 **数字分析法 **</p><p>设关键字是r进制的树，用r个数码在各个位置上不同的频率进行分配哈希地址。</p><p>109、 **平方取中法 **</p><p>当无法确定关键字中哪几位分布较均匀时，可以先求出关键字的平方值，然后按需要取平方值的中间几位作为哈希地址。</p><p>110、 **冲突 **</p><p>列函数可能会把两个或以上的不同关键字映射到同一地址，这种情况为冲突，这些发生冲突的不同关键字称为同义词。</p><p>111、 **开放定址法 **</p><p>指的是可存放新表项的空闲地址既向它的同义词表项开放，又向它的非同义词表项开放。</p><p>112、 **拉链法 **</p><p>把所有的同义词存储在一个线性链表中，这个线性链表由其散列地址唯一标识。</p><p>113、 **二次聚集 **</p><p>指在处理冲突过程中发生的两个第一个哈希地址不同的记录争夺同一个后继哈希地址的现象。</p><p>114、 **装填因子 **</p><p>a=表中记录数n/散列表长m，散列表的平均查找长度依赖于装填因子，a越大表示装填的记录越满，越容易冲突。</p><p>115、 **排序算法的稳定 **</p><p>若相同的两个值a1,a2在排序后前后位置不变，则表示稳定。</p><p>116、 **排序法分类 **</p><p>根据数据是否在内存中进行分类</p><p>**①内部排序 **</p><p>指的是待排序记录存放在计算机存储器中进行的排序过程。</p><p>**②外部排序 **</p><p>指的是待排序记录的数量很大, 以致内存一次不能容纳全部记录, 在排序过程中对外存进行访问的排序过程。</p><p>117、 **插入排序 **</p><p>**①直接插入排序 **</p><p>每次将一个待排序的记录，按关键字大小插入到前面已经排好序的子序列中，直至全部记录插入完成。</p><p>②**折半插入排序 **</p><p>对插入排序算法的一种改进。由于前半部分为已排好序的数列，这样我们不用按顺序依次寻找插入点，可以采用折半查找的方法来加快寻找插入点的速度。</p><p>**③希尔排序 **</p><p>又称**缩小增量排序 **，把记录按下标的一定增量分组，对每组用直接插入排序；随着增量逐渐减少，每组包含的关键词越来越多，当增量减至 1 时，整个文件恰被分成一组，算法便终止。</p><p>118、 **交换排序 **</p><p>**①冒泡排序 **</p><p>从后往前（或从前往后）两两比较相邻元素的值，若为逆序则交换它们，直到序列比较完毕，得到一个本次排序最大（最小）的值，之后重复上述操作，直至排序结束。</p><p>**②快速排序 **</p><p>通过一趟排序将要排序的数据分割成独立的两部分，其中一部分的所有数据都比另外一部分的所有数据都要小，然后再按此方法对这两部分数据分别进行快速排序。</p><p>119、 **选择排序 **</p><p>**①简单选择排序 **</p><p>每趟在后面待排序元素中选取关键字最小的元素放到有序子序列，。</p><p>**②堆排序 **</p><p>指利用的一种排序。堆是一个近似完全二叉树的结构，并同时满足堆积的性质：即子结点的键值或索引总是小于（或者大于）它的父结点。</p><p>120、 **归并排序 **</p><p>将已有序的子序列合并，得到完全有序的序列；即先使每个子序列有序，再使子序列段间有序。若将两个有序表合并成一个有序表，称为二路归并。</p><p>121、 **基数排序 **</p><p>采用多关键字排序思想，借助“分配 /收集”两种操作对但逻辑关键字进行排序。</p>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>递归与动态规划</title>
    <link href="/2023/10/29/%E9%80%92%E5%BD%92%E4%B8%8E%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    <url>/2023/10/29/%E9%80%92%E5%BD%92%E4%B8%8E%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/</url>
    
    <content type="html"><![CDATA[<h1>递归与动态规划</h1><h2 id="递归">递归</h2><h3 id="统计逆序对">统计逆序对</h3><ul><li>归并排序的应用</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">a: <span class="hljs-built_in">list</span>, b: <span class="hljs-built_in">list</span></span>) -&gt; <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">list</span>, <span class="hljs-built_in">int</span>]:<br>    a, b = deque(a), deque(b)<br><br>    res = []<br>    cnt = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">while</span> a <span class="hljs-keyword">and</span> b:<br>        <span class="hljs-keyword">if</span> a[<span class="hljs-number">0</span>] &lt;= b[<span class="hljs-number">0</span>]:<br>            res.append(a.popleft())<br>        <span class="hljs-keyword">else</span>:<br>            res.append(b.popleft())     <span class="hljs-comment"># a1 &lt; ... &lt; an | b1 &lt; ... &lt; bm</span><br>            cnt += <span class="hljs-built_in">len</span>(a)               <span class="hljs-comment"># an &lt; b1</span><br><br>    <span class="hljs-keyword">return</span> res + (<span class="hljs-built_in">list</span>(a) <span class="hljs-keyword">if</span> a <span class="hljs-keyword">else</span> <span class="hljs-built_in">list</span>(b)), cnt<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge_sort</span>(<span class="hljs-params">a: <span class="hljs-built_in">list</span></span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(a) &lt;= <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> a, <span class="hljs-number">0</span><br><br>    m = <span class="hljs-built_in">len</span>(a) // <span class="hljs-number">2</span><br><br>    left, l = merge_sort(a[: m])<br>    right, r = merge_sort(a[m:])<br><br>    arr, cnt = merge(left, right)<br>    <span class="hljs-keyword">return</span> arr, cnt + l + r<br><br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><span class="hljs-built_in">print</span>(merge_sort(a)[<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h3 id="鸣人的影分身"><a href="https://www.acwing.com/problem/content/description/1052/">鸣人的影分身</a></h3><blockquote><p>假设鸣人的查克拉能量为 M，他影分身的个数最多为 N，那么制造影分身时有多少种不同的分配方法？</p><ol><li>影分身可以分配 0 点能量。</li><li>分配方案不考虑顺序，例如：M=7,N=3，那么 (2,2,3) 和 (2,3,2) 被视为同一种方案。</li></ol></blockquote><ul><li>此题用 (二维)dp 比较难考虑，递归更加简单清楚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> ceil<br><span class="hljs-comment"># 上取整</span><br><span class="hljs-comment"># m 点能量分给 n 个分身的方法数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">methods</span>(<span class="hljs-params">m, n, last</span>):<br>    <span class="hljs-comment"># 只有 1 个分身, 只能把能量全给它</span><br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><br>    <span class="hljs-comment"># 为了避免重复, 每次给分身的能量小于等于上次给的能量</span><br>    upper = <span class="hljs-built_in">min</span>(m, last)<br>    <span class="hljs-comment"># n 个分身恰好分完, 最大 1 份能量 &gt;= m / n</span><br>    start = ceil(m / n)<br><br>    s = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(start, upper + <span class="hljs-number">1</span>):<br>        s += methods(m - i, n - <span class="hljs-number">1</span>, i)<br><br>    <span class="hljs-keyword">return</span> s<br><br><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())):<br>    m, n = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-built_in">print</span>(methods(m, n, m))<br>    <span class="hljs-comment"># 开始能量无限制</span><br><br></code></pre></td></tr></table></figure><h2 id="dp">dp</h2><h3 id="二维-dp">二维 dp</h3><ul><li>二维 dp 几乎都可以看作背包问题，所以从背包问题开始</li><li>背包问题是在有重量限制的情况下，选取背包中物品使得总价值最大</li></ul><h4 id="01-背包">01 背包</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python">n, weight = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>weights = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>values = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    w, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    weights[i] = w<br>    values[i] = v<br><br><span class="hljs-comment"># 前 i 个物品, 限重 j 的最大价值</span><br>dp = [[<span class="hljs-number">0</span>] * (weight + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, weight + <span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># 不取第 i 个物品</span><br>        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j]<br><br>        <span class="hljs-comment"># 取第 i 个物品</span><br>        <span class="hljs-keyword">if</span> j &gt;= weights[i]:<br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i - <span class="hljs-number">1</span>][j - weights[i]] + values[i])<br><br><span class="hljs-built_in">print</span>(dp[n][weight])<br></code></pre></td></tr></table></figure><h4 id="完全背包">完全背包</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">n, weight = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>weights = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>values = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    w, v = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    weights[i] = w<br>    values[i] = v<br><br><span class="hljs-comment"># 前 i 种物品, 限重 j 的最大价值</span><br>dp = [[<span class="hljs-number">0</span>] * (weight + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, weight + <span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># 不取第 i 种物品</span><br>        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j]<br><br>        <span class="hljs-comment"># 取第 i 种物品</span><br>        <span class="hljs-keyword">if</span> j &gt;= weights[i]:<br>            <span class="hljs-comment"># 只需要取 1 个 i 物品, 剩下的 i 物品在 dp[i][j - weights[i]] 中考虑</span><br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i][j - weights[i]] + values[i])<br>            <span class="hljs-comment"># j == weights[i] 时 dp[*][0] == 0 符合实际意义限重为 0 最大价值为 0</span><br><br><span class="hljs-built_in">print</span>(dp[n][weight])<br></code></pre></td></tr></table></figure><h4 id="整数划分">整数划分</h4><blockquote><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>一个正整数</mtext><mi>n</mi><mtext>可以表示成若干个正整数之和</mtext><mo separator="true">,</mo><mtext>形如</mtext><mo>:</mo><mi>n</mi><mo>=</mo><msub><mi>n</mi><mn>1</mn></msub><mo>+</mo><msub><mi>n</mi><mn>2</mn></msub><mo>+</mo><mo>…</mo><mo>+</mo><msub><mi>n</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">一个正整数 n可以表示成若干个正整数之和, 形如: n=n_1+n_2+…+n_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">一个正整数</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">可以表示成若干个正整数之和</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">形如</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>其中</mtext><msub><mi>n</mi><mn>1</mn></msub><mo>≥</mo><msub><mi>n</mi><mn>2</mn></msub><mo>≥</mo><mo>…</mo><mo>≥</mo><msub><mi>n</mi><mi>k</mi></msub><mo separator="true">,</mo><mi>k</mi><mo>≥</mo><mn>1</mn><mo separator="true">,</mo><mtext>我们将这样的一种表示称为正整数</mtext><mi>n</mi><mtext>的一种划分</mtext></mrow><annotation encoding="application/x-tex">其中 n_1≥n_2≥…≥n_k,k≥1, 我们将这样的一种表示称为正整数 n的一种划分</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord cjk_fallback">其中</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">我们将这样的一种表示称为正整数</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">的一种划分</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>现在给定一个正整数</mtext><mi>n</mi><mo separator="true">,</mo><mtext>请你求出</mtext><mi>n</mi><mtext>共有多少种不同的划分方法</mtext></mrow><annotation encoding="application/x-tex">现在给定一个正整数 n, 请你求出 n 共有多少种不同的划分方法</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">现在给定一个正整数</span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">请你求出</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">共有多少种不同的划分方法</span></span></span></span></p></blockquote><ul><li>把 0 补充进划分，问题转变为 0 到 n 个数不限个数，取出组合和为 n 的方法数</li><li>物品不限个数，可以理解为完全背包的计数问题</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">MOD = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e9</span>) + <span class="hljs-number">7</span><br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><br><span class="hljs-comment"># dp[i][j]: 整数 0 到 i 和为 j 的划分数</span><br>dp = [[<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><br><span class="hljs-comment"># dp 第 0 行的元素开始都是 0(整数 0 和为 正数的划分数为 0)</span><br><span class="hljs-comment"># dp 第 i(&gt;0) 行第 0 个元素(整数 0 到 i 和为 0 的划分数)都是 1</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># 不取第 i 个数</span><br>        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j]<br><br>        <span class="hljs-comment"># 取第 i 个数</span><br>        <span class="hljs-keyword">if</span> j &gt;= i:<br>            <span class="hljs-comment"># 只需要取 1 个 i, 剩下的 i 在 dp[i][j - i] 中考虑</span><br>            dp[i][j] = (dp[i][j] + dp[i][j - i]) % MOD<br>            <span class="hljs-comment"># j == i 时 dp[*][0] == 1 已经被考虑到了</span><br><br><span class="hljs-built_in">print</span>(dp[n][n])<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基础概念与线性表</title>
    <link href="/2023/10/29/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E4%B8%8E%E7%BA%BF%E6%80%A7%E8%A1%A8/"/>
    <url>/2023/10/29/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E4%B8%8E%E7%BA%BF%E6%80%A7%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h1>基础概念与线性表</h1><h2 id="概念">概念</h2><h3 id="数据结构的研究对象">数据结构的研究对象</h3><ol><li>数据的逻辑结构</li><li>数据的物理结构</li><li>数据的运算</li></ol><h3 id="数据结构基本操作准则">数据结构基本操作准则</h3><ul><li>应用程序与存储结构的独立</li></ul><h2 id="内存单位">内存单位</h2><table><thead><tr><th style="text-align:center">单位</th><th style="text-align:center">换算</th></tr></thead><tbody><tr><td style="text-align:center">1B(字节)</td><td style="text-align:center">8b(位)</td></tr><tr><td style="text-align:center">1MB</td><td style="text-align:center">1024KB</td></tr><tr><td style="text-align:center">1KB</td><td style="text-align:center">1024B</td></tr><tr><td style="text-align:center">int</td><td style="text-align:center">4B</td></tr></tbody></table><h2 id="复杂度">复杂度</h2><h3 id="概念-2">概念</h3><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mi mathvariant="normal">∃</mi><mi>c</mi><mtext> </mtext><mi>s</mi><mi mathvariant="normal">.</mi><mi>t</mi><mi mathvariant="normal">.</mi><mtext> </mtext><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>≤</mo><mi>c</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n)=O(g(n)) \iff \exists c \ s.t. \ f(n) \le c(g(n))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟺</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∃</span><span class="mord mathnormal">c</span><span class="mspace"> </span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mord">.</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Ω</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mi mathvariant="normal">∃</mi><mi>c</mi><mtext> </mtext><mi>s</mi><mi mathvariant="normal">.</mi><mi>t</mi><mi mathvariant="normal">.</mi><mtext> </mtext><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>≥</mo><mi>c</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n)=Ω(g(n)) \iff \exists c \ s.t. \ f(n) \ge c(g(n))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Ω</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟺</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∃</span><span class="mord mathnormal">c</span><span class="mspace"> </span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mord">.</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext> </mtext><mo>∧</mo><mtext> </mtext><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Ω</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n)=Θ(g(n)) \iff f(n)=O(g(n)) \ \wedge \ f(n)=Ω(g(n))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟺</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Ω</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span></span></span></p><h3 id="计算">计算</h3><h4 id="循环">循环</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> i = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">while</span> ((i + <span class="hljs-number">1</span>) * (i + <span class="hljs-number">1</span>) &lt; n)<br>    i *= <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>设循环语句 </mtext><mi>i</mi><mo>∗</mo><mo>=</mo><mn>2</mn><mtext> 执行</mtext><mi>t</mi><mtext>次</mtext><mo separator="true">,</mo><mi>i</mi><mtext>最终值为</mtext><mn>5</mn><mo>∗</mo><msup><mn>2</mn><mi>t</mi></msup></mrow><annotation encoding="application/x-tex">设循环语句 \ i *= 2 \ 执行t次,i最终值为5*2^t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">设循环语句</span><span class="mspace"> </span><span class="mord mathnormal">i</span><span class="mord">∗</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mspace"> </span><span class="mord cjk_fallback">执行</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">次</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mord cjk_fallback">最终值为</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8436em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8436em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>代入循环条件</mtext><mo stretchy="false">(</mo><mn>5</mn><mo>∗</mo><msup><mn>2</mn><mi>t</mi></msup><mo>+</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>&lt;</mo><mi>n</mi><mo>⇒</mo><mi>t</mi><mo>&lt;</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mfrac><mrow><msqrt><mi>n</mi></msqrt><mo>−</mo><mn>1</mn></mrow><mn>5</mn></mfrac><mo>⇒</mo><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">代入循环条件(5*2^t + 1)^2 &lt; n \Rightarrow t &lt; \log_{2}\frac{\sqrt{n}-1}{5} \Rightarrow T(n) = O(\log_{2}\sqrt{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">代入循环条件</span><span class="mopen">(</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9269em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8436em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6542em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1633em;vertical-align:-0.686em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4773em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0992em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8492em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.8092em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1908em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><h4 id="递归">递归</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">fact</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <br>    <span class="hljs-keyword">return</span> n * <span class="hljs-built_in">fact</span>(n - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mo>+</mo><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>⇒</mo><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(0) = 1, T(n) = 1 + T(n - 1) \Rightarrow T(n) = O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><p>树型递归画出递归树估算规模</p><h2 id="线性表">线性表</h2><p>不同情况下考虑出入删除不同位置元素的时间复杂度</p><h3 id="顺序">顺序</h3><h3 id="链式">链式</h3><h4 id="有无头节点，头尾指针，循环，双向">有无头节点，头尾指针，循环，双向</h4><h3 id="静态链表">静态链表</h3>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数组矩阵与广义表</title>
    <link href="/2023/10/22/%E6%95%B0%E7%BB%84%E7%9F%A9%E9%98%B5%E4%B8%8E%E5%B9%BF%E4%B9%89%E8%A1%A8/"/>
    <url>/2023/10/22/%E6%95%B0%E7%BB%84%E7%9F%A9%E9%98%B5%E4%B8%8E%E5%B9%BF%E4%B9%89%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h1>数组矩阵与广义表</h1><h2 id="数组的映射">数组的映射</h2><h3 id="一维数组">一维数组</h3><p><img src="image-20231018155555042.png" alt="image-20231018155555042"></p><h3 id="二维数组">二维数组</h3><h4 id="行优先">行优先</h4><p><img src="image-20231018155658944.png" alt="image-20231018155658944"></p><h4 id="列优先">列优先</h4><p><img src="image-20231018155758696.png" alt="image-20231018155758696"></p><h2 id="矩阵">矩阵</h2><h3 id="定义">定义</h3><p><img src="image-20231018160004955.png" alt="image-20231018160004955"></p><h3 id="特殊矩阵的压缩存储">特殊矩阵的压缩存储</h3><p><strong>下标从 1 开始的矩阵压缩存入下标从 0 开始的数组，矩阵下标到数组下标的映射</strong></p><h4 id="对称矩阵">对称矩阵</h4><p><img src="image-20231018171204005.png" alt="image-20231018171204005"></p><h5 id="映射">映射</h5><ol><li>if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">m_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 不在三角区，求 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub></mrow><annotation encoding="application/x-tex">m_{ji}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ji</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 下标</li><li>矩阵 m 元素 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">m_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 在数组 N 的下标 = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mn>11</mn></msub></mrow><annotation encoding="application/x-tex">m_{11}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">m_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 上 / 下 三角按照 行 / 列 顺序元素个数 - 1</li></ol><h4 id="三角矩阵">三角矩阵</h4><p><img src="image-20231018172231880.png" alt="image-20231018172231880"></p><h5 id="映射-2">映射</h5><ol><li>if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">m_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 不在三角区，矩阵 m 元素 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">m_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 在数组 N 的下标 = N 最后位置下标</li><li>if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">m_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 在三角区，矩阵 m 元素 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">m_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 在数组 N 的下标 = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mn>11</mn></msub></mrow><annotation encoding="application/x-tex">m_{11}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">m_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 上 / 下 三角按照 行 / 列 顺序元素个数 - 1</li></ol><h4 id="三对角矩阵">三对角矩阵</h4><p><img src="image-20231018204102249.png" alt="image-20231018204102249"></p><p><img src="image-20231018204134833.png" alt="image-20231018204134833"></p><h3 id="稀疏矩阵">稀疏矩阵</h3><h4 id="三元组表示法">三元组表示法</h4><p><img src="image-20231018204456520.png" alt="image-20231018204456520"></p><h5 id="代码">代码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 定义一个稀疏矩阵类，使用三元组表示法</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SparseMatrix</span>:<br>    <span class="hljs-comment"># 初始化方法，接受一个二维列表作为参数</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, matrix</span>):<br>        <span class="hljs-comment"># 获取矩阵的行数和列数</span><br>        self.rows = <span class="hljs-built_in">len</span>(matrix)<br>        self.cols = <span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])<br>        <span class="hljs-comment"># 创建一个空列表，用于存储非零元素的三元组</span><br>        self.triples = []<br>        <span class="hljs-comment"># 遍历矩阵，找出非零元素，并将其行号、列号和值组成三元组，添加到列表中</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.rows):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.cols):<br>                <span class="hljs-keyword">if</span> matrix[i][j] != <span class="hljs-number">0</span>:<br>                    self.triples.append((i, j, matrix[i][j]))<br><br>    <span class="hljs-comment"># 定义一个转置方法，返回一个新的稀疏矩阵对象，表示原矩阵的转置</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">transpose</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># 创建一个新的稀疏矩阵对象，行数和列数与原矩阵相反</span><br>        transposed = SparseMatrix([[<span class="hljs-number">0</span>] * self.rows <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.cols)])<br>        <span class="hljs-comment"># 遍历原矩阵的三元组列表，将每个三元组的行号和列号互换，添加到新矩阵的三元组列表中</span><br>        <span class="hljs-keyword">for</span> i, j, val <span class="hljs-keyword">in</span> self.triples:<br>            transposed.triples.append((j, i, val))<br>        <span class="hljs-comment"># 返回新矩阵对象</span><br>        <span class="hljs-keyword">return</span> transposed<br></code></pre></td></tr></table></figure><h4 id="十字链表法">十字链表法</h4><img src="image-20231022203642285.png" alt="image-20231022203642285" style="zoom: 50%;" /><h2 id="广义表">广义表</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sublist</span>(<span class="hljs-params">gen_list: <span class="hljs-built_in">tuple</span>, start: <span class="hljs-built_in">int</span>, end: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">tuple</span>:<br>    <span class="hljs-keyword">return</span> gen_list[start: end]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">length</span>(<span class="hljs-params">gen_list: <span class="hljs-built_in">tuple</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(gen_list)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">depth</span>(<span class="hljs-params">gen_list: <span class="hljs-built_in">tuple</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    sub_depth = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> gen_list:<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(item, <span class="hljs-built_in">tuple</span>):<br>            sub_depth = <span class="hljs-built_in">max</span>(sub_depth, depth(item))<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + sub_depth<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">head</span>(<span class="hljs-params">gen_list: <span class="hljs-built_in">tuple</span></span>) -&gt; <span class="hljs-type">Union</span>[<span class="hljs-built_in">tuple</span>, <span class="hljs-built_in">int</span>]:<br>    <span class="hljs-keyword">return</span> gen_list[<span class="hljs-number">0</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Head</span>(<span class="hljs-params">gen_list: <span class="hljs-built_in">tuple</span></span>) -&gt; <span class="hljs-type">Union</span>[<span class="hljs-built_in">tuple</span>, <span class="hljs-built_in">int</span>]:<br>    h = head(gen_list)<br>    ans = h <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(h, <span class="hljs-built_in">tuple</span>) <span class="hljs-keyword">else</span> <span class="hljs-built_in">tuple</span>(h)<br><br>    <span class="hljs-built_in">print</span>(ans)<br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">tail</span>(<span class="hljs-params">gen_list: <span class="hljs-built_in">tuple</span></span>) -&gt; <span class="hljs-built_in">tuple</span>:<br>    <span class="hljs-keyword">return</span> gen_list[<span class="hljs-number">1</span>:]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Tail</span>(<span class="hljs-params">gen_list: <span class="hljs-built_in">tuple</span></span>) -&gt; <span class="hljs-built_in">tuple</span>:<br>    ans = gen_list[-<span class="hljs-number">1</span>] <span class="hljs-keyword">if</span> length(gen_list) == <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> tail(gen_list)<br>    <br>    <span class="hljs-built_in">print</span>(ans)<br>    <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params">gen_list_1: <span class="hljs-built_in">tuple</span>, gen_list_2: <span class="hljs-built_in">tuple</span></span>) -&gt; <span class="hljs-built_in">tuple</span>:<br>    <span class="hljs-keyword">return</span> gen_list_1 + gen_list_2<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten_print</span>(<span class="hljs-params">gen_list: <span class="hljs-built_in">tuple</span></span>) -&gt; <span class="hljs-literal">None</span>:<br>    s = <span class="hljs-built_in">str</span>(gen_list)<br>    s = s.replace(<span class="hljs-string">&#x27;(&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>    s = s.replace(<span class="hljs-string">&#x27;)&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>    s = s.replace(<span class="hljs-string">&#x27;,&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>    s = s.replace(<span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(s)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>追番更新表</title>
    <link href="/2023/10/21/%E8%BF%BD%E7%95%AA%E6%9B%B4%E6%96%B0%E8%A1%A8/"/>
    <url>/2023/10/21/%E8%BF%BD%E7%95%AA%E6%9B%B4%E6%96%B0%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h1>追番更新表</h1><table><thead><tr><th>作品</th><th>日期</th><th>时间</th></tr></thead><tbody><tr><td>Rick and Morty</td><td>周一</td><td>晚</td></tr><tr><td>日月同错</td><td>周二</td><td>0 点</td></tr><tr><td>一人之下</td><td>周五</td><td>0 点</td></tr><tr><td>锈铁</td><td>周六</td><td>0 点</td></tr></tbody></table>]]></content>
    
    
    
    <tags>
      
      <tag>杂谈</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>考研计划</title>
    <link href="/2023/10/21/%E8%80%83%E7%A0%94%E8%AE%A1%E5%88%92/"/>
    <url>/2023/10/21/%E8%80%83%E7%A0%94%E8%AE%A1%E5%88%92/</url>
    
    <content type="html"><![CDATA[<h1>考研计划</h1><h2 id="Routine">Routine</h2><table><thead><tr><th style="text-align:center">科目</th><th style="text-align:center">时间</th><th style="text-align:center">任务量</th></tr></thead><tbody><tr><td style="text-align:center">数学</td><td style="text-align:center">每日</td><td style="text-align:center">半套卷</td></tr><tr><td style="text-align:center">政治</td><td style="text-align:center">每日</td><td style="text-align:center">肖 1 D</td></tr><tr><td style="text-align:center">DSA</td><td style="text-align:center">周末</td><td style="text-align:center">一套卷</td></tr><tr><td style="text-align:center">英语</td><td style="text-align:center">周末</td><td style="text-align:center">一套卷 + 翻译 / 作文</td></tr></tbody></table><h2 id="数学">数学</h2><h3 id="思路">思路</h3><ul><li>本来数学真题是最好的，但是新大纲后知识点和题型都有调整</li><li>重要性: 新大纲真题 &gt; 旧大纲真题 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≥</mo></mrow><annotation encoding="application/x-tex">\ge</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mrel">≥</span></span></span></span> 24 模拟卷</li><li>模拟卷风评: 李林 &gt; 超越 &gt; 共创 ……</li></ul><h3 id="计划">计划</h3><ul><li>倒刷旧大纲真题</li><li>研究新大纲真题</li><li>模拟卷</li></ul><h3 id="真题均分">真题均分</h3><p><img src="v2-65d9a477666d817435910f60363bd0c5_r.jpg" alt="v2-65d9a477666d817435910f60363bd0c5_r"></p><h2 id="DSA">DSA</h2><ul><li>写真题</li><li>整理 线性 dp 和其他出现的算法，复习必要 c++ 编程题范式</li><li>整理 概念名词解释</li></ul><h2 id="政治">政治</h2><h3 id="肖秀荣体系">肖秀荣体系</h3><h4 id="客观题">客观题</h4><ul><li>背诵手册共 48 章，重点: 加粗关键词，理解点拨</li><li>1000 题除习思想部分</li><li>手册赠品题</li><li>形势与政策，8 + 4 也会涉及时政</li></ul><h4 id="主观题">主观题</h4><ul><li>8 + 4 套卷，选择题讲解: 大牙考研，大题带背: 空卡空卡空空卡</li><li>考点预测 - 分析题整理</li></ul><h3 id="腿姐体系">腿姐体系</h3><ul><li>腿姐技巧班 - 分析题模板</li><li>腿姐冲刺班</li><li>腿姐押题班</li></ul><h3 id="计划-2">计划</h3><ul><li>看一章背诵手册，做对应帽子题，做一章小程序</li><li>错题，整理</li><li>234，学科总结 复习，真题选择题</li></ul><h2 id="英语">英语</h2><ul><li>写真题</li><li>看 翻译，作文 网课</li><li>看真题 翻译，作文 讲解</li><li>翻译：<a href="https://kaoyan.gaotu.cn/learn/360680150563575808?course_type=5&amp;signUpPathTag=tj173391685992067072z">唐静</a></li><li>写作：<a href="https://www.orangevip.com/coursedetail/23549.html#tabItem1">石雷鹏</a></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>考研</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>异步编程初探</title>
    <link href="/2023/10/21/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%88%9D%E6%8E%A2/"/>
    <url>/2023/10/21/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%88%9D%E6%8E%A2/</url>
    
    <content type="html"><![CDATA[<h1>异步编程初探</h1><p>本文为初学者一家之言，意在不考虑内部实现的情况下理解应用异步编程</p><h1>JS异步</h1><h2 id="同步">同步</h2><p>程序按语句顺序执行为同步，若非则为异步</p><p>示例顺序执行打印在控制台，print易实现</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;a&#x27;</span>);<br><span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;b&#x27;</span>);<br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><br><span class="hljs-selector-tag">b</span><br></code></pre></td></tr></table></figure><h2 id="异步">异步</h2><h3 id="回调函数">回调函数</h3><p>JS提供setTimeout函数，执行时丢出子线程等待指定时间后执行参数回调函数中语句</p><p>因为主线程未停止，所以样例结果与前例不同</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">setTimeout</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;a&#x27;</span>);<br>    &#125;, <br>    <span class="hljs-number">1</span><br>);<br><br><span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;b&#x27;</span>);<br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">b</span><br><span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure><h4 id="回调函数的异步执行">回调函数的异步执行</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">setTimeout</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;a&#x27;</span>);<br>    &#125;, <span class="hljs-number">1000</span>);<br><br><span class="hljs-built_in">setTimeout</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;b&#x27;</span>);<br>    &#125;, <span class="hljs-number">2000</span>);<br><br><span class="hljs-built_in">setTimeout</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;c&#x27;</span>);<br>    &#125;, <span class="hljs-number">3000</span>);<br></code></pre></td></tr></table></figure><h4 id="回调函数的同步执行">回调函数的同步执行</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">setTimeout</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;a&#x27;</span>);<br><br>        <span class="hljs-built_in">setTimeout</span>( <br>            <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;b&#x27;</span>);<br><br>                <span class="hljs-built_in">setTimeout</span>(<br>                    <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                        <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;c&#x27;</span>);<br>                    &#125;, <span class="hljs-number">3000</span>);<br>            &#125;, <span class="hljs-number">2000</span>);<br>    &#125;, <span class="hljs-number">1000</span>);<br></code></pre></td></tr></table></figure><h3 id="Promise">Promise</h3><p>Promise是回调函数的容器，便于回调函数的嵌套同步执行</p><p>构造函数的参数是一个接收回调函数的函数，在回调函数的语句后添加resolve传递参数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) &#123;<br>        <span class="hljs-built_in">setTimeout</span>(<br>            <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;a&#x27;</span>)<br>                <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1000</span>)<br>            &#125;,<br>            <span class="hljs-number">1000</span><br>        )<br>    &#125;<br>)<br></code></pre></td></tr></table></figure><p>方法then的参数是一个参数为传递value的函数，其返回值仍为Promise对象</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs javascript">.<span class="hljs-title function_">then</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) &#123;<br>        value += <span class="hljs-number">1000</span><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<br>            <span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) &#123;<br>                <span class="hljs-built_in">setTimeout</span>(<br>                    <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                        <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;b&#x27;</span>)<br>                        <span class="hljs-title function_">resolve</span>(value)<br>                    &#125;,<br>                    value<br>                )<br>            &#125;<br>        )<br>    &#125;<br>)<br>.<span class="hljs-title function_">then</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) &#123;<br>        value += <span class="hljs-number">1000</span><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<br>            <span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) &#123;<br>                <span class="hljs-built_in">setTimeout</span>(<br>                    <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                        <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;c&#x27;</span>)<br>                        <span class="hljs-title function_">resolve</span>(value)<br>                    &#125;,<br>                    value<br>                )<br>            &#125;<br>        )<br>    &#125;<br>);<br></code></pre></td></tr></table></figure><h4 id="Promise函数">Promise函数</h4><p>将Promise及参数包装在函数中作为值返回</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">promise_print</span>(<span class="hljs-params">obj, delay</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<br>        <span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) &#123;<br>            <span class="hljs-built_in">setTimeout</span>(<br>                <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                    <span class="hljs-title function_">print</span>(obj)<br>                    <br>                    <span class="hljs-title function_">resolve</span>(delay)<br>                &#125;,<br>                delay<br>            )<br>        &#125;<br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>回调函数嵌套同步执行</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">promise_print</span>(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">1000</span>)<br>.<span class="hljs-title function_">then</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">promise_print</span>(<span class="hljs-string">&#x27;b&#x27;</span>, value + <span class="hljs-number">1000</span>);<br>    &#125;<br>)<br>.<span class="hljs-title function_">then</span>(<br>    <span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">promise_print</span>(<span class="hljs-string">&#x27;c&#x27;</span>, value + <span class="hljs-number">1000</span>);<br>    &#125;<br>);<br></code></pre></td></tr></table></figure><h5 id="异步函数">异步函数</h5><p>同步执行Promise函数，可以用<em>async</em>  function声明异步函数</p><p>在函数中用await调用Promise函数</p><p>注意异步函数本身是异步执行的</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async_f</span>(<span class="hljs-params">delay</span>) &#123;<br>    <span class="hljs-keyword">await</span> <span class="hljs-title function_">promise_print</span>(<span class="hljs-string">&quot;a&quot;</span>, delay)<br>    <span class="hljs-keyword">await</span> <span class="hljs-title function_">promise_print</span>(<span class="hljs-string">&quot;b&quot;</span>, delay)<br>    <span class="hljs-keyword">await</span> <span class="hljs-title function_">promise_print</span>(<span class="hljs-string">&quot;c&quot;</span>, delay)<br>&#125;<br></code></pre></td></tr></table></figure><h1>Python协程</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">async_print</span>(<span class="hljs-params">obj, delay</span>):<br>    <span class="hljs-keyword">await</span> asyncio.sleep(delay)<br>    <span class="hljs-built_in">print</span>(obj)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    loop = asyncio.get_event_loop()<br><br>    tasks = [<br>        async_print(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">1</span>), <br>        async_print(<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-number">2</span>), <br>        async_print(<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-number">3</span>)<br>        ]<br><br>    loop.run_until_complete(asyncio.wait(tasks))<br><br>    loop.close()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>编程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>励志语录</title>
    <link href="/2023/10/21/%E5%8A%B1%E5%BF%97%E8%AF%AD%E5%BD%95/"/>
    <url>/2023/10/21/%E5%8A%B1%E5%BF%97%E8%AF%AD%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="励志语录">励志语录</h2><blockquote><p>世上本有一条路，走的人多了，便没有了路。</p></blockquote><blockquote><p>感觉考上了也实在没意思。一方面，我对未来社会发展持悲观态度，无论如何都难以出人头地，更何况高考和保研都不尽人意，即便考上了又能如何，拼尽全力也只不过到达了别人的起点而已；另一方面家长是公务员，显著的小农思想和官本位的价值观，更可怕的是极强的控制欲和神经质，给我灌输了大量的垃圾情绪。因此，常常有抑郁情绪和疑病症，处于自傲和自卑的叠加状中，这也是我考研失败的主要原因。</p></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>杂谈</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>string</title>
    <link href="/2023/10/21/string/"/>
    <url>/2023/10/21/string/</url>
    
    <content type="html"><![CDATA[<h1>string</h1><h2 id="声明">声明</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">string s;<br>string ss[10];<br></code></pre></td></tr></table></figure><h2 id="初始化">初始化</h2><p>使用等号的初始化叫做拷贝初始化，不使用等号的初始化叫直接初始化。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs text">#include&lt;iostream&gt;<br>#include&lt;string&gt;<br><br>using namespace std;<br><br>int main()&#123;<br>    string s;               //  默认初始化，一个空白的字符串<br>    string s1(&quot;ssss&quot;);      // s1是字面值&quot;ssss&quot;的副本<br>    string s2(s1);          // s2是s1的副本<br>    string s3 = s2;         // s3是s2的副本<br>    string s4(10, &#x27;4&#x27;);     // s4初始化<br>    string s5 = &quot;Andre&quot;;    // 拷贝初始化<br>    string s6 = string(10, &#x27;c&#x27;);    // 可拷贝初始化，生成一个初始化好的对象，拷贝给s6<br><br>    char cs[] = &quot;12345&quot;;<br>    string s7(cs, 3);       // 复制字符串cs的前三个字符到s当中<br><br>    string s8 = &quot;abcde&quot;;<br>    string s9(s8, 2);<br><br>    string s10 = &quot;asdsfasdgf&quot;;<br>    string s11(s10, 3, 4);  // s4是s3从下标s开始4个字符的拷贝，超出s10.size出现未定义<br>    return 0;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="string类型的读入">string类型的读入</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">string s;<br>cin &gt;&gt; s;   //不能读入空格，以空格，制表符，回车符作为结束标志<br>getline(cin, s); //可以读入空格和制表符，以回车符作为结束的标志<br></code></pre></td></tr></table></figure><h2 id="字符串末尾添加字符">字符串末尾添加字符</h2><p>可以用+号和append()函数在函数的末尾添加字符。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">string s;<br>s += &#x27;a&#x27;;<br>s.append(&#x27;a&#x27;);<br></code></pre></td></tr></table></figure><h2 id="sting类型变量的访问">sting类型变量的访问</h2><p>string字符串变量访问可以采用at, operator[]来访问指定index对应的字符。其中at有越界检查,如果index越界，无论Debug还是在Release编译的环境下，程序异常跳出执行；operator[]无越界检查，如果index越界，则会取得不可预知的字符。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">string s(&quot;abcd&quot;);<br>cout &lt;&lt; s[0] &lt;&lt; s.at(2) &lt;&lt; endl;<br></code></pre></td></tr></table></figure><h2 id="string类型的长度">string类型的长度</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">string s = &quot;Hello, world!&quot;<br>int len = s.size();<br>int len = s.length();   //这两种方式是等价的<br></code></pre></td></tr></table></figure><h2 id="查找字符串的子字符串">查找字符串的子字符串</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">string s = abcdefg, subs = &quot;efg&quot;;<br>int pos = s.find(subs); // 如果找到子字符串则返回首次匹配的位置，否则返回-1<br></code></pre></td></tr></table></figure><h2 id="指向首字符和末尾字符的迭代器（begin-end）">指向首字符和末尾字符的迭代器（begin,end）</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs text">string s(&quot;abcdefg&quot;);<br>for(string::iterator it = s.begin(); it != s.end(); it++)<br>&#123;<br>    cout &lt;&lt; *it;<br>&#125;<br><br>//逆向迭代器<br>for (string::iterator it = s.rbegin(); it != s.rend(); it++)<br>   &#123; cout &lt;&lt; *it;  &#125; <br><br>//采用auto实现迭代器<br><br>for(auto itr : s)<br>&#123;<br>    cout &lt;&lt; itr &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://pic4.zhimg.com/80/v2-7ff65bc40e209fe291362f8f44470047_720w.webp" alt="img"></p><h2 id="empty-clear">empty(), clear()</h2><p>empty()可以用来检查字符串是否为空，clear()用来清空字符串。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">string s1 = &quot;012345&quot;;<br>if(!s1.empty())&#123;<br>    cout &lt;&lt; s1.length &lt;&lt; endl;<br>    s1.clear();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="insert-在指定index处插入字符或字符串">insert()在指定index处插入字符或字符串</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">// insert原型函数，在index插入count个字符ch。<br>// insert(size_type index, size_type count, char ch)<br><br>string s1 = &quot;abc&quot;;<br>s1.insert(1, 2, &#x27;D&#x27;)    // &quot;aDDbc&quot;<br></code></pre></td></tr></table></figure><h2 id="erase-删除字符">erase()删除字符</h2><p>erase()函数有三个原型:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">string&amp; erase(size_t pos = 0, size_t n = npos);<br>iterator erase(iterator position);<br>iterator erase(iterator first, iterator last);<br></code></pre></td></tr></table></figure><p>因此erase()总共有三种用法:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">erase(pos, n);      //删除从pos开始的n个字符,比如erase(0, 1)就是删除第一个字符<br>erase(position);    //删除从position处的一个字符(position是个string类型的迭代器)<br>erase(first, last); //删除从first到last之间的字符(first和last都是迭代器)<br></code></pre></td></tr></table></figure><p>应用实例：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs text">string str (&quot;This is an example phrase.&quot;);<br>string::iterator it;<br><br>// 第(1)种用法<br>str.erase (10,8);<br>cout &lt;&lt; str &lt;&lt; endl;        // &quot;This is an phrase.&quot;<br><br>// 第(2)种用法<br>it=str.begin()+9;<br>str.erase (it);<br>cout &lt;&lt; str &lt;&lt; endl;        // &quot;This is a phrase.&quot;<br><br>// 第(3)种用法<br>str.erase (str.begin()+5, str.end()-7);<br>cout &lt;&lt; str &lt;&lt; endl;        // &quot;This phrase.&quot;<br></code></pre></td></tr></table></figure><h2 id="获取子字符串substr">获取子字符串substr()</h2><ul><li><p>函数原型: <code>string substr(size_t pos = 0, size_t len = npos) const;</code></p></li><li><p>功能: 从子字符串中获取想要的子字符串</p></li><li><p>参数：</p></li><li><ul><li>pos: 想要获取的子字符串的第一个字符的位置，如果pos等于字符串长度，则该函数返回一个空字符串，如果等于字符串长度，则该函数返回一个空的字符串，如果该长度大于字符串长度，则抛出一个out_of_range。 注：第一个字符的下标从0开始。</li><li>len： 子字符串中要包含的字符数, string::npos的值表示知道字符串末尾的所有字符。</li></ul></li><li><p>返回值：带有对象子字符串的字符串对象。</p></li></ul><p>应用实例:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">string s1 = <span class="hljs-string">&quot;Hello World&quot;</span><br>string s2 = s1.<span class="hljs-built_in">substr</span>(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>);<br>string s3 = s1.<span class="hljs-built_in">substr</span>(<span class="hljs-number">3</span>, str::npos); <span class="hljs-comment">//截取从下标3到结束的子字符串</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>编程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pythonic algorithm</title>
    <link href="/2023/10/21/Pythonic%20algorithm/"/>
    <url>/2023/10/21/Pythonic%20algorithm/</url>
    
    <content type="html"><![CDATA[<h1>Pythonic algorithm</h1><h1>计算机基础</h1><h2 id="Mbps、KBps、MB、kb、B、b">Mbps、KBps、MB、kb、B、b</h2><p>1B(字节) = 8b(位)</p><p>1MB = 1024KB1KB = 1024B</p><p>1Mbps = 1000Kbps1Kbps = 1000bps</p><p>1MBps = 8Mbps</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>MBtoKB = <span class="hljs-keyword">lambda</span> x: <span class="hljs-number">1024</span> * x<br><span class="hljs-meta">... </span>KBtoB = <span class="hljs-keyword">lambda</span> x: <span class="hljs-number">1024</span> * x<br><span class="hljs-meta">... </span>Btob = <span class="hljs-keyword">lambda</span> x: <span class="hljs-number">8</span> * x<br><span class="hljs-meta">... </span>MB = <span class="hljs-number">256</span><br><span class="hljs-meta">... </span>KB = MBtoKB(MB)<br><span class="hljs-meta">... </span>B = KBtoB(KB)<br><span class="hljs-meta">... </span>b = Btob(B)<br><span class="hljs-meta">... </span>n = b // <span class="hljs-number">32</span><br>n<br><span class="hljs-number">67108864</span><br></code></pre></td></tr></table></figure><h2 id="数据范围反推算法复杂度以及算法内容">数据范围反推算法复杂度以及算法内容</h2><p>时间限制1秒或2秒。在这种情况下，C++代码中的操作次数控制在 10^7∼10^8为最佳。</p><p>下面给出在不同数据范围下，代码的时间复杂度和算法该如何选择：</p><h3 id="n-≤-30">n ≤ 30</h3><p><strong>指数级别</strong>, dfs+剪枝，状态压缩dp</p><h3 id="n-≤-100">n ≤ 100</h3><p><strong>O(n^3)</strong>，floyd，dp，高斯消元</p><h3 id="n-≤-1000">n ≤ 1000</h3><p><strong>O(n^2)，O(n^2logn)</strong>，dp，二分，朴素版Dijkstra、朴素版Prim、Bellman-Ford</p><h3 id="n-≤-10000">n ≤ 10000</h3><p><strong>O(n∗sqrt(n))</strong>，块状链表、分块、莫队</p><h3 id="n-≤-100000">n ≤ 100000</h3><p><strong>O(nlogn)</strong> =&gt; 各种sort，线段树、树状数组、set/map、heap、拓扑排序、dijkstra+heap、prim+heap、Kruskal、spfa、求凸包、求半平面交、二分、CDQ分治、整体二分、后缀数组、树链剖分、动态树</p><h3 id="n≤1000000">n≤1000000</h3><p><strong>O(n)</strong>, 以及常数较小的 O(nlogn) 算法 =&gt; 单调队列、 hash、双指针扫描、并查集，kmp、AC自动机，常数比较小的 O(nlogn) 的做法：sort、树状数组、heap、dijkstra、spfa</p><h3 id="n-≤-10000000">n ≤ 10000000</h3><p><strong>O(n)</strong>，双指针扫描、kmp、AC自动机、线性筛素数</p><h3 id="n-≤-10-9">n ≤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">10^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span></h3><p><strong>O(sqrt(n))</strong>，判断质数</p><h3 id="n-≤-10-18">n ≤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>18</mn></msup></mrow><annotation encoding="application/x-tex">10^{18}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">18</span></span></span></span></span></span></span></span></span></span></span></span></h3><p><strong>O(logn)</strong>，最大公约数，快速幂，数位DP</p><h3 id="n-≤-10-1000">n ≤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>1000</mn></msup></mrow><annotation encoding="application/x-tex">10^{1000}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1000</span></span></span></span></span></span></span></span></span></span></span></span></h3><p><strong>O((logn)^2)</strong>，高精度加减乘除</p><h3 id="n-≤-10-100000">n ≤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>100000</mn></msup></mrow><annotation encoding="application/x-tex">10^{100000}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">100000</span></span></span></span></span></span></span></span></span></span></span></span></h3><p><strong>O(logk×loglogk)，k表示位数</strong>，高精度加减、FFT/NTT</p><h1>基本知识</h1><h2 id="Python运算符">Python运算符</h2><p>0为False，非0为True</p><p><img src="https://s2.loli.net/2022/03/19/ir6LMUxNgE1OuA7.png" alt="image-20220319090755721"></p><h2 id="内置函数">内置函数</h2><h3 id="判断类型">判断类型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">type</span>(<span class="hljs-number">1.0</span>)<br>Out[<span class="hljs-number">2</span>]: <span class="hljs-built_in">float</span><br><span class="hljs-built_in">type</span>(<span class="hljs-number">3</span>) == <span class="hljs-built_in">int</span><br>Out[<span class="hljs-number">3</span>]: <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><h3 id="幂">幂</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">3</span> ** <span class="hljs-number">10</span><br>Out[<span class="hljs-number">2</span>]: <span class="hljs-number">59049</span><br><span class="hljs-number">2</span> ** -<span class="hljs-number">0.7</span><br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">0.6155722066724582</span><br><span class="hljs-number">3</span> ** <span class="hljs-number">0.5</span><br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">1.7320508075688772</span><br></code></pre></td></tr></table></figure><h3 id="绝对值">绝对值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">abs</span>(-<span class="hljs-number">1.7</span>)<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">1.7</span><br></code></pre></td></tr></table></figure><h3 id="求和">求和</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">sum</span>([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [], [<span class="hljs-number">1</span>]], [])<br>Out[<span class="hljs-number">4</span>]: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><h3 id="最值">最值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">max</span>(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>)<br>Out[<span class="hljs-number">2</span>]: <span class="hljs-number">4</span><br><span class="hljs-built_in">min</span>([<span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>])<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="四舍五入">四舍五入</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">x, y = <span class="hljs-number">1.555</span>, <span class="hljs-number">1.5555</span><br><br><span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;x:<span class="hljs-number">.2</span>f&#125;</span> <span class="hljs-subst">&#123;y:<span class="hljs-number">.2</span>f&#125;</span>&#x27;</span><br><br><br><span class="hljs-string">&#x27;1.55 1.56&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="装饰器">装饰器</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_time</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> time<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapped</span>(<span class="hljs-params">*args, **kwargs</span>):<br>        t = time()<br>        res = func(*args, **kwargs)<br>        <span class="hljs-built_in">print</span>(func.__name__, <span class="hljs-string">&quot;time cost:&quot;</span>, time() - t)<br>        <span class="hljs-keyword">return</span> res<br><br>    <span class="hljs-keyword">return</span> wrapped<br><br><br><span class="hljs-meta">@print_time</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">makeE</span>(<span class="hljs-params">n</span>):<br>    E = [[<span class="hljs-number">0</span>] * n <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        E[i][i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> E<br></code></pre></td></tr></table></figure><h2 id="常用操作">常用操作</h2><h3 id="修改最大递归深度">修改最大递归深度</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sys <span class="hljs-keyword">import</span> setrecursionlimit<br>setrecursionlimit(<span class="hljs-built_in">int</span>(<span class="hljs-number">1e6</span>))<br></code></pre></td></tr></table></figure><h3 id="无穷量">无穷量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)<br>-<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)<br>Out[<span class="hljs-number">2</span>]: -inf<br>c = <span class="hljs-number">3</span><br>c = <span class="hljs-built_in">min</span>(c, a)<br>c<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">3</span><br><span class="hljs-built_in">type</span>(c)<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-built_in">int</span><br></code></pre></td></tr></table></figure><h3 id="科学计数法">科学计数法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">int</span>(<span class="hljs-number">1e5</span>)<br>Out[<span class="hljs-number">2</span>]: <span class="hljs-number">100000</span><br><span class="hljs-number">1e-4</span><br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">0.0001</span><br></code></pre></td></tr></table></figure><h3 id="不定长度输入">不定长度输入</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-keyword">try</span>:<br>        f(<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()))<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><h3 id="2维列表合并">2维列表合并</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]] + [[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">1</span>]]<br>Out[<span class="hljs-number">3</span>]: [[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">1</span>]]<br></code></pre></td></tr></table></figure><h3 id="2维列表复制">2维列表复制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">g = [l.copy() <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> graph]<br></code></pre></td></tr></table></figure><h3 id="字典">字典</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br>result = []<br>n, d, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>record = &#123;&#125;<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    ts, <span class="hljs-built_in">id</span> = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">id</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> record:<br>        record[<span class="hljs-built_in">id</span>] = []<br>    record[<span class="hljs-built_in">id</span>].append(ts)<br><span class="hljs-keyword">for</span> <span class="hljs-built_in">id</span>, ts <span class="hljs-keyword">in</span> record.items():<br>    a = <span class="hljs-built_in">sorted</span>(ts)<br>    s, m = <span class="hljs-number">0</span>, <span class="hljs-number">10001</span><br>    l = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> R <span class="hljs-keyword">in</span> a:<br>        s += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> s &gt;= k:<br>            m = <span class="hljs-built_in">min</span>(m, R - a[l] + <span class="hljs-number">1</span>)<br>            s -= <span class="hljs-number">1</span><br>            l += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> m &lt;= d:<br>        heapq.heappush(result, <span class="hljs-built_in">id</span>)<br><span class="hljs-keyword">while</span> result:<br>    <span class="hljs-built_in">print</span>(heapq.heappop(result))<br></code></pre></td></tr></table></figure><h3 id="元组">元组</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">b = (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br>a = (<span class="hljs-number">1</span>,)<br>a + b<br>Out[<span class="hljs-number">7</span>]: (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><h3 id="集合交并">集合交并</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">a = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;<br>b = &#123;<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>&#125;<br>a | b<br>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>&#125;<br>a &amp; b<br>&#123;<span class="hljs-number">2</span>&#125;<br></code></pre></td></tr></table></figure><h3 id="重定向输入">重定向输入</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys <br>sys.stdin = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;large.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <br></code></pre></td></tr></table></figure><h3 id="测速指令">测速指令</h3><p>ipython特性</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">n</span>):<br>    n &lt;&lt;= <span class="hljs-number">20</span><br>    <span class="hljs-keyword">return</span> [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>%timeit f(<span class="hljs-number">1</span>)<br><span class="hljs-number">54.1</span> ms ± <span class="hljs-number">1.29</span> ms per loop (mean ± std. dev. of <span class="hljs-number">7</span> runs, <span class="hljs-number">10</span> loops each)<br></code></pre></td></tr></table></figure><h1>标准库</h1><h2 id="datetime">datetime</h2><h3 id="date类">date类</h3><p>date类包含三个参数，分别为year，month，day，返回格式为year-month-day。</p><p>date对象表示理想化日历中的日期(年、月和日), 公历1年1月1日被称为第一天，依次往后推。</p><p>其中用户创建时间的类方法如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;今天的日期是:&quot;</span>,datetime.date.today())     <span class="hljs-comment"># 今日的日期</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;使用时间戳创建的日期：&quot;</span>,datetime.date.fromtimestamp(<span class="hljs-number">1234567896</span>))   <span class="hljs-comment">#  使用时间戳创建日期</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;使用公历序数创建的日期：&quot;</span>,datetime.date.fromordinal(<span class="hljs-number">1</span>))    <span class="hljs-comment"># 使用公历序数创建的日期</span><br><br>结果如下：<br><br>今天的日期是: <span class="hljs-number">2020</span>-08-<span class="hljs-number">31</span><br>使用时间戳创建的日期： <span class="hljs-number">2009</span>-02-<span class="hljs-number">14</span><br>使用公历序数创建的日期： 0001-01-01<br></code></pre></td></tr></table></figure><p>对象的属性及方法如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> datetime<br><br>today = datetime.date(year=<span class="hljs-number">2020</span>,month=<span class="hljs-number">8</span>,day=<span class="hljs-number">31</span>)   <span class="hljs-comment">#  使用参数创建日期</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;date对象的年份:&#x27;</span>, today.year)    <br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;date对象的月份:&#x27;</span>, today.month)   <br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;date对象的日:&#x27;</span>, today.day)  <br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;date对象的struct_time结构为：&quot;</span>,today.timetuple())<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;返回当前公历日期的序数:&quot;</span>,today.toordinal())   <span class="hljs-comment">#  与fromordinal函数作用相反</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;当前日期为星期(其中：周一对应0):&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(today.weekday()))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;当前日期为星期(其中：周一对应1):&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(today.isoweekday()))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;当前日期的年份、第几周、周几(其中返回为元组):&quot;</span>,today.isocalendar())<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;以ISO 8601格式‘YYYY-MM-DD’返回date的字符串形式：&quot;</span>,today.isoformat())<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;返回一个表示日期的字符串(其格式如：Mon Aug 31 00:00:00 2020):&quot;</span>,today.ctime())<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;指定格式为：&quot;</span>,today.strftime(<span class="hljs-string">&quot;%Y/%m/%d&quot;</span>))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;替换后的日期为：&quot;</span>,today.replace(<span class="hljs-number">2019</span>,<span class="hljs-number">9</span>,<span class="hljs-number">29</span>))<br><br>结果如下：<br><br>date对象的年份: <span class="hljs-number">2020</span><br>date对象的月份: <span class="hljs-number">8</span><br>date对象的日: <span class="hljs-number">31</span><br>date对象的struct_time结构为： time.struct_time(tm_year=<span class="hljs-number">2020</span>, tm_mon=<span class="hljs-number">8</span>, tm_mday=<span class="hljs-number">31</span>, tm_hour=<span class="hljs-number">0</span>, tm_min=<span class="hljs-number">0</span>, tm_sec=<span class="hljs-number">0</span>, tm_wday=<span class="hljs-number">0</span>, tm_yday=<span class="hljs-number">244</span>, tm_isdst=-<span class="hljs-number">1</span>)<br>返回当前公历日期的序数: <span class="hljs-number">737668</span><br>当前日期为星期(其中：周一对应<span class="hljs-number">0</span>):<span class="hljs-number">0</span><br>当前日期为星期(其中：周一对应<span class="hljs-number">1</span>):<span class="hljs-number">1</span><br>当前日期的年份、第几周、周几(其中返回为元组): (<span class="hljs-number">2020</span>, <span class="hljs-number">36</span>, <span class="hljs-number">1</span>)<br>以ISO <span class="hljs-number">8601</span>格式‘YYYY-MM-DD’返回date的字符串形式： <span class="hljs-number">2020</span>-08-<span class="hljs-number">31</span><br>返回一个表示日期的字符串(其格式如：Mon Aug <span class="hljs-number">31</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-number">2020</span>): Mon Aug <span class="hljs-number">31</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-number">2020</span><br>指定格式为： <span class="hljs-number">2020</span>/08/<span class="hljs-number">31</span><br>替换后的日期为： <span class="hljs-number">2019</span>-09-<span class="hljs-number">29</span><br></code></pre></td></tr></table></figure><p>其中，格式化的表达式如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python">%y 两位数的年份表示（<span class="hljs-number">00</span>-<span class="hljs-number">99</span>）<br>%Y 四位数的年份表示（<span class="hljs-number">000</span>-<span class="hljs-number">9999</span>）<br>%m 月份（01-<span class="hljs-number">12</span>）<br>%d 月内中的一天（<span class="hljs-number">0</span>-<span class="hljs-number">31</span>）<br>%H <span class="hljs-number">24</span>小时制小时数（<span class="hljs-number">0</span>-<span class="hljs-number">23</span>）<br>%I <span class="hljs-number">12</span>小时制小时数（01-<span class="hljs-number">12</span>）<br>%M 分钟数（<span class="hljs-number">00</span>=<span class="hljs-number">59</span>）<br>%S 秒（<span class="hljs-number">00</span>-<span class="hljs-number">59</span>）<br>%a 本地简化星期名称<br>%A 本地完整星期名称<br>%b 本地简化的月份名称<br>%B 本地完整的月份名称<br>%c 本地相应的日期表示和时间表示<br>%j 年内的一天（001-<span class="hljs-number">366</span>）<br>%p 本地A.M.或P.M.的等价符<br>%U 一年中的星期数（<span class="hljs-number">00</span>-<span class="hljs-number">53</span>）星期天为星期的开始<br>%w 星期（<span class="hljs-number">0</span>-<span class="hljs-number">6</span>），星期天为星期的开始<br>%W 一年中的星期数（<span class="hljs-number">00</span>-<span class="hljs-number">53</span>）星期一为星期的开始<br>%x 本地相应的日期表示<br>%X 本地相应的时间表示<br>%Z 当前时区的名称<br>%% %号本身<br></code></pre></td></tr></table></figure><h2 id="itertools">itertools</h2><h3 id="itertools-combinations">itertools.combinations</h3><p>求列表或生成器中指定数目的元素不重复的所有组合</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>x = itertools.combinations(<span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>), <span class="hljs-number">3</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(x))<br>[(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)]<br></code></pre></td></tr></table></figure><h3 id="itertools-permutations">itertools.permutations</h3><p>产生指定数目的元素的所有排列(顺序有关)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>x = itertools.permutations(<span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>), <span class="hljs-number">3</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(x))<br>[(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)] <br></code></pre></td></tr></table></figure><h2 id="functools">functools</h2><h3 id="functools-lru-cache">@functools.lru_cache()</h3><p><code>lru_cache()</code> 装饰器是 <em>缓存淘汰算法</em>(最近较少使用)的一种实现。其使用函数的参数作为key结果作为value缓存在hash结构中(因此函数的参数必须是hashable)，如果后续使用相同参数再次调用将从hash从返回结果。同时装饰器还添加了检查缓存转态方法(<code>cache_info()</code>)和清空缓存方法(<code>cache_clear()</code>)给函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">from</span> sys <span class="hljs-keyword">import</span> setrecursionlimit<br>        <span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache<br><br>        setrecursionlimit(<span class="hljs-built_in">int</span>(<span class="hljs-number">1e6</span>))<br><br>        self.lru_cache = lru_cache<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.lru_cache(maxsize=<span class="hljs-literal">None</span>)     <span class="hljs-comment"># return key is function</span><br></code></pre></td></tr></table></figure><h3 id="functools-total-ordering">@functools.total_ordering</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@functools.total_ordering</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, frequency, char = <span class="hljs-string">&quot;&quot;</span></span>):<br>        self.frequency = frequency<br>        self.char = char<br>        self.left = <span class="hljs-literal">None</span><br>        self.right = <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">return</span> self.frequency == other.frequency<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__gt__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">return</span> self.frequency &gt; other.frequency<br></code></pre></td></tr></table></figure><h2 id="deque">deque</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br>d = deque()<br>d.append(<span class="hljs-number">1</span>)<br>d.append(<span class="hljs-number">2</span>)<br>d.appendleft(<span class="hljs-number">3</span>)<br><span class="hljs-built_in">len</span>(d)<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">3</span><br>d.clear()<br>d<br>Out[<span class="hljs-number">6</span>]: deque([])<br>d.extend([<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>])<br>d<br>Out[<span class="hljs-number">8</span>]: deque([<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>])<br>d.extendleft([<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>])<br>d<br>Out[<span class="hljs-number">10</span>]: deque([<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>])<br>d.pop()<br>Out[<span class="hljs-number">11</span>]: <span class="hljs-number">6</span><br>d.popleft()<br>Out[<span class="hljs-number">12</span>]: <span class="hljs-string">&#x27;c&#x27;</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> d:<br>    <span class="hljs-built_in">print</span>(i)<br>b<br>a<br><span class="hljs-number">2</span><br><span class="hljs-number">4</span><br>d[<span class="hljs-number">0</span>]<br>Out[<span class="hljs-number">14</span>]: <span class="hljs-string">&#x27;b&#x27;</span><br>d[-<span class="hljs-number">1</span>]<br>Out[<span class="hljs-number">15</span>]: <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h2 id="heapq">heapq</h2><h3 id="最小堆">最小堆</h3><p>将x压入堆中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">heappush(heap, x)<br></code></pre></td></tr></table></figure><p>从堆中弹出最小的元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">heappop(heap) <br></code></pre></td></tr></table></figure><p>让列表具备堆特征</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">heapify(heap) <br></code></pre></td></tr></table></figure><p>返回iter中n个最小的元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">nsmallest(n, <span class="hljs-built_in">iter</span>)<br></code></pre></td></tr></table></figure><h2 id="math库">math库</h2><h3 id="排列组合">排列组合</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">math</span>.factorial(<span class="hljs-number">5</span>)<br><span class="hljs-attribute">120</span><br><br><span class="hljs-attribute">math</span>.perm(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)<br><span class="hljs-attribute">60</span><br><br><span class="hljs-attribute">math</span>.comb(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)<br><span class="hljs-attribute">10</span><br></code></pre></td></tr></table></figure><h3 id="对数">对数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">math.log(<span class="hljs-number">2</span>)<br>Out[<span class="hljs-number">13</span>]: <span class="hljs-number">0.6931471805599453</span><br>math.log(<span class="hljs-number">2</span>, math.e)<br>Out[<span class="hljs-number">14</span>]: <span class="hljs-number">0.6931471805599453</span><br>math.log(<span class="hljs-number">4</span>, <span class="hljs-number">2</span>)<br>Out[<span class="hljs-number">15</span>]: <span class="hljs-number">2.0</span><br>math.log2(<span class="hljs-number">4</span>)<br>Out[<span class="hljs-number">16</span>]: <span class="hljs-number">2.0</span><br></code></pre></td></tr></table></figure><h3 id="上取整">上取整</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">math.ceil(<span class="hljs-number">1.0</span>)<br>Out[<span class="hljs-number">6</span>]: <span class="hljs-number">1</span><br>math.ceil(<span class="hljs-number">1.3</span>)<br>Out[<span class="hljs-number">7</span>]: <span class="hljs-number">2</span><br><span class="hljs-built_in">type</span>(math.ceil(<span class="hljs-number">1.3</span>))<br>Out[<span class="hljs-number">8</span>]: <span class="hljs-built_in">int</span><br></code></pre></td></tr></table></figure><h3 id="最大公约数">最大公约数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> gcd<br>gcd(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">0</span><br>gcd(<span class="hljs-number">21</span>, <span class="hljs-number">14</span>)<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">7</span><br>gcd(<span class="hljs-number">0</span>, <span class="hljs-number">6</span>)<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><h2 id="bisect库">bisect库</h2><p>bisect_left等价于bound(f, a) + 1，f使小于target真</p><p>bisect等价于bound(f, a) + 1，f使小于等于target真</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> bisect<br>l = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>bisect.bisect_left(l, <span class="hljs-number">4</span>)<br>Out[<span class="hljs-number">2</span>]: <span class="hljs-number">2</span><br>bisect.bisect_left(l, <span class="hljs-number">3</span>)<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">2</span><br>bisect.bisect_left(l, <span class="hljs-number">6</span>)<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">6</span><br>bisect.bisect_left(l, <span class="hljs-number">1</span>)<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">0</span><br>bisect.bisect_left(l, <span class="hljs-number">0</span>)<br>Out[<span class="hljs-number">6</span>]: <span class="hljs-number">0</span><br>bisect.bisect(l, <span class="hljs-number">4</span>)<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">5</span><br>bisect.bisect(l, <span class="hljs-number">3</span>)<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">2</span><br>bisect.bisect(l, <span class="hljs-number">1</span>)<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">1</span><br>bisect.bisect(l, <span class="hljs-number">0</span>)<br>Out[<span class="hljs-number">6</span>]: <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h1>数学知识</h1><h2 id="数论">数论</h2><h3 id="快速幂">快速幂</h3><p>随时取余</p><p><img src="https://s2.loli.net/2022/03/19/Clqt6g9f3kayG15.jpg" alt="img"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ModCalculation</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, mod=<span class="hljs-number">0</span></span>):<br>        self.mod = mod<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_mod</span>(<span class="hljs-params">self, a</span>):<br>        <span class="hljs-keyword">return</span> a % self.mod <span class="hljs-keyword">if</span> self.mod <span class="hljs-keyword">else</span> a<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_add</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> (a + b) % self.mod <span class="hljs-keyword">if</span> self.mod <span class="hljs-keyword">else</span> a + b<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, *args</span>):<br>        s = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> args:<br>            s = self._add(s, i)<br>        <span class="hljs-keyword">return</span> s<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">self, iterable</span>):<br>        <span class="hljs-keyword">return</span> self.add(*iterable)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_mul</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> (a * b) % self.mod <span class="hljs-keyword">if</span> self.mod <span class="hljs-keyword">else</span> a * b<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">mul</span>(<span class="hljs-params">self, *args</span>):<br>        res = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> args:<br>            res = self._mul(res, i)<br>        <span class="hljs-keyword">return</span> res<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">quick_power</span>(<span class="hljs-params">self, a, n</span>):<br>        res = <span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">while</span> n:<br>            <span class="hljs-keyword">if</span> n &amp; <span class="hljs-number">1</span>:<br>                res = self.mul(res, a)<br><br>            a = self.mul(a, a)<br>            n &gt;&gt;= <span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">return</span> res<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LinearSpace</span>(<span class="hljs-title class_ inherited__">ModCalculation</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, dim, mod=<span class="hljs-number">0</span></span>):<br>        <span class="hljs-built_in">super</span>().__init__(mod)<br>        self.dim = dim<br><br>        self.E = [[<span class="hljs-number">0</span>] * dim <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(dim)]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(dim):<br>            self.E[i][i] = <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">axb</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">sum</span>(self.mul(i, j) <span class="hljs-keyword">for</span> i, j <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(a, b))<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">axA</span>(<span class="hljs-params">self, a, A</span>):<br>        <span class="hljs-keyword">return</span> [self.<span class="hljs-built_in">sum</span>(self.mul(a[i], A[i][j]) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.dim)) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.dim)]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">AxB</span>(<span class="hljs-params">self, A, B</span>):<br>        <span class="hljs-keyword">return</span> [self.axA(a, B) <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> A]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">quick_power</span>(<span class="hljs-params">self, A, n</span>):<br>        res = self.E<br><br>        B = A<br>        <span class="hljs-keyword">while</span> n:<br>            <span class="hljs-keyword">if</span> n &amp; <span class="hljs-number">1</span>:<br>                res = self.AxB(res, B)<br><br>            B = self.AxB(B, B)<br>            n &gt;&gt;= <span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><h3 id="裴蜀定理">裴蜀定理</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mi>d</mi><mtext>，</mtext><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mi>y</mi><mo>=</mo><mi>d</mi><mtext>一定有解，</mtext><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mi>y</mi><mtext>都是</mtext><mi>d</mi><mtext>倍数</mtext></mrow><annotation encoding="application/x-tex">(a, b)=d，ax+by=d一定有解，ax+by都是d倍数</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">d</span><span class="mord cjk_fallback">，</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">d</span><span class="mord cjk_fallback">一定有解，</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord cjk_fallback">都是</span><span class="mord mathnormal">d</span><span class="mord cjk_fallback">倍数</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mtext>，存在下界，大于下界的数都可以由</mtext><mi>a</mi><mtext>，</mtext><mi>b</mi><mtext>的正整数系数线性表出</mtext></mrow><annotation encoding="application/x-tex">(a, b)=1，存在下界，大于下界的数都可以由a，b的正整数系数线性表出</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">1</span><span class="mord cjk_fallback">，存在下界，大于下界的数都可以由</span><span class="mord mathnormal">a</span><span class="mord cjk_fallback">，</span><span class="mord mathnormal">b</span><span class="mord cjk_fallback">的正整数系数线性表出</span></span></span></span></p><p>以上结论易推广到多个数</p><p>这里给出一个不精确的下界所有互素数之积，显然大于等于所有互素数之积的数可以被素数的正整数系数线性表出</p><h3 id="不定方程">不定方程</h3><h4 id="定理">定理</h4><p><img src="https://s2.loli.net/2022/03/19/dhfyRCwQA8KJVme.png" alt="image-20220319090632543"></p><p><img src="https://s2.loli.net/2022/03/19/bkuKqIUh5E1J6wT.png" alt="image-20220319090705682"></p><h4 id="通解">通解</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">equation</span>(<span class="hljs-params">a, b, c</span>):<br>    d, x, y = exgcd(a, b)<br>    <span class="hljs-keyword">if</span> c % d:<br>        <span class="hljs-keyword">return</span><br>    a //= d<br>    b //= d<br>    c //= d<br>    x *= c<br>    y *= c<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span> t: (x + b * t, y - a * t)<br></code></pre></td></tr></table></figure><h3 id="线性筛">线性筛</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">linear_sieve</span>(<span class="hljs-params">n</span>):    <span class="hljs-comment"># primes in [2, n]</span><br>    is_prime, primes = [<span class="hljs-literal">True</span>] * (n + <span class="hljs-number">1</span>), []<br><br>    <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> is_prime[p]:<br>            primes.append(p)<br><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(p * p, n + <span class="hljs-number">1</span>, p):<br>                is_prime[i] = <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">return</span> primes<br></code></pre></td></tr></table></figure><h3 id="合数中最小与最大质因数的上确界">合数中最小与最大质因数的上确界</h3><h4 id="引理">引理</h4><p>合数能唯一分解成质因数之积</p><p>合数质因数越少，每个质因数越大</p><h4 id="推论">推论</h4><p>仅能分解为两个质因数之积的合数的最小与最大质因数的上确界是任一合数的最小与最大质因数的上确界</p><p>质因数分布越分散，最小质因数越小，最大质因数越大，反之同理</p><h4 id="结论">结论</h4><h5 id="合数n最小质因数的上确界">合数n最小质因数的上确界</h5><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>p</mi><mi>m</mi></msub><mo>=</mo><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">p_m=\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1908em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8492em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.8092em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1908em;"><span></span></span></span></span></span></span></span></span></span></p><h5 id="合数n最大质因数的上确界">合数n最大质因数的上确界</h5><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>p</mi><mi>M</mi></msub><mo>=</mo><mfrac><mi>n</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">p_M=\frac{n}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><h4 id="应用">应用</h4><h5 id="判断质数n">判断质数n</h5><p>判断质数只需判断其最小质因数是否存在</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>判断是否存在闭区间</mtext><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><msub><mi>p</mi><mi>m</mi></msub><mo stretchy="false">]</mo><mtext>中的质数整除</mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">判断是否存在闭区间[2,p_m]中的质数整除n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">判断是否存在闭区间</span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mord cjk_fallback">中的质数整除</span><span class="mord mathnormal">n</span></span></span></span></span></p><h5 id="质数分解n">质数分解n</h5><p>先不妨设n是合数</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>则其全体质因数就是闭区间</mtext><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><msub><mi>p</mi><mi>M</mi></msub><mo stretchy="false">]</mo><mtext>中所有整除</mtext><mi>n</mi><mtext>的质数</mtext></mrow><annotation encoding="application/x-tex">则其全体质因数就是闭区间[2,p_M]中所有整除n的质数</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">则其全体质因数就是闭区间</span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mord cjk_fallback">中所有整除</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">的质数</span></span></span></span></span></p><p>若其中没有数整除n，则n是质数，分解后还是n</p><h3 id="判断质数">判断质数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_prime</span>(<span class="hljs-params">n</span>):<br>    sqrt = <span class="hljs-built_in">int</span>(n ** <span class="hljs-number">0.5</span>)<br>    primes = linear_sieve(sqrt)<br>    <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> primes:<br>        <span class="hljs-keyword">if</span> n % i == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><h3 id="素数分解">素数分解</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">factorization</span>(<span class="hljs-params">n</span>):<br>    p = linear_sieve(n // <span class="hljs-number">2</span>)<br>    factors = &#123;&#125;<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">p</span>):<br>        <span class="hljs-keyword">if</span> p <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> factors:<br>            factors[p] = <span class="hljs-number">0</span><br>        factors[p] += <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> p:<br>        <span class="hljs-keyword">while</span> n % i == <span class="hljs-number">0</span>:<br>            push(i)<br>            n //= i<br><br>        <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">break</span><br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> factors <span class="hljs-keyword">and</span> n &gt; <span class="hljs-number">1</span>:<br>        push(n)<br><br>    <span class="hljs-keyword">return</span> factors<br></code></pre></td></tr></table></figure><h3 id="因数分解">因数分解</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">break_factor</span>(<span class="hljs-params">n</span>):<br>    sqrt = <span class="hljs-built_in">int</span>(n ** <span class="hljs-number">0.5</span>)<br>    factors = [sqrt]<br><br>    <span class="hljs-keyword">if</span> n // sqrt != sqrt:<br>        factors.append(n // sqrt)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, sqrt):<br>        <span class="hljs-keyword">if</span> n % i == <span class="hljs-number">0</span>:<br>            factors.append(i)<br>            factors.append(n // i)<br><br>    <span class="hljs-keyword">return</span> factors<br></code></pre></td></tr></table></figure><h3 id="约数个数">约数个数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">count</span>(<span class="hljs-params">n</span>):<br>    factors = breakdown(n)<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(factors.values())<br></code></pre></td></tr></table></figure><h3 id="约数和">约数和</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">factors_sum</span>(<span class="hljs-params">n</span>):<br>    s = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> p, e <span class="hljs-keyword">in</span> breakdown(n).items():<br>        s *= <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> i: p ** i, <span class="hljs-built_in">range</span>(e + <span class="hljs-number">1</span>)))<br>    <span class="hljs-keyword">return</span> s<br></code></pre></td></tr></table></figure><h3 id="扩展欧几里得">扩展欧几里得</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">exgcd</span>(<span class="hljs-params">a, b</span>):<br>    a_neg, b_neg = <span class="hljs-literal">False</span>, <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">if</span> a &lt; <span class="hljs-number">0</span>:<br>        a = -a<br>        a_neg = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">if</span> b &lt; <span class="hljs-number">0</span>:<br>        b = -b<br>        b_neg = <span class="hljs-literal">True</span><br><br>    x0, y0 = <span class="hljs-number">1</span>, <span class="hljs-number">0</span>       <span class="hljs-comment"># 本轮使A,B线性组合等于a的系数</span><br>    x1, y1 = <span class="hljs-number">0</span>, <span class="hljs-number">1</span>       <span class="hljs-comment"># 下轮使A,B线性组合等于a的系数</span><br>    <span class="hljs-keyword">while</span> b:<br>        q = a // b<br>        x0, x1 = x1, x0 - q * x1<br>        y0, y1 = y1, y0 - q * y1<br>        a, b = b, a % b<br><br>    <span class="hljs-keyword">if</span> a_neg:<br>        x0 = -x0<br>    <span class="hljs-keyword">if</span> b_neg:<br>        y0 = -y0<br>    <span class="hljs-keyword">return</span> a, x0, y0<br></code></pre></td></tr></table></figure><h2 id="组合">组合</h2><h3 id="卡特兰数">卡特兰数</h3><p>所有包含n个1，n个-1的序列中前缀和始终非负且最终为0的序列数</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>C</mi><mrow><mn>2</mn><mi>n</mi></mrow><mi>n</mi></msubsup><mo>−</mo><msubsup><mi>c</mi><mrow><mn>2</mn><mi>n</mi></mrow><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msubsup><mo>=</mo><mfrac><msubsup><mi>C</mi><mrow><mn>2</mn><mi>n</mi></mrow><mi>n</mi></msubsup><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">C^n_{2n}-c^{n+1}_{2n}=\frac{C^n_{2n}}{n+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9614em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-2.453em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1205em;vertical-align:-0.2564em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.4436em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2564em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1297em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-2.4519em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><h4 id="进出栈序列">进出栈序列</h4><p>n 个元素进栈序列为：1，2，3，4，…，n，则有多少种出栈的元素排列</p><p>合法序列前缀和始终非负且最终为0</p><p><img src="https://s2.loli.net/2022/03/24/gECpY4h9SrunRyJ.jpg" alt="扫描全能王 2022-03-24 11.01"></p><h4 id="括号序列">括号序列</h4><p><img src="https://s2.loli.net/2022/03/24/GnCl37yEIhB1pz5.png" alt="image-20220324110740693"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> comb<br>C = <span class="hljs-keyword">lambda</span> n: comb(n &lt;&lt; <span class="hljs-number">1</span>, n) // (n + <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h2 id="博弈论">博弈论</h2><h3 id="Bash-Game">Bash Game</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">bash</span>(<span class="hljs-params">m, n</span>):<br>    <span class="hljs-keyword">if</span> n % (m + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><h3 id="Nim-Game">Nim Game</h3><p><img src="https://s2.loli.net/2022/03/22/LcXNhO5yEmgd2Ci.jpg" alt="img"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">data = [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> data:<br>    ans ^= i<br><span class="hljs-keyword">if</span> ans:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Yes&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;No&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="异或数列">异或数列</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">play</span>(<span class="hljs-params">data</span>):<br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> data:<br>        ans ^= i<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ans:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    one = [<span class="hljs-number">0</span>] * <span class="hljs-number">20</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">record</span>(<span class="hljs-params">x</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>):<br>            <span class="hljs-keyword">if</span> x &amp; <span class="hljs-number">1</span>:<br>                one[i] += <span class="hljs-number">1</span><br>            x &gt;&gt;= <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> data:<br>        record(i)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">19</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> one[i] &amp; <span class="hljs-number">1</span>:<br>            zero = n - one[i]<br>            <span class="hljs-keyword">if</span> one[i] == <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> (zero &amp; <span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())):<br>    l = [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    n = l[<span class="hljs-number">0</span>]<br>    <span class="hljs-built_in">print</span>(play(l[<span class="hljs-number">1</span>:]))<br></code></pre></td></tr></table></figure><h1>图论</h1><h2 id="搜索">搜索</h2><h3 id="dfs">dfs</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python">m, n = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>inf = m * n<br>track = [[<span class="hljs-literal">True</span>] * m <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>g = [[<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>total = <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">sum</span>, g))<br>half = total // <span class="hljs-number">2</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">solution</span>():<br>    <span class="hljs-keyword">if</span> half + half != total:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    ans = inf<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x, y, s, cnt</span>):<br>        <span class="hljs-keyword">nonlocal</span> ans<br>        s += g[x][y]<br>        cnt += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> s &gt; half:<br>            <span class="hljs-keyword">return</span><br>        <span class="hljs-keyword">if</span> s == half:<br>            ans = <span class="hljs-built_in">min</span>(ans, cnt)<br>            <span class="hljs-keyword">return</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">x, y</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= x &lt; n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= y &lt; m:<br>                <span class="hljs-keyword">if</span> track[x][y]:<br>                    track[x][y] = <span class="hljs-literal">False</span><br>                    dfs(x, y, s, cnt)<br>                    track[x][y] = <span class="hljs-literal">True</span><br>        push(x + <span class="hljs-number">1</span>, y)<br>        push(x - <span class="hljs-number">1</span>, y)<br>        push(x, y + <span class="hljs-number">1</span>)<br>        push(x, y - <span class="hljs-number">1</span>)<br>    dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">if</span> ans &lt; inf:<br>        <span class="hljs-keyword">return</span> ans<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><span class="hljs-built_in">print</span>(solution())<br></code></pre></td></tr></table></figure><h3 id="bfs">bfs</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br>q = deque()<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>graph, absent = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)], [<span class="hljs-literal">True</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    graph[a].append(b)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">bfs</span>():<br>    steps, absent[<span class="hljs-number">1</span>] = -<span class="hljs-number">1</span>, <span class="hljs-literal">False</span><br>    q.append(<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">while</span> q:<br>        steps += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(q)):<br>            v = q.popleft()<br>            <span class="hljs-keyword">if</span> v == n:<br>                <span class="hljs-keyword">return</span> steps<br>            <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> graph[v]:<br>                <span class="hljs-keyword">if</span> absent[w]:<br>                    absent[w] = <span class="hljs-literal">False</span><br>                    q.append(w)<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(bfs())<br></code></pre></td></tr></table></figure><h4 id="flood-fill">flood fill</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>graph, track = [<span class="hljs-built_in">input</span>() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)], [[<span class="hljs-literal">True</span>] * n <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">bfs</span>(<span class="hljs-params">x, y</span>):<br>    filled, q = <span class="hljs-literal">True</span>, deque()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">x, y</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= x &lt; n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= y &lt; n:<br>            <span class="hljs-keyword">if</span> graph[x][y] == <span class="hljs-string">&quot;#&quot;</span> <span class="hljs-keyword">and</span> track[x][y]:<br>                track[x][y] = <span class="hljs-literal">False</span><br>                q.append((x, y))<br>            <span class="hljs-keyword">elif</span> graph[x][y] == <span class="hljs-string">&quot;.&quot;</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    push(x, y)<br>    <span class="hljs-keyword">while</span> q:<br>        a, b = q.popleft()<br>        sea = <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">if</span> push(a + <span class="hljs-number">1</span>, b):<br>            sea = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">if</span> push(a - <span class="hljs-number">1</span>, b):<br>            sea = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">if</span> push(a, b + <span class="hljs-number">1</span>):<br>            sea = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">if</span> push(a, b - <span class="hljs-number">1</span>):<br>            sea = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> sea:<br>            filled = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> filled<br>cnt = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">if</span> graph[i][j] == <span class="hljs-string">&quot;#&quot;</span> <span class="hljs-keyword">and</span> track[i][j]:<br>            <span class="hljs-keyword">if</span> bfs(i, j):<br>                cnt += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(cnt)<br></code></pre></td></tr></table></figure><h4 id="最短路计数">最短路计数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br>mod = <span class="hljs-number">100003</span><br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>graph = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    x, y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> x != y:<br>        graph[x].append(y)<br>        graph[y].append(x)<br>dist, paths = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)] * (n + <span class="hljs-number">1</span>), [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>q = deque()<br>dist[<span class="hljs-number">1</span>], paths[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>, <span class="hljs-number">1</span><br>q.append(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">while</span> q:<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(q)):<br>        v = q.popleft()<br>        <span class="hljs-keyword">for</span> vi <span class="hljs-keyword">in</span> graph[v]:<br>            <span class="hljs-keyword">if</span> dist[vi] &gt; dist[v]:<br>                paths[vi] = (paths[vi] + paths[v]) % mod<br>                <span class="hljs-keyword">if</span> dist[vi] == <span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>):<br>                    dist[vi] = dist[v] + <span class="hljs-number">1</span><br>                    q.append(vi)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">print</span>(paths[i])<br></code></pre></td></tr></table></figure><h2 id="拓扑排序">拓扑排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdjSet</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n<br>        self.in_degree = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><br>        self.<span class="hljs-built_in">set</span> = [<span class="hljs-built_in">set</span>() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># default 0 and 1 to n vertex</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, item</span>):<br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">set</span>[item]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_edge</span>(<span class="hljs-params">self, u, v</span>):<br>        <span class="hljs-keyword">if</span> v <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self[u]:<br>            self[u].add(v)<br>            self.in_degree[v] += <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">topsort</span>(<span class="hljs-params">self</span>):<br>        n = self.n<br>        in_degree = self.in_degree<br><br>        visited = [<span class="hljs-literal">False</span>] * (n + <span class="hljs-number">1</span>)<br>        res = []<br>        q = deque()<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">v</span>):<br>            <span class="hljs-keyword">if</span> in_degree[v] == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">if</span> visited[v]:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>                     <span class="hljs-comment"># exist cycle</span><br><br>                visited[v] = <span class="hljs-literal">True</span><br>                q.append(v)<br>                res.append(v)<br><br>        <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            push(u)<br><br>        <span class="hljs-keyword">while</span> q:<br>            u = q.popleft()<br><br>            <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> self[u]:<br>                in_degree[v] -= <span class="hljs-number">1</span><br><br>                <span class="hljs-keyword">if</span> push(v):<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(res) == n:                           <span class="hljs-comment"># graph connected</span><br>            <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><h2 id="最短路径">最短路径</h2><p><img src="https://cdn.acwing.com/media/article/image/2019/12/13/1833_db6dffa81d-37ff39642fd8f74476ddcd99944d1b4.png" alt=""></p><p><img src="https://s2.loli.net/2022/03/06/Dy4eP5hfGHl7k3d.png" alt="image-20220306213253357"></p><h3 id="Floyd">Floyd</h3><p>多源 有负权边 无负权环</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>graph = [[<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)] * (n + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    graph[i][i] = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    x, y, z = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    graph[x][y] = <span class="hljs-built_in">min</span>(graph[x][y], z)<br><span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            graph[i][j] = <span class="hljs-built_in">min</span>(graph[i][j], graph[i][v] + graph[v][j])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>    x, y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    d = graph[x][y]<br>    <span class="hljs-keyword">if</span> d == <span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;impossible&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(d)<br></code></pre></td></tr></table></figure><h3 id="Dijkstra">Dijkstra</h3><p>单源 无负权边</p><p>收集距离源点最近点的过程</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdjList</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n<br>        self.<span class="hljs-built_in">list</span> = [&#123;&#125; <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># default 0 and 1 to n vertex</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, item</span>):<br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">list</span>[item]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_edge</span>(<span class="hljs-params">self, u, v, w</span>):<br>        adj = self[u]<br><br>        adj[v] = <span class="hljs-built_in">min</span>(adj[v], w) <span class="hljs-keyword">if</span> v <span class="hljs-keyword">in</span> adj <span class="hljs-keyword">else</span> w<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>(<span class="hljs-params">self, a, b</span>):<br>        n = self.n<br>        dist = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (n + <span class="hljs-number">1</span>)<br><br>        tree = <span class="hljs-built_in">set</span>()<br>        q = []<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">d_min, v</span>):<br>            <span class="hljs-keyword">if</span> dist[v] &gt; d_min:<br>                dist[v] = d_min<br>                heappush(q, (d_min, v))<br><br>        push(<span class="hljs-number">0</span>, a)<br><br>        <span class="hljs-keyword">while</span> q:<br>            d, v = heappop(q)<br><br>            <span class="hljs-keyword">if</span> v == b:<br>                <span class="hljs-keyword">return</span> d<br><br>            <span class="hljs-keyword">if</span> v <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> tree:<br>                tree.add(v)<br><br>                <span class="hljs-keyword">for</span> u, w <span class="hljs-keyword">in</span> self[v].items():<br>                    d_min = d + w<br>                    push(d_min, u)<br><br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="Bellman-Ford">Bellman-Ford</h3><p>有边数限制的最短路</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>edges, dist = &#123;&#125;, [<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    x, y, z = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> (x, y) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> edges:<br>        edges[(x, y)] = z<br>    <span class="hljs-keyword">else</span>:<br>        edges[(x, y)] = <span class="hljs-built_in">min</span>(edges[(x, y)], z)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dp</span>(<span class="hljs-params">n, m, k</span>):<br>    dist[n] = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>        last_dist = dist.copy()<br>        <span class="hljs-keyword">for</span> V, w <span class="hljs-keyword">in</span> edges.items():<br>            v1, v2 = V<br>            dist[v2] = <span class="hljs-built_in">min</span>(dist[v2], last_dist[v1] + w)<br>    <span class="hljs-keyword">return</span> dist[m]<br>d = dp(<span class="hljs-number">1</span>, n, k)<br><span class="hljs-keyword">if</span> d == <span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;impossible&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(d)<br></code></pre></td></tr></table></figure><h3 id="SPFA">SPFA</h3><p>单源 有负权边 有负权环</p><h4 id="最短路">最短路</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">spfa</span>(<span class="hljs-params">n, graph, a, b</span>):<br>    <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br>    dist, q, not_in_q = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)] * (n + <span class="hljs-number">1</span>), deque(), [<span class="hljs-literal">True</span>] * (n + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">v</span>):<br>        q.append(v)<br>        not_in_q[v] = <span class="hljs-literal">False</span><br>    dist[a] = <span class="hljs-number">0</span><br>    push(a)<br>    <span class="hljs-keyword">while</span> q:<br>        v = q.popleft()<br>        not_in_q[v] = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">for</span> vi, wi <span class="hljs-keyword">in</span> graph[v].items():<br>            <span class="hljs-keyword">if</span> dist[vi] &gt; dist[v] + wi:<br>                dist[vi] = dist[v] + wi<br>                push(vi)<br>    <span class="hljs-keyword">return</span> dist[b]<br></code></pre></td></tr></table></figure><h4 id="判断负环">判断负环</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>graph = [&#123;i: <span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>)&#125;] + [&#123;&#125; <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    x, y, z = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> y <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> graph[x]:<br>        graph[x][y] = z<br>    <span class="hljs-keyword">else</span>:<br>        graph[x][y] = <span class="hljs-built_in">min</span>(graph[x][y], z)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">spfa</span>():<br>    dist, q, not_in_q = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)] * (n + <span class="hljs-number">1</span>), deque(), [<span class="hljs-literal">True</span>] * (n + <span class="hljs-number">1</span>)<br>    cnt = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">v</span>):<br>        q.append(v)<br>        not_in_q[v] = <span class="hljs-literal">False</span><br>        cnt[v] += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> cnt[v] &gt; n + <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    dist[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>    push(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">while</span> q:<br>        v = q.popleft()<br>        not_in_q[v] = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">for</span> vi, wi <span class="hljs-keyword">in</span> graph[v].items():<br>            <span class="hljs-keyword">if</span> dist[vi] &gt; dist[v] + wi:<br>                dist[vi] = dist[v] + wi<br>                <span class="hljs-keyword">if</span> push(vi):<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Yes&quot;</span> <span class="hljs-keyword">if</span> spfa() <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;No&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="最小生成树">最小生成树</h2><h3 id="prim">prim</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdjMatrix</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n                                  <span class="hljs-comment"># default 0 and 1 to n vertex</span><br>        self.matrix = [[<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (n + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            self[i][i] = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, item</span>):<br>        <span class="hljs-keyword">return</span> self.matrix[item]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">floyd</span>(<span class="hljs-params">self</span>):<br>        n = self.n<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>                    self[j][k] = <span class="hljs-built_in">min</span>(self[j][k], self[j][i] + self[i][k])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">prim</span>(<span class="hljs-params">self</span>):<br>        n = self.n<br>        cnt = <span class="hljs-number">0</span><br><br>        dist = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (n + <span class="hljs-number">1</span>)<br>        mst = <span class="hljs-built_in">set</span>()<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">u</span>):<br>            mst.add(u)<br>            dist[u] = <span class="hljs-number">0</span><br><br>            <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>                dist[v] = <span class="hljs-built_in">min</span>(dist[v], self[u][v])<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">next</span>():<br>            u = <span class="hljs-number">0</span><br><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">if</span> i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> mst:<br>                    <span class="hljs-keyword">if</span> dist[i] &lt; dist[u]:<br>                        u = i<br><br>            <span class="hljs-keyword">return</span> u<br><br>        update(<span class="hljs-number">1</span>)<br><br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>            u = <span class="hljs-built_in">next</span>()<br><br>            <span class="hljs-keyword">if</span> u == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">return</span><br><br>            cnt += dist[u]<br>            update(u)<br><br>        <span class="hljs-keyword">return</span> cnt<br></code></pre></td></tr></table></figure><h3 id="kruskal">kruskal</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EdgeSet</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n<br>        self.edges = &#123;&#125;<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, u, v, w</span>):<br>        <span class="hljs-keyword">if</span> u == v:<br>            <span class="hljs-keyword">return</span><br><br>        <span class="hljs-keyword">if</span> u &gt; v:<br>            u, v = v, u<br><br>        pair = (u, v)<br>        self.edges[pair] = <span class="hljs-built_in">min</span>(self.edges[pair], w) <span class="hljs-keyword">if</span> pair <span class="hljs-keyword">in</span> self.edges <span class="hljs-keyword">else</span> w<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sort</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sorted</span>([(w, pair) <span class="hljs-keyword">for</span> pair, w <span class="hljs-keyword">in</span> edges.edges.items()])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">kruskal</span>(<span class="hljs-params">self</span>):<br>        n = self.n<br>        <br>        cnt = <span class="hljs-number">0</span><br>        ufs = UFS(n)<br><br>        <span class="hljs-keyword">for</span> w, pair <span class="hljs-keyword">in</span> self.sort():<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ufs.is_connected(*pair):<br>                ufs.union(*pair)<br>                <br>                cnt += w<br><br>        <span class="hljs-keyword">if</span> ufs.get_size(<span class="hljs-number">1</span>) &lt; n:<br>            <span class="hljs-keyword">return</span><br><br>        <span class="hljs-keyword">return</span> cnt<br></code></pre></td></tr></table></figure><h2 id="最短Hamilton路径">最短Hamilton路径</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>ST = <span class="hljs-number">1</span> &lt;&lt; n<br>graph = [[<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>dp = [[<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)] * n <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(ST)]    <span class="hljs-comment"># 从0经过i集合到j点最短距离</span><br>dp[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> st <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(ST):<br>    in_st = <span class="hljs-keyword">lambda</span> v: st &gt;&gt; v &amp; <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> in_st(<span class="hljs-number">0</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">if</span> in_st(i):<br>                <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>                    <span class="hljs-keyword">if</span> in_st(j):<br>                        dp[st][i] = <span class="hljs-built_in">min</span>(dp[st][i],<br>                                        dp[st - (<span class="hljs-number">1</span> &lt;&lt; i)][j] + graph[j][i])<br><span class="hljs-built_in">print</span>(dp[ST - <span class="hljs-number">1</span>][n - <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h1>计算几何</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">lines = <span class="hljs-built_in">set</span>()<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        <span class="hljs-keyword">for</span> yi <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(y + <span class="hljs-number">1</span>, n):<br>            <span class="hljs-keyword">for</span> xi <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>                <span class="hljs-keyword">if</span> x != xi:<br>                    k = (y - yi) / (x - xi)<br>                    b = y - k * x<br>                    lines.add((<span class="hljs-built_in">round</span>(k, <span class="hljs-number">8</span>), <span class="hljs-built_in">round</span>(b, <span class="hljs-number">8</span>)))<br><span class="hljs-built_in">print</span>(n + m + <span class="hljs-built_in">len</span>(lines))<br></code></pre></td></tr></table></figure><h2 id="平面几何">平面几何</h2><h3 id="偏差量">偏差量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">eps = <span class="hljs-number">1e-8</span><br></code></pre></td></tr></table></figure><h3 id="等于0">等于0</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">zero</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x &gt;= eps:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> x &lt;= -eps:<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="相等">相等</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">eq</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">abs</span>(x - y) &lt; eps:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> x &gt; y:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="平面划分">平面划分</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">eps = <span class="hljs-number">1e-8</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">eq</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">abs</span>(x - y) &lt; eps:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> x &gt; y:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>lines = &#123;<span class="hljs-built_in">tuple</span>(<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)&#125;<br>track, cnt = [lines.pop()], <span class="hljs-number">2</span><br><span class="hljs-keyword">for</span> a1, b1 <span class="hljs-keyword">in</span> lines:<br>    cnt += <span class="hljs-number">1</span><br>    points = <span class="hljs-built_in">set</span>()<br>    <span class="hljs-keyword">for</span> a2, b2 <span class="hljs-keyword">in</span> track:<br>        <span class="hljs-keyword">if</span> eq(a1, a2):<br>            p = (-(b1 - b2) / (a1 - a2), (a1 * b2 - a2 * b1) / (a1 - a2))<br>            <span class="hljs-keyword">if</span> p <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> points:<br>                cnt += <span class="hljs-number">1</span><br>                points.add(p)<br>    track.append((a1, b1))<br><span class="hljs-built_in">print</span>(cnt)<br></code></pre></td></tr></table></figure><h2 id="点叉积">点叉积</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">dot = <span class="hljs-keyword">lambda</span> a, b: <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> i: a[i] * b[i], <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(a))))<br>size = <span class="hljs-keyword">lambda</span> a: dot(a, a) ** <span class="hljs-number">0.5</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">cross</span>(<span class="hljs-params">a, b</span>):<br>    x1, y1 = a<br>    x2, y2 = b<br>    <span class="hljs-keyword">return</span> x1 * y2 - x2 * y1<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">solution</span>():<br>    x0, y0 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    x1, y1 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    a, b = (x1 - x0, y1 - y0), (x2 - x0, y2 - y0)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>(cross(a, b)) / <span class="hljs-number">2</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">format</span>(solution(), <span class="hljs-string">&quot;.2f&quot;</span>))<br></code></pre></td></tr></table></figure><h3 id="点和直线的位置关系"><strong>点和直线的位置关系</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())):<br>    x1, y1 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    x, y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    ab = (x2 - x1, y2 - y1)<br>    p = (x - x1, y - y1)<br>    d = zero(cross(p, ab))<br>    <span class="hljs-keyword">if</span> d == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;IN&quot;</span>)<br>    <span class="hljs-keyword">elif</span> d &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;R&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;L&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="点和线段关系">点和线段关系</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())):<br>    x1, y1 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    x, y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    ab = (x2 - x1, y2 - y1)<br>    p = (x - x1, y - y1)<br>    d, product = zero(cross(p, ab)), zero(dot(p, ab))<br>    <span class="hljs-keyword">if</span> d == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> product &gt;= <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Yes&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;No&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="点到直线的距离"><strong>点到直线的距离</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">height</span>(<span class="hljs-params">a, b, p</span>):<br>    x1, y1 = a<br>    x2, y2 = b<br>    x, y = p<br>    v = (x - x1, y - y1)<br>    ab = (x2 - x1, y2 - y1)<br>    s = <span class="hljs-built_in">abs</span>(cross(v, ab))<br>    <span class="hljs-keyword">return</span> s / size(ab)<br></code></pre></td></tr></table></figure><h3 id="点关于直线的对称点"><strong>点关于直线的对称点</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">plus</span>(<span class="hljs-params">a, b</span>):<br>    x1, y1 = a<br>    x2, y2 = b<br>    <span class="hljs-keyword">return</span> (x1 + x2, y1 + y2)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">minus</span>(<span class="hljs-params">a, b</span>):<br>    x1, y1 = a<br>    x2, y2 = b<br>    <span class="hljs-keyword">return</span> (x1 - x2, y1 - y2)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">K</span>(<span class="hljs-params">p, k</span>):<br>    x, y = p<br>    <span class="hljs-keyword">return</span> (k * x, k * y)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dot</span>(<span class="hljs-params">a, b</span>):<br>    x1, y1 = a<br>    x2, y2 = b<br>    <span class="hljs-keyword">return</span> x1 * x2 + y1 * y2<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">projection</span>(<span class="hljs-params">a, b, p</span>):<br>    v = minus(b, a)<br>    l = minus(p, a)<br>    k = dot(v, l) / dot(v, v)<br>    <span class="hljs-keyword">return</span> plus(a, K(v, k))<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">symmetry</span>(<span class="hljs-params">a, b, p</span>):<br>    <span class="hljs-keyword">return</span> minus(K(projection(a, b, p), <span class="hljs-number">2</span>), p)<br><span class="hljs-built_in">print</span>(symmetry((<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">3</span>)))<br></code></pre></td></tr></table></figure><h3 id="两条直线的位置关系"><strong>两条直线的位置关系</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">relation</span>(<span class="hljs-params">a, b, c, d</span>):<br>    v1 = minus(b, a)<br>    v2 = minus(d, c)<br>    <span class="hljs-keyword">if</span> zero(cross(v1, v2)) == <span class="hljs-number">0</span>:<br>        v = minus(c, a)<br>        <span class="hljs-keyword">if</span> zero(cross(v1, v)) == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;重合&quot;</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;平行&quot;</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;相交&quot;</span><br></code></pre></td></tr></table></figure><h2 id="扫描线（无离散化）">扫描线（无离散化）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python">length = <span class="hljs-number">10001</span><br>L = length &lt;&lt; <span class="hljs-number">2</span> | <span class="hljs-number">1</span><br>left, right, cnt, s = [<span class="hljs-number">0</span>] * L, [<span class="hljs-number">0</span>] * L, [<span class="hljs-number">0</span>] * L, [<span class="hljs-number">0</span>] * L<br>ls, rs = <span class="hljs-keyword">lambda</span> k: k &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-keyword">lambda</span> k: k &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span><br>m = <span class="hljs-keyword">lambda</span> k: left[k] + right[k] &gt;&gt; <span class="hljs-number">1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">k, l, r</span>):<br>    left[k], right[k] = l, r<br>    <span class="hljs-keyword">if</span> l &lt; r:<br>        build(ls(k), l, m(k))<br>        build(rs(k), m(k) + <span class="hljs-number">1</span>, r)<br>build(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, length)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">k, l, r, x</span>):<br>    <span class="hljs-keyword">if</span> l &lt;= left[k] <span class="hljs-keyword">and</span> right[k] &lt;= r:<br>        cnt[k] += x<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">if</span> l &lt;= m(k):<br>            modify(ls(k), l, r, x)<br>        <span class="hljs-keyword">if</span> m(k) &lt; r:<br>            modify(rs(k), l, r, x)<br>    <span class="hljs-keyword">if</span> cnt[k] &gt; <span class="hljs-number">0</span>:<br>        s[k] = right[k] - left[k] + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">elif</span> left[k] == right[k]:<br>        s[k] = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">else</span>:<br>        s[k] = s[ls(k)] + s[rs(k)]<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>lines = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    x1, y1, x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    lines.append((x1, y1, y2, <span class="hljs-number">1</span>))<br>    lines.append((x2, y1, y2, -<span class="hljs-number">1</span>))<br>lines.sort()<br>result = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n &lt;&lt; <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> i:<br>        result += (lines[i][<span class="hljs-number">0</span>] - lines[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>]) * s[<span class="hljs-number">1</span>]<br>    modify(<span class="hljs-number">1</span>, lines[i][<span class="hljs-number">1</span>] + <span class="hljs-number">1</span>, lines[i][<span class="hljs-number">2</span>], lines[i][<span class="hljs-number">3</span>])<br><span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure><h1>位运算</h1><h2 id="右移左移">右移左移</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">13</span> &gt;&gt; <span class="hljs-number">1</span><br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">6</span><br><span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">3</span><br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">8</span><br><br></code></pre></td></tr></table></figure><h2 id="取位">取位</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-number">13</span>    <span class="hljs-comment"># 1101</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>):<br>    <span class="hljs-built_in">print</span>((n &gt;&gt; i) &amp; <span class="hljs-number">1</span>)<br>    <br><span class="hljs-number">1</span><br><span class="hljs-number">0</span><br><span class="hljs-number">1</span><br><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="置1">置1</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">setbit</span>(<span class="hljs-params">x, k</span>):<span class="hljs-comment"># 从第0位计数</span><br>    n = <span class="hljs-number">1</span> &lt;&lt; k<br>    <span class="hljs-keyword">return</span> x | n<br>setbit(<span class="hljs-number">8</span>, <span class="hljs-number">1</span>)<br>Out[<span class="hljs-number">2</span>]: <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h2 id="异或">异或</h2><p>逐位异真，同假</p><p>不进位加法</p><p>遇0不变，遇1反转</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-number">10010</span> <span class="hljs-comment"># 18</span><br>b = <span class="hljs-number">11100</span> <span class="hljs-comment"># </span><br>a = <span class="hljs-number">18</span> <span class="hljs-comment"># 10010</span><br>b = <span class="hljs-number">28</span> <span class="hljs-comment"># 11100</span><br>c = a ^ b<br>c<span class="hljs-comment"># 01110</span><br>Out[<span class="hljs-number">10</span>]: <span class="hljs-number">14</span><br><span class="hljs-literal">True</span> ^ <span class="hljs-literal">True</span><br>Out[<span class="hljs-number">12</span>]: <span class="hljs-literal">False</span><br><span class="hljs-literal">True</span> ^ <span class="hljs-literal">False</span><br>Out[<span class="hljs-number">13</span>]: <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><h3 id="只出现一次的数字">只出现一次的数字</h3><p>数组除了某个元素只出现一次以外，其余每个元素均出现两次。找出那个只出现了一次的元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">singleNumber</span>(<span class="hljs-params">nums</span>):<br>    ans = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> nums:<br>        ans ^= i<br><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><h2 id="lowbit">lowbit</h2><p>函数的值是x的二进制表达式中最低位的1所对应的值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">lowbit = <span class="hljs-keyword">lambda</span> x: x &amp; (-x)<br>lowbit(<span class="hljs-number">8</span>)<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">8</span><br>lowbit(<span class="hljs-number">9</span>)<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h1>数据结构</h1><h2 id="串">串</h2><h3 id="基本操作">基本操作</h3><h4 id="find">find</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">s.find(sub, start=<span class="hljs-number">0</span>, end=<span class="hljs-built_in">len</span>(s))<br></code></pre></td></tr></table></figure><p>s.find(sub, start=0, end=len(s))</p><p>matching index range: [start, end)</p><p>return the first index of the first match, or -1 if no match</p><h4 id="count">count</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">s.count(sub, start=<span class="hljs-number">0</span>, end=<span class="hljs-built_in">len</span>(s))<br></code></pre></td></tr></table></figure><p>count the number of the whole, independent matches</p><h3 id="前后缀函数">前后缀函数</h3><h4 id="最大公共真前后缀">最大公共真前后缀</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">max_fix</span>(<span class="hljs-params">s</span>):<br>    max_same = [<span class="hljs-number">0</span>] * <span class="hljs-built_in">len</span>(s)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(s)):<br>        j = i - <span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">while</span> j &gt;= <span class="hljs-number">0</span>:<br>            pi = max_same[j]<br><br>            <span class="hljs-keyword">if</span> s[i] == s[pi]:<br>                max_same[i] = pi + <span class="hljs-number">1</span><br>                <span class="hljs-keyword">break</span><br><br>            j = pi - <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">return</span> max_same<br></code></pre></td></tr></table></figure><h4 id="最小公共真前后缀">最小公共真前后缀</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">min_fix</span>(<span class="hljs-params">s</span>):<br>    min_same = max_fix(s)<br>    <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(s)):<br>        j = i   <span class="hljs-comment"># initial j as i &gt; 0</span><br><br>        <span class="hljs-keyword">while</span> pi := min_same[j]:    <span class="hljs-comment"># ensure j and pi &gt; 0</span><br>            min_same[i] = pi<br>            j = pi - <span class="hljs-number">1</span>  <span class="hljs-comment"># worst j is 0</span><br><br>    <span class="hljs-keyword">return</span> min_same<br></code></pre></td></tr></table></figure><h4 id="kmp">kmp</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">kmp</span>(<span class="hljs-params">s, p</span>):<br>    new = p + <span class="hljs-string">&#x27;#&#x27;</span> + s<br>    max_same = max_fix(new)<br>    s, p = <span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">len</span>(p)<br><br>    <span class="hljs-keyword">return</span> [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(s - p + <span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> max_same[i + <span class="hljs-number">2</span> * p] == p]<br></code></pre></td></tr></table></figure><h2 id="单调栈">单调栈</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">largestRectangleArea</span>(<span class="hljs-params">heights</span>):<br>    n = <span class="hljs-built_in">len</span>(heights)<br>    heights = [-<span class="hljs-number">2</span>] + heights + [-<span class="hljs-number">1</span>]<br>    stack = [(-<span class="hljs-number">2</span>, <span class="hljs-number">0</span>)]<br>    left, right = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">2</span>), [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">2</span>)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">h, p</span>):<br>        top_h, top_p = stack[-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">while</span> top_h &gt;= h:<br>            <span class="hljs-keyword">if</span> top_h &gt; h:<br>                right[top_p] = p<br>            stack.pop()<br>            top_h, top_p = stack[-<span class="hljs-number">1</span>]<br>        left[p] = top_p<br>        stack.append((h, p))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">2</span>):<br>        push(heights[i], i)<br>    m = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        m = <span class="hljs-built_in">max</span>(m, heights[i] * (right[i] - left[i] - <span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">return</span> m<br></code></pre></td></tr></table></figure><h2 id="单调队列">单调队列</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MonotonicQueue</span>:<br>    <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, <span class="hljs-built_in">type</span>, sub=[]</span>):<br>        self.<span class="hljs-built_in">type</span> = <span class="hljs-built_in">type</span> == <span class="hljs-string">&#x27;decrease&#x27;</span><br><br>        self.queue = self.deque()<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> sub:<br>            self.push(i)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">head</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.queue[<span class="hljs-number">0</span>]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_monotonic</span>(<span class="hljs-params">self, x</span>):<br>        tail = self.queue[-<span class="hljs-number">1</span>]<br><br>        <span class="hljs-keyword">return</span> tail &gt;= x <span class="hljs-keyword">if</span> self.<span class="hljs-built_in">type</span> <span class="hljs-keyword">else</span> tail &lt;= x<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-keyword">while</span> self.queue <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> self.is_monotonic(x):<br>            self.queue.pop()<br><br>        self.queue.append(x)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self, value</span>):<br>        <span class="hljs-keyword">if</span> self.head() == value:<br>            self.queue.popleft()<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maxSlidingWindow</span>(<span class="hljs-params">self, nums, k</span>):<br>        maxs = []<br><br>        decrease_queue = MonotonicQueue(<span class="hljs-string">&#x27;decrease&#x27;</span>, nums[: k])<br>        maxs.append(decrease_queue.head())<br><br>        <span class="hljs-keyword">for</span> old_left <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums) - k):<br>            new_right = old_left + k<br>            <br>            old_left = nums[old_left]<br>            new_right = nums[new_right]<br><br>            decrease_queue.pop(old_left)<br>            decrease_queue.push(new_right)<br><br>            maxs.append(decrease_queue.head())<br>        <br>        <span class="hljs-keyword">return</span> maxs<br></code></pre></td></tr></table></figure><h2 id="并查集">并查集</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UFS</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n<br>        self.f = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>))<br><br>        self.size = [<span class="hljs-number">1</span>] * (n + <span class="hljs-number">1</span>)<br>        self.dist = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_root</span>(<span class="hljs-params">self, a</span>):<br>        <span class="hljs-keyword">return</span> a == self.f[a]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_connected</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> self.find(a) == self.find(b)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">self, a</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.is_root(a):<br>            f = self.f[a]<br>            self.f[a] = self.find(f)<br><br>            <span class="hljs-keyword">pass</span>                                <span class="hljs-comment"># update dist</span><br><br>        <span class="hljs-keyword">return</span> self.f[a]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">union</span>(<span class="hljs-params">self, a, b</span>):                      <span class="hljs-comment"># a branch, b root</span><br>        root_a, root_b = self.find(a), self.find(b)<br><br>        <span class="hljs-keyword">if</span> root_a != root_b:<br>            self.f[root_a] = root_b<br><br>            <span class="hljs-keyword">pass</span>                                <span class="hljs-comment"># update dist</span><br>            self.size[root_b] += self.size[root_a]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_roots</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, self.n + <span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> self.is_root(i)]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_size</span>(<span class="hljs-params">self, a</span>):<br>        root = self.find(a)<br>        <span class="hljs-keyword">return</span> self.size[root]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">calc_dist</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.is_connected(a, b):<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">return</span> self.dist[a] - self.dist[b]<br></code></pre></td></tr></table></figure><h2 id="前缀和">前缀和</h2><h3 id="静态">静态</h3><h4 id="1维">1维</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>l = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>s = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    s[i] = s[i - <span class="hljs-number">1</span>] + l[i]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>():<br>    l, r = [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    <span class="hljs-keyword">return</span> s[r] - s[l - <span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    <span class="hljs-built_in">print</span>(query())<br></code></pre></td></tr></table></figure><h4 id="2维">2维</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PrefixArea</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, matrix</span>):                 <span class="hljs-comment"># matrix extend 0</span><br>        n = <span class="hljs-built_in">len</span>(matrix)<br>        m = <span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])<br><br>        self.area = [[<span class="hljs-number">0</span>] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m):<br>                self.area[i][j] = matrix[i][j] + self.two_area(i - <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span>, i, j)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">two_area</span>(<span class="hljs-params">self, x1, y1, x2, y2</span>):         <span class="hljs-comment"># x1 &lt;= x2, y1 &lt;= y2</span><br>        <span class="hljs-keyword">return</span> self.area[x1][y2] + self.area[x2][y1] - self.area[x1][y1]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, x1, y1, x2, y2</span>):<br>        <span class="hljs-keyword">return</span> self.area[x2][y2] - self.two_area(x1 - <span class="hljs-number">1</span>, y1 - <span class="hljs-number">1</span>, x2, y2)<br></code></pre></td></tr></table></figure><h3 id="树状数组">树状数组</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">n, times = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>lowbit = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x &amp; (-x), <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)))<br>l = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>s = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">k, x</span>):<br>    l[k] += x<br>    pos = k<br>    <span class="hljs-keyword">while</span> pos &lt; n + <span class="hljs-number">1</span>:<br>        s[pos] += x<br>        pos += lowbit[pos]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">k</span>):<br>    result = <span class="hljs-number">0</span><br>    pos = k<br>    <span class="hljs-keyword">while</span> pos:<br>        result += s[pos]<br>        pos -= lowbit[pos]<br>    <span class="hljs-keyword">return</span> result<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    add(i, l[i])<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(times):<br>    k, a, b = [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    <span class="hljs-keyword">if</span> k:<br>        add(a, b)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(query(b) - query(a - <span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><h2 id="差分">差分</h2><h3 id="1维-2">1维</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>l = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()] + [<span class="hljs-number">0</span>]<br>delt = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">2</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    delt[i] = l[i] - l[i - <span class="hljs-number">1</span>]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">l, r, x</span>):<br>    delt[l] += x<br>    delt[r + <span class="hljs-number">1</span>] -= x<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    a, b, c = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    modify(a, b, c)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    l[i] = l[i - <span class="hljs-number">1</span>] + delt[i]<br>    <span class="hljs-built_in">print</span>(l[i], end = <span class="hljs-string">&quot; &quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="2维-2">2维</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m, q = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>delt = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">2</span>)]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">x1, y1, x2, y2, c</span>):<br>    delt[x1][y1] += c<br>    delt[x2 + <span class="hljs-number">1</span>][y2 + <span class="hljs-number">1</span>] += c<br>    delt[x2 + <span class="hljs-number">1</span>][y1] -= c<br>    delt[x1][y2 + <span class="hljs-number">1</span>] -= c<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    data = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        modify(i, j, i, j, <span class="hljs-built_in">next</span>(data))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    a, b, c, d, e = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    modify(a, b, c, d, e)<br>matrix = [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">2</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        matrix[i][j] = delt[i][j] - matrix[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + \<br>                       matrix[i][j - <span class="hljs-number">1</span>] + matrix[i - <span class="hljs-number">1</span>][j]<br>        <span class="hljs-built_in">print</span>(matrix[i][j], end = <span class="hljs-string">&quot; &quot;</span>)<br>    <span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><h2 id="st表">st表</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> log2<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">n, l</span>):<br>    bottom = <span class="hljs-built_in">int</span>(log2(n))<br>    st = [l] + [[<span class="hljs-number">0</span>] * n <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(bottom)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, bottom + <span class="hljs-number">1</span>):<br>        j = <span class="hljs-number">0</span><br>        tail = j + (<span class="hljs-number">1</span> &lt;&lt; i) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> tail &lt;= n - <span class="hljs-number">1</span>:<br>            interval = <span class="hljs-number">1</span> &lt;&lt; (i - <span class="hljs-number">1</span>)<br>            st[i][j] = <span class="hljs-built_in">max</span>(st[i - <span class="hljs-number">1</span>][j], st[i - <span class="hljs-number">1</span>][j + interval])<br>            j += <span class="hljs-number">1</span><br>            tail = j + (<span class="hljs-number">1</span> &lt;&lt; i) - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> st<br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>st_table = process(n, [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()])<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">l, r</span>):<br>    k = <span class="hljs-built_in">int</span>(log2(r - l + <span class="hljs-number">1</span>))<br>    interval = (<span class="hljs-number">1</span> &lt;&lt; k) - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(st_table[k][l], st_table[k][r - interval])<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    a, b = [<span class="hljs-built_in">int</span>(x) - <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    <span class="hljs-built_in">print</span>(query(a, b))<br></code></pre></td></tr></table></figure><h2 id="平衡树">平衡树</h2><h3 id="线段树">线段树</h3><p>记录n个元素，线段树空间开到4*n</p><h4 id="单点修改">单点修改</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python">length, times = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>L = length &lt;&lt; <span class="hljs-number">2</span> | <span class="hljs-number">1</span><br>left, right, s = [<span class="hljs-number">0</span>] * L, [<span class="hljs-number">0</span>] * L, [<span class="hljs-number">0</span>] * L<br>data = [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">k</span>):<br>    s[k] = <span class="hljs-built_in">max</span>(s[k &lt;&lt; <span class="hljs-number">1</span>], s[(k &lt;&lt; <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>])<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">k, l, r</span>):<br>    left[k], right[k] = l, r<br>    <span class="hljs-keyword">if</span> l == r:<br>        s[k] = data[l - <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">else</span>:<br>        m = l + r &gt;&gt; <span class="hljs-number">1</span><br>        build(k &lt;&lt; <span class="hljs-number">1</span>, l, m)<br>        build((k &lt;&lt; <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>, r)<br>        push(k)<br>build(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, length)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">k, l, r</span>):<br>    <span class="hljs-keyword">if</span> l &lt;= left[k] <span class="hljs-keyword">and</span> right[k] &lt;= r:<br>        <span class="hljs-keyword">return</span> s[k]<br>    m = left[k] + right[k] &gt;&gt; <span class="hljs-number">1</span><br>    result = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> l &lt;= m:<br>        result = query(k &lt;&lt; <span class="hljs-number">1</span>, l, r)<br>    <span class="hljs-keyword">if</span> m &lt; r:<br>        result = <span class="hljs-built_in">max</span>(result, query((k &lt;&lt; <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>, l, r))<br>    <span class="hljs-keyword">return</span> result<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">k, n, x</span>):<br>    <span class="hljs-keyword">if</span> left[k] == right[k]:<br>        s[k] = x<br>    <span class="hljs-keyword">else</span>:<br>        m = left[k] + right[k] &gt;&gt; <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> n &lt;= m:<br>            modify(k &lt;&lt; <span class="hljs-number">1</span>, n, x)<br>        <span class="hljs-keyword">else</span>:<br>            modify((k &lt;&lt; <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>, n, x)<br>        push(k)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(times):<br>    k, a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> k:<br>        modify(<span class="hljs-number">1</span>, a, b)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(query(<span class="hljs-number">1</span>, a, b))<br></code></pre></td></tr></table></figure><h4 id="区间修改">区间修改</h4><h5 id="求和-2">求和</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs python">ls = <span class="hljs-keyword">lambda</span> k: <span class="hljs-number">2</span> * k<br>rs = <span class="hljs-keyword">lambda</span> k: <span class="hljs-number">2</span> * k + <span class="hljs-number">1</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SumSegmentTree</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, array</span>):  <span class="hljs-comment"># element index starts from 0</span><br>        self.n = <span class="hljs-built_in">len</span>(array)<br>        size = <span class="hljs-number">4</span> * self.n<br><br>        self.array = [<span class="hljs-number">0</span>] + array<br><br>        self.left, self.right = [<span class="hljs-number">0</span>] * size, [<span class="hljs-number">0</span>] * size<br>        self.value, self.tag = [<span class="hljs-number">0</span>] * size, [<span class="hljs-number">0</span>] * size<br><br>        self.build(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, self.n)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">m</span>(<span class="hljs-params">self, k</span>):<br>        <span class="hljs-keyword">return</span> (self.left[k] + self.right[k]) // <span class="hljs-number">2</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">length</span>(<span class="hljs-params">self, k</span>):<br>        <span class="hljs-keyword">return</span> self.right[k] - self.left[k] + <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, k, delt</span>):<br>        self.tag[k] += delt<br>        self.value[k] += delt * self.length(k)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_up</span>(<span class="hljs-params">self, k</span>):<br>        self.value[k] = self.value[ls(k)] + self.value[rs(k)]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_down</span>(<span class="hljs-params">self, k</span>):<br>        delt = self.tag[k]<br>        self.update(ls(k), delt), self.update(rs(k), delt)<br>        self.tag[k] = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">self, k, l, r</span>):<br>        self.left[k], self.right[k] = l, r<br><br>        <span class="hljs-keyword">if</span> l == r:<br>            self.value[k] = self.array[l]<br>        <span class="hljs-keyword">else</span>:<br>            m = self.m(k)<br><br>            self.build(ls(k), l, m)<br>            self.build(rs(k), m + <span class="hljs-number">1</span>, r)<br>            self.push_up(k)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_modify</span>(<span class="hljs-params">self, k, a, b, delt</span>):<br>        <span class="hljs-keyword">if</span> a &lt;= self.left[k] <span class="hljs-keyword">and</span> self.right[k] &lt;= b:<br>            self.update(k, delt)<br>        <span class="hljs-keyword">else</span>:<br>            self.push_down(k)<br>            m = self.m(k)<br><br>            <span class="hljs-keyword">if</span> a &lt;= m:<br>                self._modify(ls(k), a, b, delt)<br>            <span class="hljs-keyword">if</span> b &gt; m:<br>                self._modify(rs(k), a, b, delt)<br>            self.push_up(k)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_query</span>(<span class="hljs-params">self, k, a, b</span>):<br>        <span class="hljs-keyword">if</span> a &lt;= self.left[k] <span class="hljs-keyword">and</span> self.right[k] &lt;= b:<br>            <span class="hljs-keyword">return</span> self.value[k]<br><br>        self.push_down(k)<br><br>        res = <span class="hljs-number">0</span><br><br>        m = self.m(k)<br>        <span class="hljs-keyword">if</span> a &lt;= m:<br>            res += self._query(ls(k), a, b)<br>        <span class="hljs-keyword">if</span> m &lt; b:<br>            res += self._query(rs(k), a, b)<br><br>        <span class="hljs-keyword">return</span> res<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">self, a, b, delt</span>):<br>        self._modify(<span class="hljs-number">1</span>, a, b, delt)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> self._query(<span class="hljs-number">1</span>, a, b)<br></code></pre></td></tr></table></figure><h6 id="链式">链式</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, left, right</span>):<br>        self.left, self.right = left, right<br>        self.ls, self.rs = <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br><br>        self.value = <span class="hljs-number">0</span><br>        self.tag = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">mid</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> (self.left + self.right) // <span class="hljs-number">2</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">length</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.right - self.left + <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, delt</span>):<br>        self.tag += delt<br>        self.value += delt * self.length()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_up</span>(<span class="hljs-params">self</span>):<br>        self.value = self.ls.value + self.rs.value<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_down</span>(<span class="hljs-params">self</span>):<br>        delt = self.tag<br>        self.ls.update(delt), self.rs.update(delt)<br>        self.tag = <span class="hljs-number">0</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SegmentTree</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, array_in</span>):<br>        n = <span class="hljs-built_in">len</span>(array_in)<br>        array = [<span class="hljs-number">0</span>] + array_in<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">left, right</span>):<br>            node = Node(left, right)<br><br>            <span class="hljs-keyword">if</span> left == right:<br>                node.value = array[left]<br>            <span class="hljs-keyword">else</span>:<br>                m = node.mid()<br><br>                node.ls = build(left, m)<br>                node.rs = build(m + <span class="hljs-number">1</span>, right)<br><br>                node.push_up()<br><br>            <span class="hljs-keyword">return</span> node<br><br>        self.root = build(<span class="hljs-number">1</span>, n)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">self, left, right, delt</span>):<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">node</span>):<br>            <span class="hljs-keyword">if</span> left &lt;= node.left <span class="hljs-keyword">and</span> node.right &lt;= right:<br>                node.update(delt)<br>            <span class="hljs-keyword">else</span>:<br>                node.push_down()<br><br>                m = node.mid()<br><br>                <span class="hljs-keyword">if</span> left &lt;= m:<br>                    dfs(node.ls)<br>                <span class="hljs-keyword">if</span> right &gt; m:<br>                    dfs(node.rs)<br><br>                node.push_up()<br><br>        dfs(self.root)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, left, right</span>):<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">node</span>):<br>            <span class="hljs-keyword">if</span> left &lt;= node.left <span class="hljs-keyword">and</span> node.right &lt;= right:<br>                <span class="hljs-keyword">return</span> node.value<br><br>            node.push_down()<br><br>            res = <span class="hljs-number">0</span><br>            m = node.mid()<br><br>            <span class="hljs-keyword">if</span> left &lt;= m:<br>                res += dfs(node.ls)<br>            <span class="hljs-keyword">if</span> m &lt; right:<br>                res += dfs(node.rs)<br><br>            <span class="hljs-keyword">return</span> res<br><br>        <span class="hljs-keyword">return</span> dfs(self.root)<br></code></pre></td></tr></table></figure><h5 id="最值-2">最值</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs python">ls = <span class="hljs-keyword">lambda</span> k: <span class="hljs-number">2</span> * k<br>rs = <span class="hljs-keyword">lambda</span> k: <span class="hljs-number">2</span> * k + <span class="hljs-number">1</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ValueSegmentTree</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, array</span>):  <span class="hljs-comment"># element index starts from 0</span><br>        self.n = <span class="hljs-built_in">len</span>(array)<br>        size = <span class="hljs-number">4</span> * self.n<br><br>        self.array = [<span class="hljs-number">0</span>] + array<br><br>        self.left, self.right = [<span class="hljs-number">0</span>] * size, [<span class="hljs-number">0</span>] * size<br><br>        self.<span class="hljs-built_in">max</span> = [<span class="hljs-number">0</span>] * size<br>        self.<span class="hljs-built_in">min</span> = [<span class="hljs-number">0</span>] * size<br><br>        self.build(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, self.n)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">m</span>(<span class="hljs-params">self, k</span>):<br>        <span class="hljs-keyword">return</span> (self.left[k] + self.right[k]) // <span class="hljs-number">2</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_up</span>(<span class="hljs-params">self, k</span>):<br>        self.<span class="hljs-built_in">max</span>[k] = <span class="hljs-built_in">max</span>(self.<span class="hljs-built_in">max</span>[ls(k)], self.<span class="hljs-built_in">max</span>[rs(k)])<br>        self.<span class="hljs-built_in">min</span>[k] = <span class="hljs-built_in">min</span>(self.<span class="hljs-built_in">min</span>[ls(k)], self.<span class="hljs-built_in">min</span>[rs(k)])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">self, k, l, r</span>):<br>        self.left[k], self.right[k] = l, r<br><br>        <span class="hljs-keyword">if</span> l == r:<br>            self.<span class="hljs-built_in">max</span>[k] = self.array[l]<br>            self.<span class="hljs-built_in">min</span>[k] = self.array[l]<br>        <span class="hljs-keyword">else</span>:<br>            m = self.m(k)<br><br>            self.build(ls(k), l, m)<br>            self.build(rs(k), m + <span class="hljs-number">1</span>, r)<br>            self.push_up(k)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_query</span>(<span class="hljs-params">self, k, a, b</span>):<br>        <span class="hljs-keyword">if</span> a &lt;= self.left[k] <span class="hljs-keyword">and</span> self.right[k] &lt;= b:<br>            <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">max</span>[k], self.<span class="hljs-built_in">min</span>[k]<br><br>        M, m = <span class="hljs-number">0</span>, <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br><br>        <span class="hljs-keyword">if</span> a &lt;= self.m(k):<br>            _M, _m = self._query(ls(k), a, b)<br>            M = <span class="hljs-built_in">max</span>(M, _M)<br>            m = <span class="hljs-built_in">min</span>(m, _m)<br>        <span class="hljs-keyword">if</span> self.m(k) &lt; b:<br>            _M, _m = self._query(rs(k), a, b)<br>            M = <span class="hljs-built_in">max</span>(M, _M)<br>            m = <span class="hljs-built_in">min</span>(m, _m)<br><br>        <span class="hljs-keyword">return</span> M, m<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> self._query(<span class="hljs-number">1</span>, a, b)<br></code></pre></td></tr></table></figure><h5 id="公约数">公约数</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GCDSegmentTree</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, array</span>):  <span class="hljs-comment"># element index starts from 0</span><br>        <span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> gcd<br><br>        self.gcd = gcd<br><br>        self.n = <span class="hljs-built_in">len</span>(array)<br>        size = <span class="hljs-number">4</span> * self.n<br><br>        self.array = [<span class="hljs-number">0</span>] + array<br><br>        self.left, self.right = [<span class="hljs-number">0</span>] * size, [<span class="hljs-number">0</span>] * size<br>        self.value, self.tag = [<span class="hljs-number">0</span>] * size, [<span class="hljs-number">0</span>] * size<br><br>        self.build(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, self.n)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">m</span>(<span class="hljs-params">self, k</span>):<br>        <span class="hljs-keyword">return</span> (self.left[k] + self.right[k]) // <span class="hljs-number">2</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">length</span>(<span class="hljs-params">self, k</span>):<br>        <span class="hljs-keyword">return</span> self.right[k] - self.left[k] + <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_up</span>(<span class="hljs-params">self, k</span>):<br>        self.value[k] = self.gcd(self.value[ls(k)], self.value[rs(k)])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">self, k, l, r</span>):<br>        self.left[k], self.right[k] = l, r<br><br>        <span class="hljs-keyword">if</span> l == r:<br>            self.value[k] = self.array[l]<br>        <span class="hljs-keyword">else</span>:<br>            m = self.m(k)<br><br>            self.build(ls(k), l, m)<br>            self.build(rs(k), m + <span class="hljs-number">1</span>, r)<br>            self.push_up(k)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_query</span>(<span class="hljs-params">self, k, a, b</span>):<br>        <span class="hljs-keyword">if</span> a &lt;= self.left[k] <span class="hljs-keyword">and</span> self.right[k] &lt;= b:<br>            <span class="hljs-keyword">return</span> self.value[k]<br><br>        res = <span class="hljs-number">0</span><br><br>        m = self.m(k)<br>        <span class="hljs-keyword">if</span> a &lt;= m:<br>            res = self.gcd(res, self._query(ls(k), a, b))<br>        <span class="hljs-keyword">if</span> m &lt; b:<br>            res = self.gcd(res, self._query(rs(k), a, b))<br><br>        <span class="hljs-keyword">return</span> res<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> self._query(<span class="hljs-number">1</span>, a, b)<br></code></pre></td></tr></table></figure><h5 id="区间加，区间乘，查询区间和">区间加，区间乘，查询区间和</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ModCalculation</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, mod=<span class="hljs-number">0</span></span>):<br>        self.mod = mod<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_mod</span>(<span class="hljs-params">self, a</span>):<br>        <span class="hljs-keyword">return</span> a % self.mod <span class="hljs-keyword">if</span> self.mod <span class="hljs-keyword">else</span> a<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> (a + b) % self.mod <span class="hljs-keyword">if</span> self.mod <span class="hljs-keyword">else</span> a + b<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">self, iterable</span>):<br>        s = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> iterable:<br>            s = self.add(s, i)<br>        <span class="hljs-keyword">return</span> s<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">mul</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> (a * b) % self.mod <span class="hljs-keyword">if</span> self.mod <span class="hljs-keyword">else</span> a * b<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">power</span>(<span class="hljs-params">self, a, n</span>):<br>        res = <span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">while</span> n:<br>            res = self.mul(res, a)<br><br>        <span class="hljs-keyword">return</span> res<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">quick_power</span>(<span class="hljs-params">self, a, n</span>):<br>        res = <span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">while</span> n:<br>            <span class="hljs-keyword">if</span> n &amp; <span class="hljs-number">1</span>:<br>                res = self.mul(res, a)<br><br>            a = self.mul(a, a)<br>            n &gt;&gt;= <span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">return</span> res<br><br><br>ring = ModCalculation(<span class="hljs-number">571373</span>)<br><br>ls = <span class="hljs-keyword">lambda</span> k: <span class="hljs-number">2</span> * k<br>rs = <span class="hljs-keyword">lambda</span> k: <span class="hljs-number">2</span> * k + <span class="hljs-number">1</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SegmentTree</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, array</span>):  <span class="hljs-comment"># element index starts from 0</span><br>        self.n = <span class="hljs-built_in">len</span>(array)<br>        self.size = <span class="hljs-number">4</span> * self.n<br><br>        self.array = [<span class="hljs-number">0</span>] + array<br><br>        self.left, self.right = [<span class="hljs-number">0</span>] * self.size, [<span class="hljs-number">0</span>] * self.size<br>        self.value = [<span class="hljs-number">0</span>] * self.size<br><br>        self.add_tag = [<span class="hljs-number">0</span>] * self.size<br>        self.mul_tag = [<span class="hljs-number">1</span>] * self.size<br><br>        self.build(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, self.n)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">m</span>(<span class="hljs-params">self, k</span>):<br>        <span class="hljs-keyword">return</span> (self.left[k] + self.right[k]) // <span class="hljs-number">2</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">length</span>(<span class="hljs-params">self, k</span>):<br>        <span class="hljs-keyword">return</span> self.right[k] - self.left[k] + <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_update</span>(<span class="hljs-params">self, cmd</span>):<br>        self.update = self.update_add <span class="hljs-keyword">if</span> cmd == <span class="hljs-number">2</span> <span class="hljs-keyword">else</span> self.update_mul<br><br>    <span class="hljs-comment"># def update(self, k, delt):</span><br>    <span class="hljs-comment">#     # self.tag[k] += delt</span><br>    <span class="hljs-comment">#     # self.value[k] += delt * self.length(k)</span><br>    <span class="hljs-comment">#     pass</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update_add</span>(<span class="hljs-params">self, k, delt</span>):<br>        self.add_tag[k] = ring.add(self.add_tag[k], delt)<br>        self.value[k] = ring.add(self.value[k], ring.mul(self.length(k), delt))<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update_mul</span>(<span class="hljs-params">self, k, delt</span>):<br>        self.add_tag[k] = ring.mul(self.add_tag[k], delt)<br>        self.mul_tag[k] = ring.mul(self.mul_tag[k], delt)<br>        self.value[k] = ring.mul(self.value[k], delt)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_up</span>(<span class="hljs-params">self, k</span>):<br>        self.value[k] = ring.add(self.value[ls(k)], self.value[rs(k)])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_down</span>(<span class="hljs-params">self, k</span>):<br>        add_delt = self.add_tag[k]<br>        mul_delt = self.mul_tag[k]<br><br>        self.update_mul(ls(k), mul_delt), self.update_mul(rs(k), mul_delt)<br>        self.update_add(ls(k), add_delt), self.update_add(rs(k), add_delt)<br><br>        self.add_tag[k] = <span class="hljs-number">0</span><br>        self.mul_tag[k] = <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">self, k, l, r</span>):<br>        self.left[k], self.right[k] = l, r<br><br>        <span class="hljs-keyword">if</span> l == r:<br>            self.value[k] = self.array[l]<br>        <span class="hljs-keyword">else</span>:<br>            m = self.m(k)<br><br>            self.build(ls(k), l, m)<br>            self.build(rs(k), m + <span class="hljs-number">1</span>, r)<br>            self.push_up(k)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_modify</span>(<span class="hljs-params">self, k, a, b, delt</span>):<br>        <span class="hljs-keyword">if</span> a &lt;= self.left[k] <span class="hljs-keyword">and</span> self.right[k] &lt;= b:<br>            self.update(k, delt)<br>        <span class="hljs-keyword">else</span>:<br>            self.push_down(k)<br>            m = self.m(k)<br><br>            <span class="hljs-keyword">if</span> a &lt;= m:<br>                self._modify(ls(k), a, b, delt)<br>            <span class="hljs-keyword">if</span> b &gt; m:<br>                self._modify(rs(k), a, b, delt)<br>            self.push_up(k)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_query</span>(<span class="hljs-params">self, k, a, b</span>):<br>        res = <span class="hljs-number">0</span><br><br>        <span class="hljs-keyword">if</span> a &lt;= self.left[k] <span class="hljs-keyword">and</span> self.right[k] &lt;= b:<br>            <span class="hljs-keyword">return</span> self.value[k]<br><br>        self.push_down(k)<br>        m = self.m(k)<br><br>        <span class="hljs-keyword">if</span> a &lt;= m:<br>            res = ring.add(res, self._query(ls(k), a, b))<br>        <span class="hljs-keyword">if</span> m &lt; b:<br>            res = ring.add(res, self._query(rs(k), a, b))<br><br>        <span class="hljs-keyword">return</span> res<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">self, a, b, delt</span>):<br>        self._modify(<span class="hljs-number">1</span>, a, b, delt)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> self._query(<span class="hljs-number">1</span>, a, b)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    n, m, _ = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    array = [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br><br>    tree = SegmentTree(array)<br><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        <span class="hljs-built_in">iter</span> = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        cmd, a, b = <span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>), <span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>), <span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>)<br><br>        <span class="hljs-keyword">if</span> cmd == <span class="hljs-number">3</span>:<br>            <span class="hljs-built_in">print</span>(tree.query(a, b))<br>        <span class="hljs-keyword">else</span>:<br>            tree.set_update(cmd)<br>            k = <span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>)<br><br>            tree.modify(a, b, k)<br></code></pre></td></tr></table></figure><h3 id="树堆">树堆</h3><h4 id="单点修改-2">单点修改</h4><h5 id="结构">结构</h5><p>链式结构，每个节点有权值value和随机分配的键值key。满足按权构成二叉搜索树同时按键构成最小堆的树堆存在且唯一，其效率期望符合平衡树</p><p>为了按秩访问节点，根据treap性质为节点增加size属性，同时定义push_up()方法在更新树后更新size属性</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">get_size = <span class="hljs-keyword">lambda</span> p: p.size <span class="hljs-keyword">if</span> p <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">node</span>:<br>    <span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> random<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, value</span>):<br>        self.value = value<br>        self.key = node.random()<br>        self.left, self.right = <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br>        self.size = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_up</span>(<span class="hljs-params">self</span>):<br>        self.size = <span class="hljs-number">1</span> + get_size(self.left) + get_size(self.right)<br></code></pre></td></tr></table></figure><h5 id="基本操作-2">基本操作</h5><p>分裂与合并的组合可以实现大部分树的操作</p><h6 id="按值分裂">按值分裂</h6><p>将一棵treap分裂为一棵全部值小于等于目标值的treap和一棵全部值大于目标值的treap。</p><p>对于非空节点p，当p.value &lt;= x时，p及p的左子树全部值小于等于x，此时将p的右子树分裂为全部值小于等于目标值的l和全部值大于目标值的r，r就是全部值大于x的treap，因为p是treap，所以树堆l根节点的值与键都大于p，将l插在p的右子树后整体依然构成treap。p.value &gt; x时同理。在递归过程中每次更新p的左右子树后更新其size从而保证size值正确</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">split</span>(<span class="hljs-params">p, x</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> p:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">if</span> p.value &lt;= x:<br>        l, r = split(p.right, x)<br>        l, p.right = p, l<br>    <span class="hljs-keyword">else</span>:<br>        l, r = split(p.left, x)<br>        r, p.left = p, r<br>    p.push_up()<br>    <span class="hljs-keyword">return</span> l, r<br></code></pre></td></tr></table></figure><h6 id="合并">合并</h6><p>将非空树堆l，r(max(l) &lt;= min®)合并</p><p>当l.key &lt;= r.key时，将l右子树与r合并，新树堆的值与键都大于l，故将其插入l右子树出l仍为treap，l.key &gt; r.key时同理。在递归过程中每次更新p的左右子树后更新其size从而保证size值正确</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">l, r</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> l <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> r:<br>        <span class="hljs-keyword">return</span> l <span class="hljs-keyword">or</span> r<br>    <span class="hljs-keyword">if</span> l.key &lt;= r.key:<br>        l.right, p = merge(l.right, r), l<br>    <span class="hljs-keyword">else</span>:<br>        r.left, p = merge(l, r.left), r<br>    p.push_up()<br>    <span class="hljs-keyword">return</span> p<br></code></pre></td></tr></table></figure><h5 id="功能架构">功能架构</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">treap</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.root = <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">self, x</span>):<br>        l, r = split(self.root, x - <span class="hljs-number">1</span>)<br>        l = merge(l, node(x))<br>        self.root = merge(l, r)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">self, x</span>):<br>        l, r = split(self.root, x - <span class="hljs-number">1</span>)<br>        l1, r1 = split(r, x)<br>        l1 = merge(l1.left, l1.right)<br>        r = merge(l1, r1)<br>        self.root = merge(l, r)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">rank</span>(<span class="hljs-params">self, x</span>):<br>        l, r = split(self.root, x - <span class="hljs-number">1</span>)<br>        size = get_size(l)<br>        self.root = merge(l, r)<br>        <span class="hljs-keyword">return</span> size + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">value</span>(<span class="hljs-params">self, k</span>):<br>        p = self.root<br>        <span class="hljs-keyword">while</span> p:<br>            rk = get_size(p.left) + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> k &lt; rk:<br>                p = p.left<br>            <span class="hljs-keyword">elif</span> k &gt; rk:<br>                k -= rk<br>                p = p.right<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> p.value<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lower</span>(<span class="hljs-params">self, x</span>):<br>        p, M = self.root, -<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)<br>        <span class="hljs-keyword">while</span> p:<br>            <span class="hljs-keyword">if</span> p.value &lt; x:<br>                M = <span class="hljs-built_in">max</span>(M, p.value)<br>                p = p.right<br>            <span class="hljs-keyword">else</span>:<br>                p = p.left<br>        <span class="hljs-keyword">return</span> M<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">upper</span>(<span class="hljs-params">self, x</span>):<br>        p, m = self.root, <span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)<br>        <span class="hljs-keyword">while</span> p:<br>            <span class="hljs-keyword">if</span> p.value &gt; x:<br>                m = <span class="hljs-built_in">min</span>(m, p.value)<br>                p = p.left<br>            <span class="hljs-keyword">else</span>:<br>                p = p.right<br>        <span class="hljs-keyword">return</span> m<br></code></pre></td></tr></table></figure><h4 id="区间翻转">区间翻转</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> random<br>get_size = <span class="hljs-keyword">lambda</span> p: p.size <span class="hljs-keyword">if</span> p <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">node</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x</span>):<br>        self.value = x<br>        self.key = random()<br>        self.left, self.right = <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br>        self.size = <span class="hljs-number">1</span><br>        self.<span class="hljs-built_in">reversed</span> = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_up</span>(<span class="hljs-params">self</span>):<br>        self.size = <span class="hljs-number">1</span> + get_size(self.left) + get_size(self.right)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_down</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.<span class="hljs-built_in">reversed</span>:<br>            <span class="hljs-keyword">return</span><br>        <span class="hljs-keyword">if</span> self.left:<br>            self.left.<span class="hljs-built_in">reversed</span> ^= <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">if</span> self.right:<br>            self.right.<span class="hljs-built_in">reversed</span> ^= <span class="hljs-literal">True</span><br>        self.<span class="hljs-built_in">reversed</span> = <span class="hljs-literal">False</span><br>        self.left, self.right = self.right, self.left<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">split</span>(<span class="hljs-params">p, k</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> p:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br>    p.push_down()<br>    rk = <span class="hljs-number">1</span> + get_size(p.left)<br>    <span class="hljs-keyword">if</span> rk &lt;= k:<br>        l, r = split(p.right, k - rk)<br>        l, p.right = p, l<br>    <span class="hljs-keyword">else</span>:<br>        l, r = split(p.left, k)<br>        r, p.left = p, r<br>    p.push_up()<br>    <span class="hljs-keyword">return</span> l, r<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">l, r</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> l <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> r:<br>        <span class="hljs-keyword">return</span> l <span class="hljs-keyword">or</span> r<br>    l.push_down()<br>    r.push_down()<br>    <span class="hljs-keyword">if</span> l.key &lt;= r.key:<br>        p, l.right = l, merge(l.right, r)<br>    <span class="hljs-keyword">else</span>:<br>        p, r.left = r, merge(l, r.left)<br>    p.push_up()<br>    <span class="hljs-keyword">return</span> p<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">treap</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.root = <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">self, x</span>):<br>        self.root = merge(self.root, node(x))<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">reverse</span>(<span class="hljs-params">self, a, b</span>):<br>        l, m = split(self.root, a - <span class="hljs-number">1</span>)<br>        m, r = split(m, b - a + <span class="hljs-number">1</span>)<br>        m.<span class="hljs-built_in">reversed</span> ^= <span class="hljs-literal">True</span><br>        r = merge(m, r)<br>        self.root = merge(l, r)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">list</span>(<span class="hljs-params">self</span>):<br>        l = []<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">p</span>):<br>            p.push_down()<br>            <span class="hljs-keyword">if</span> p.left:<br>                dfs(p.left)<br>            l.append(p.value)<br>            <span class="hljs-keyword">if</span> p.right:<br>                dfs(p.right)<br>        dfs(self.root)<br>        <span class="hljs-keyword">return</span> l<br></code></pre></td></tr></table></figure><h4 id="区间查改">区间查改</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> random<br>get_size = <span class="hljs-keyword">lambda</span> p: p.size <span class="hljs-keyword">if</span> p <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>get_sum = <span class="hljs-keyword">lambda</span> p: p.<span class="hljs-built_in">sum</span> <span class="hljs-keyword">if</span> p <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">node</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, value</span>):<br>        self.<span class="hljs-built_in">sum</span> = self.value = value<br>        self.key = random()<br>        self.size = <span class="hljs-number">1</span><br>        self.left = self.right = <span class="hljs-literal">None</span><br>        self.tag = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_up</span>(<span class="hljs-params">self</span>):<br>        self.<span class="hljs-built_in">sum</span> = self.value + get_sum(self.left) + get_sum(self.right)<br>        self.size = <span class="hljs-number">1</span> + get_size(self.left) + get_size(self.right)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push_down</span>(<span class="hljs-params">self</span>):<br>        cover(self.left, self.tag)<br>        cover(self.right, self.tag)<br>        self.tag = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">cover</span>(<span class="hljs-params">p, tag</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> p:<br>        <span class="hljs-keyword">return</span><br>    p.tag += tag<br>    p.value += tag<br>    p.<span class="hljs-built_in">sum</span> += tag * get_size(p)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">split</span>(<span class="hljs-params">p, k</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> p:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br>    p.push_down()<br>    rk = <span class="hljs-number">1</span> + get_size(p.left)<br>    <span class="hljs-keyword">if</span> rk &lt;= k:<br>        l, r = split(p.right, k - rk)<br>        l, p.right = p, l<br>    <span class="hljs-keyword">else</span>:<br>        l, r = split(p.left, k)<br>        r, p.left = p, r<br>    p.push_up()<br>    <span class="hljs-keyword">return</span> l, r<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">l, r</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> l <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> r:<br>        <span class="hljs-keyword">return</span> l <span class="hljs-keyword">or</span> r<br>    l.push_down()<br>    r.push_down()<br>    <span class="hljs-keyword">if</span> l.key &lt;= r.key:<br>        p, l.right = l, merge(l.right, r)<br>    <span class="hljs-keyword">else</span>:<br>        p, r.left = r, merge(l, r.left)<br>    p.push_up()<br>    <span class="hljs-keyword">return</span> p<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">treap</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.root = <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">self, value</span>):<br>        self.root = merge(self.root, node(value))<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">self, a, b, tag</span>):<br>        l, m = split(self.root, a - <span class="hljs-number">1</span>)<br>        m, r = split(m, b - a + <span class="hljs-number">1</span>)<br>        cover(m, tag)<br>        r = merge(m, r)<br>        self.root = merge(l, r)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, a, b</span>):<br>        l, m = split(self.root, a - <span class="hljs-number">1</span>)<br>        m, r = split(m, b - a + <span class="hljs-number">1</span>)<br>        s = m.<span class="hljs-built_in">sum</span><br>        r = merge(m, r)<br>        self.root = merge(l, r)<br>        <span class="hljs-keyword">return</span> s<br></code></pre></td></tr></table></figure><h1>算法</h1><h2 id="二分查找">二分查找</h2><p>对于一个分隔为两部分的列表不妨设前一部分为真，找到最后一个使题设为真的下标</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">bound</span>(<span class="hljs-params">true, l, r</span>):      <span class="hljs-comment"># last number makes true in [l, r)</span><br>    <span class="hljs-keyword">if</span> r - l == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> true(l):<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>           <span class="hljs-comment"># no number makes true</span><br>    <br>    <span class="hljs-keyword">while</span> r - l &gt; <span class="hljs-number">1</span>:<br>        m = (l + r) // <span class="hljs-number">2</span><br><br>        <span class="hljs-keyword">if</span> true(m):<br>            l = m<br>        <span class="hljs-keyword">else</span>:<br>            r = m<br><br>    <span class="hljs-keyword">return</span> l<br></code></pre></td></tr></table></figure><h2 id="滑动窗口">滑动窗口</h2><p>区间数据满足二分属性，不妨设满足题意部分为真</p><h3 id="最长">最长</h3><p>连续数据增长趋近为假，求条件为真最长连续子区间长度</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Window</span>:<br>    <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.queue = self.deque()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.queue)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">self, x</span>):<br>        self.queue.append(x)<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self</span>):<br>        self.queue.popleft()<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">true</span>(<span class="hljs-params">self</span>):<br>        q_set = <span class="hljs-built_in">set</span>(self.queue)<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self) == <span class="hljs-built_in">len</span>(q_set)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s</span>):<br>        window = Window()<br><br>        M = <span class="hljs-number">0</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s:<br>            window.push(i)<br><br>            <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> window.true():<br>                window.pop()<br><br>            M = <span class="hljs-built_in">max</span>(M, <span class="hljs-built_in">len</span>(window))<br><br>        <span class="hljs-keyword">return</span> M<br></code></pre></td></tr></table></figure><h3 id="最短">最短</h3><p>连续数据增长趋近为真，求条件为真最短连续子区间长度</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Window</span>:<br>    <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.queue = self.deque()<br><br>        self.<span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.queue)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">self, x</span>):<br>        self.queue.append(x)<br><br>        self.<span class="hljs-built_in">sum</span> += x<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self</span>):<br>        self.<span class="hljs-built_in">sum</span> -= self.queue.popleft()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">true</span>(<span class="hljs-params">self, target</span>):<br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">sum</span> &gt;= target<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">minSubArrayLen</span>(<span class="hljs-params">self, target, nums</span>):<br>        window = Window()<br><br>        m = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> nums:<br>            window.push(i)<br>            <br>            <span class="hljs-keyword">while</span> window.true(target):<br>                m = <span class="hljs-built_in">min</span>(m, <span class="hljs-built_in">len</span>(window))<br>                <br>                window.pop()<br><br>        <span class="hljs-keyword">return</span> m <span class="hljs-keyword">if</span> m &lt; <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>) <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="计数">计数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowCounter</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, left</span>):           <span class="hljs-comment"># 窗口最左端初始位置</span><br>        self.left = left<br>        self.right = left - <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.right - self.left + <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">self</span>):<br>        self.right += <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self</span>):<br>        self.left += <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">true</span>(<span class="hljs-params">self</span>):<br><br>        <span class="hljs-keyword">return</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PrefixArea</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, matrix</span>):  <span class="hljs-comment"># matrix extend 0</span><br>        n = <span class="hljs-built_in">len</span>(matrix)<br>        m = <span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])<br><br>        self.area = [[<span class="hljs-number">0</span>] * m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m):<br>                self.area[i][j] = matrix[i][j] + self.two_area(i - <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span>, i, j)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">two_area</span>(<span class="hljs-params">self, x1, y1, x2, y2</span>):  <span class="hljs-comment"># x1 &lt;= x2, y1 &lt;= y2</span><br>        <span class="hljs-keyword">return</span> self.area[x1][y2] + self.area[x2][y1] - self.area[x1][y1]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, x1, y1, x2, y2</span>):<br>        <span class="hljs-keyword">return</span> self.area[x2][y2] - self.two_area(x1 - <span class="hljs-number">1</span>, y1 - <span class="hljs-number">1</span>, x2, y2)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowCounter</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, left, matrix, up, down</span>):<br>        self.left = left<br>        self.right = left - <span class="hljs-number">1</span><br><br>        self.matrix = matrix<br><br>        self.up = up<br>        self.down = down<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.right - self.left + <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">self</span>):<br>        self.right += <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self</span>):<br>        self.left += <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">true</span>(<span class="hljs-params">self, prefix_area, limit</span>):<br>        <span class="hljs-built_in">sum</span> = prefix_area.query(self.up, self.left, self.down, self.right)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span> &lt;= limit<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">extend0_matrix_input</span>(<span class="hljs-params">n, m</span>):<br>    <span class="hljs-keyword">return</span> [[<span class="hljs-number">0</span>] * (m + <span class="hljs-number">1</span>)] + [[<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    n, m, limit = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    matrix = extend0_matrix_input(n, m)<br><br>    prefix_area = PrefixArea(matrix)<br>    cnt = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> up <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> down <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(up, n + <span class="hljs-number">1</span>):  <span class="hljs-comment"># left initial</span><br>            window_counter = WindowCounter(<span class="hljs-number">1</span>, matrix, up, down)<br><br>            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>                window_counter.push()<br><br>                <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> window_counter.true(prefix_area, limit):<br>                    window_counter.pop()<br><br>                cnt += <span class="hljs-built_in">len</span>(window_counter)<br><br>    <span class="hljs-built_in">print</span>(cnt)<br></code></pre></td></tr></table></figure><h2 id="dp">dp</h2><h3 id="线性">线性</h3><h4 id="最长公共子序列">最长公共子序列</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>A, B = <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">input</span>(), <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">input</span>()<br>dp = [[<span class="hljs-number">0</span>] * (b + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(a + <span class="hljs-number">1</span>)]      <span class="hljs-comment"># A from 1 to i B from 1 to j sub max</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, a + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, b + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> A[i] == B[j]:<br>            dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>])<br><span class="hljs-built_in">print</span>(dp[a][b])<br></code></pre></td></tr></table></figure><h4 id="LIS">LIS</h4><h5 id="dp-2">dp</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">LIS</span>(<span class="hljs-params">arr</span>):<br>    n = <span class="hljs-built_in">len</span>(arr)<br>    arr.insert(<span class="hljs-number">0</span>, -<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>))<br>    dp = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>    M = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i):<br>            <span class="hljs-keyword">if</span> arr[j] &lt; arr[i]:<br>                dp[i] = <span class="hljs-built_in">max</span>(dp[i], dp[j] + <span class="hljs-number">1</span>)<br>                M = <span class="hljs-built_in">max</span>(M, dp[i])<br>    ans = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> dp[i] == M:<br>            ans.append(arr[i])<br>            M -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> M == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">return</span> ans[-<span class="hljs-number">1</span>: : -<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><h5 id="二分">二分</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">LIS</span>(<span class="hljs-params">arr</span>):<br>    n, w = <span class="hljs-built_in">len</span>(arr), [-<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)] + arr<br>    min_tail, size = [-<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)] + [<span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)] * n, [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>)<br>    find = <span class="hljs-keyword">lambda</span> x: bound(<span class="hljs-keyword">lambda</span> i: min_tail[i] &lt; x, <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        j = find(w[i])<br>        size[i] = j + <span class="hljs-number">1</span><br>        min_tail[j + <span class="hljs-number">1</span>] = <span class="hljs-built_in">min</span>(min_tail[j + <span class="hljs-number">1</span>], w[i])<br>    M, ans = <span class="hljs-built_in">max</span>(size), []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> size[i] == M:<br>            ans.append(w[i])<br>            M -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> M == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">return</span> ans[n: : -<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><h3 id="背包">背包</h3><h4 id="01">01</h4><h5 id="递归">递归</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache<br>n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>v, w = [<span class="hljs-number">0</span>], [<span class="hljs-number">0</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    vi, wi = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    v.append(vi)<br>    w.append(wi)<br><span class="hljs-meta">@lru_cache()</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">max_w</span>(<span class="hljs-params">n, k</span>):<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> k == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    M = max_w(n - <span class="hljs-number">1</span>, k)<br>    <span class="hljs-keyword">if</span> k &gt;= v[n]:<br>        M = <span class="hljs-built_in">max</span>(M, <br>                max_w(n - <span class="hljs-number">1</span>, k - v[n]) + w[n])<br>    <span class="hljs-keyword">return</span> M<br><span class="hljs-built_in">print</span>(max_w(n, k))<br></code></pre></td></tr></table></figure><h5 id="dp-3">dp</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>v, w = [<span class="hljs-number">0</span>], [<span class="hljs-number">0</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    vi, wi = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    v.append(vi)<br>    w.append(wi)<br>dp = [[<span class="hljs-number">0</span>] * (k + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k + <span class="hljs-number">1</span>):<br>        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j]<br>        <span class="hljs-keyword">if</span> j &gt;= v[i]:<br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j],<br>                           dp[i - <span class="hljs-number">1</span>][j - v[i]] + w[i])<br><span class="hljs-built_in">print</span>(dp[n][k])<br></code></pre></td></tr></table></figure><h4 id="完全">完全</h4><h5 id="递归-2">递归</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache<br>n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>v, w = [<span class="hljs-number">0</span>], [<span class="hljs-number">0</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    vi, wi = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    v.append(vi)<br>    w.append(wi)<br><span class="hljs-meta">@lru_cache()</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">max_w</span>(<span class="hljs-params">n, k</span>):<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> k == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    M = max_w(n - <span class="hljs-number">1</span>, k)<br>    <span class="hljs-keyword">if</span> k &gt;= v[n]:<br>        M = <span class="hljs-built_in">max</span>(M,<br>                max_w(n, k - v[n]) + w[n])<br>    <span class="hljs-keyword">return</span> M<br><span class="hljs-built_in">print</span>(max_w(n, k))<br></code></pre></td></tr></table></figure><h5 id="dp-4">dp</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>v, w = [<span class="hljs-number">0</span>], [<span class="hljs-number">0</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    vi, wi = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    v.append(vi)<br>    w.append(wi)<br>dp = [[<span class="hljs-number">0</span>] * (k + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k + <span class="hljs-number">1</span>):<br>        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j]<br>        <span class="hljs-keyword">if</span> j &gt;= v[i]:<br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j],<br>                           dp[i][j - v[i]] + w[i])<br><span class="hljs-built_in">print</span>(dp[n][k])<br></code></pre></td></tr></table></figure><h5 id="整数划分">整数划分</h5><h6 id="递归-3">递归</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache<br>n, mod = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()), <span class="hljs-built_in">int</span>(<span class="hljs-number">1e9</span>) + <span class="hljs-number">7</span><br><span class="hljs-meta">@lru_cache()</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">count</span>(<span class="hljs-params">n, m</span>):<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> m == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    cnt = count(n, m - <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">if</span> n &gt;= m:<br>        cnt = (cnt + count(n - m, m)) % mod<br>    <span class="hljs-keyword">return</span> cnt<br><span class="hljs-built_in">print</span>(count(n, n))<br></code></pre></td></tr></table></figure><h6 id="dp-5">dp</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">n, mod = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()), <span class="hljs-built_in">int</span>(<span class="hljs-number">1e9</span>) + <span class="hljs-number">7</span><br>dp = [[<span class="hljs-number">1</span>] * (n + <span class="hljs-number">1</span>)] + [[<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        dp[i][j] = dp[i][j - <span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span> i &gt;= j:<br>            dp[i][j] = (dp[i][j] + dp[i - j][j]) % mod<br><span class="hljs-built_in">print</span>(dp[n][n])<br></code></pre></td></tr></table></figure><h4 id="多重">多重</h4><h5 id="朴素">朴素</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>v, w, s = [<span class="hljs-number">0</span>], [<span class="hljs-number">0</span>], [<span class="hljs-number">0</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    vi, wi, si = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    v.append(vi)<br>    w.append(wi)<br>    s.append(si)<br>dp = [[<span class="hljs-number">0</span>] * (k + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k + <span class="hljs-number">1</span>):<br>        m = <span class="hljs-built_in">min</span>(s[i], j // v[i])<br>        <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m + <span class="hljs-number">1</span>):<br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j],<br>                           dp[i - <span class="hljs-number">1</span>][j - v[i] * l] + w[i] * l)<br><span class="hljs-built_in">print</span>(dp[n][k])<br></code></pre></td></tr></table></figure><h5 id="二进制优化">二进制优化</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> log2<br>n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>v, w = [<span class="hljs-number">0</span>], [<span class="hljs-number">0</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    vi, wi, si = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    ki = <span class="hljs-built_in">int</span>(log2(si + <span class="hljs-number">1</span>)) - <span class="hljs-number">1</span><br>    v.append(vi)<br>    w.append(wi)<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, ki + <span class="hljs-number">1</span>):<br>        v.append(v[-<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">1</span>)<br>        w.append(w[-<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">1</span>)<br>    m = si + <span class="hljs-number">1</span> - (<span class="hljs-number">1</span> &lt;&lt; ki + <span class="hljs-number">1</span>)<br>    v.append(vi * m)<br>    w.append(wi * m)<br>n = <span class="hljs-built_in">len</span>(v) - <span class="hljs-number">1</span><br>dp = [[<span class="hljs-number">0</span>] * (k + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k + <span class="hljs-number">1</span>):<br>        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j]<br>        <span class="hljs-keyword">if</span> j &gt;= v[i]:<br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j],<br>                           dp[i - <span class="hljs-number">1</span>][j - v[i]] + w[i])<br><span class="hljs-built_in">print</span>(dp[n][k])<br></code></pre></td></tr></table></figure><h4 id="分组">分组</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>vw = [[(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)]]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    vw.append([(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)])<br>    m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        vw[i].append(<span class="hljs-built_in">tuple</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())))<br>dp = [[<span class="hljs-number">0</span>] * (k + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, k + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> v, w <span class="hljs-keyword">in</span> vw[i]:<br>            <span class="hljs-keyword">if</span> j &gt;= v:<br>                dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j],<br>                               dp[i - <span class="hljs-number">1</span>][j - v] + w)<br><span class="hljs-built_in">print</span>(dp[n][k])<br></code></pre></td></tr></table></figure><h3 id="区间">区间</h3><h4 id="递归-4">递归</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">from</span> sys <span class="hljs-keyword">import</span> setrecursionlimit<br>        <span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache<br><br>        setrecursionlimit(<span class="hljs-built_in">int</span>(<span class="hljs-number">1e6</span>))<br><br>        self.lru_cache = lru_cache<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.lru_cache(maxsize=<span class="hljs-literal">None</span>)     <span class="hljs-comment"># return key is function</span><br><br><br>cache = Cache()<br>stone_sum = [<span class="hljs-number">0</span>]<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query_sum</span>(<span class="hljs-params">l, r</span>):<br>    <span class="hljs-keyword">return</span> stone_sum[r] - stone_sum[l - <span class="hljs-number">1</span>]<br><br><br><span class="hljs-meta">@cache.func()</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">min_stone</span>(<span class="hljs-params">l, r</span>):<br>    <span class="hljs-keyword">if</span> l == r:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br>    m = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br>    <span class="hljs-keyword">for</span> mid <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(l, r):<br>        left_cost = min_stone(l, mid) + query_sum(l, mid)<br>        right_cost = min_stone(mid + <span class="hljs-number">1</span>, r) + query_sum(mid + <span class="hljs-number">1</span>, r)<br><br>        m = <span class="hljs-built_in">min</span>(m, left_cost + right_cost)<br>    <span class="hljs-keyword">return</span> m<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><br>    <span class="hljs-keyword">for</span> stone <span class="hljs-keyword">in</span> <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()):<br>        stone_sum.append(stone_sum[-<span class="hljs-number">1</span>] + stone)<br><br>    <span class="hljs-built_in">print</span>(min_stone(<span class="hljs-number">1</span>, n))<br></code></pre></td></tr></table></figure><h4 id="dp-6">dp</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python">stone_sum = [<span class="hljs-number">0</span>]<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query_sum</span>(<span class="hljs-params">l, r</span>):<br>    <span class="hljs-keyword">return</span> stone_sum[r] - stone_sum[l - <span class="hljs-number">1</span>]<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><br>    <span class="hljs-keyword">for</span> stone <span class="hljs-keyword">in</span> <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()):<br>        stone_sum.append(stone_sum[-<span class="hljs-number">1</span>] + stone)<br><br>    dp = [[<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><br>    <span class="hljs-keyword">for</span> length <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n - length + <span class="hljs-number">2</span>):<br>            r = l + length - <span class="hljs-number">1</span><br>            m = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br>            <br>            <span class="hljs-keyword">for</span> mid <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(l, r):<br>                left = dp[l][mid] + query_sum(l, mid)<br>                right = dp[mid + <span class="hljs-number">1</span>][r] + query_sum(mid + <span class="hljs-number">1</span>, r)<br>                <br>                m = <span class="hljs-built_in">min</span>(m, left + right)<br>            <br>            dp[l][r] = m<br>            <br>    <span class="hljs-built_in">print</span>(dp[<span class="hljs-number">1</span>][n])<br></code></pre></td></tr></table></figure><h3 id="树型">树型</h3><p>等价于记忆化搜索</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, limit=<span class="hljs-built_in">int</span>(<span class="hljs-params"><span class="hljs-number">1e5</span></span>)</span>):<br>        <span class="hljs-keyword">from</span> sys <span class="hljs-keyword">import</span> setrecursionlimit<br>        <span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache<br><br>        setrecursionlimit(limit)<br><br>        self.lru_cache = lru_cache<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.lru_cache()     <span class="hljs-comment"># return key is function</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    cache = Cache()<br><br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    g = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br>    w = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    root = <span class="hljs-built_in">set</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>        s, f = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        g[f].append(s)<br>        root.discard(s)<br>    root = root.pop()<br><br><span class="hljs-meta">    @cache.func()</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">attend</span>(<span class="hljs-params">k</span>):     <span class="hljs-comment"># k root(attend) max joy</span><br>        s = w[k]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> g[k]:<br>            s += <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, absent(i))<br>        <span class="hljs-keyword">return</span> s<br>    <br>    dfs = <span class="hljs-keyword">lambda</span> k: <span class="hljs-built_in">max</span>(attend(k), absent(k))<br><br><span class="hljs-meta">    @cache.func()</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">absent</span>(<span class="hljs-params">k</span>):      <span class="hljs-comment"># k root(absent) max joy</span><br>        s = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> g[k]:<br>            s += <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, dfs(i))<br>        <span class="hljs-keyword">return</span> s<br><br>    <span class="hljs-built_in">print</span>(dfs(root))<br></code></pre></td></tr></table></figure><h3 id="状态压缩">状态压缩</h3><h4 id="集合">集合</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>N = <span class="hljs-number">1</span> &lt;&lt; m<br>bags = [<span class="hljs-number">0</span>] * n<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    it = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> it:<br>        bags[i] |= <span class="hljs-number">1</span> &lt;&lt; j - <span class="hljs-number">1</span><br>dp = [<span class="hljs-number">101</span>] * N<br>dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> st <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    <span class="hljs-keyword">for</span> bag <span class="hljs-keyword">in</span> bags:<br>        dp[st | bag] = <span class="hljs-built_in">min</span>(dp[st | bag], dp[st] + <span class="hljs-number">1</span>)<br><span class="hljs-keyword">if</span> dp[N - <span class="hljs-number">1</span>] &gt; <span class="hljs-number">100</span>:<br>    <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(dp[N - <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h4 id="棋盘">棋盘</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> n <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> m:<br>        <span class="hljs-keyword">break</span><br>    ST = <span class="hljs-number">1</span> &lt;&lt; n<br>    law = [<span class="hljs-literal">True</span>] * ST<br>    <span class="hljs-keyword">for</span> st <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(ST):<br>        cnt = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">if</span> st &gt;&gt; k &amp; <span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">if</span> cnt &amp; <span class="hljs-number">1</span>:<br>                    law[st] = <span class="hljs-literal">False</span><br>                    <span class="hljs-keyword">break</span><br>                cnt = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">else</span>:<br>                cnt += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> cnt &amp; <span class="hljs-number">1</span>:<br>            law[st] = <span class="hljs-literal">False</span><br>    dp = [[<span class="hljs-number">0</span>] * ST <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m + <span class="hljs-number">1</span>)]<br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> st <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(ST):<br>            <span class="hljs-keyword">for</span> last <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(ST):<br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (st &amp; last) <span class="hljs-keyword">and</span> law[st | last]:<br>                    dp[i][st] += dp[i - <span class="hljs-number">1</span>][last]<br>    <span class="hljs-built_in">print</span>(dp[m][<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><h3 id="数位">数位</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python">N = <span class="hljs-number">10</span><br>f = [[<span class="hljs-number">1</span>] * N] + [[<span class="hljs-number">0</span>] * N <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N - <span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N):<br>    <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, N):<br>            f[k][n] += f[k - <span class="hljs-number">1</span>][i]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">count</span>(<span class="hljs-params">n</span>):   <span class="hljs-comment"># n &gt;= 0, [0, n]</span><br>    nums = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(n)]<br>    size = <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">k</span>):<br>        <span class="hljs-keyword">if</span> k &lt; <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        p = size - k<br>        <span class="hljs-keyword">if</span> nums[p - <span class="hljs-number">1</span>] &gt; nums[p]:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        cnt = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(nums[p - <span class="hljs-number">1</span>], nums[p]):<br>            cnt += f[k][i]<br>        <span class="hljs-keyword">return</span> cnt + dfs(k - <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> dfs(size - <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-keyword">try</span>:<br>        l, r = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        <span class="hljs-built_in">print</span>(count(r) - count(l - <span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><h2 id="贪心算法">贪心算法</h2><h3 id="绝对值不等式">绝对值不等式</h3><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></munderover><mrow><mi>x</mi><mo>−</mo><msub><mi>a</mi><mi>i</mi></msub></mrow></mrow><annotation encoding="application/x-tex">\sum_{i=0}^{n-1}{x-a_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.0788em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">abs_min</span>(<span class="hljs-params">a</span>):<br>    n = <span class="hljs-built_in">len</span>(a)<br>    b = <span class="hljs-built_in">sorted</span>(a)<br>    l, r = <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span><br>    s = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> l &lt; r:<br>        s += b[r] - b[l]<br>        l += <span class="hljs-number">1</span><br>        r -= <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> s<br></code></pre></td></tr></table></figure><h4 id="糖果传递">糖果传递</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = [<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>av = <span class="hljs-built_in">sum</span>(a) // n<br>b = [<span class="hljs-number">0</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>    b.append(b[i - <span class="hljs-number">1</span>] + av - a[i])<br><span class="hljs-built_in">print</span>(abs_max(n, b))<br></code></pre></td></tr></table></figure><h3 id="区间选点">区间选点</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>intervals = <span class="hljs-built_in">sorted</span>([<span class="hljs-built_in">tuple</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)], key = <span class="hljs-keyword">lambda</span> t: t[<span class="hljs-number">1</span>])<br>r, cnt = intervals[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>], <span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>    l = intervals[i][<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> l &gt; r:<br>        r = intervals[i][<span class="hljs-number">1</span>]<br>        cnt += <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(cnt)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>编程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pathlib</title>
    <link href="/2023/10/21/pathlib/"/>
    <url>/2023/10/21/pathlib/</url>
    
    <content type="html"><![CDATA[<h1>pathlib</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br>p = Path()<br><span class="hljs-comment"># WindowsPath(&#x27;.&#x27;)</span><br>p.resolve()                     <span class="hljs-comment"># 文档显示是absolute path, 这里感觉只能用在获取当前绝对路径上</span><br><span class="hljs-comment"># WindowsPath(&#x27;C:/Users/Cabby&#x27;)</span><br>p = Path(<span class="hljs-string">r&#x27;d:\test\tt.txt.bk&#x27;</span>)<br>p.name                          <span class="hljs-comment"># 获取文件名</span><br><span class="hljs-comment"># tt.txt.bk</span><br>p.stem                          <span class="hljs-comment"># 获取文件名除后缀的部分</span><br><span class="hljs-comment"># tt.txt</span><br>p.suffix                        <span class="hljs-comment"># 文件后缀</span><br><span class="hljs-comment"># .bk</span><br>p.suffixs                       <span class="hljs-comment"># 文件的后缀们...</span><br><span class="hljs-comment"># [&#x27;.txt&#x27;, &#x27;.bk&#x27;]</span><br>p.parent                        <span class="hljs-comment"># 相当于dirnanme</span><br><span class="hljs-comment"># WindowsPath(&#x27;d:/test&#x27;)</span><br>p.parents                       <span class="hljs-comment"># 返回一个iterable, 包含所有父目录</span><br><span class="hljs-comment"># &lt;WindowsPath.parents&gt;</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> p.parents:<br>    <span class="hljs-built_in">print</span>(i)<br><span class="hljs-comment"># d:\test</span><br><span class="hljs-comment"># d:\</span><br>a.parts                         <span class="hljs-comment"># 将路径通过分隔符分割成一个元祖</span><br><span class="hljs-comment"># (&#x27;d:\\&#x27;, &#x27;test&#x27;, &#x27;tt.txt.bk&#x27;)</span><br>p = Path(<span class="hljs-string">r&#x27;d:\test&#x27;</span>)<br>p = Path(p, <span class="hljs-string">&#x27;tt.txt&#x27;</span>)           <span class="hljs-comment"># 字符串拼接</span><br>p.exists()                      <span class="hljs-comment"># 判断文件是否存在</span><br>p.is_file()                     <span class="hljs-comment"># 判断是否是文件</span><br>p.is_dir()                      <span class="hljs-comment"># 判断是否是目录</span><br>p = Path(<span class="hljs-string">r&#x27;d:\test&#x27;</span>)<br><span class="hljs-comment"># WindowsPath(&#x27;d:/test&#x27;)</span><br>p.iterdir()                     <span class="hljs-comment"># 相当于os.listdir</span><br>p.glob(<span class="hljs-string">&#x27;*&#x27;</span>)                     <span class="hljs-comment"># 相当于os.listdir, 但是可以添加匹配条件</span><br>p.rglob(<span class="hljs-string">&#x27;*&#x27;</span>)                    <span class="hljs-comment"># 相当于os.walk, 也可以添加匹配条件</span><br>p = Path(<span class="hljs-string">r&#x27;d:\test\tt\dd&#x27;</span>)<br>p.mkdir(exist_ok=<span class="hljs-literal">True</span>)          <span class="hljs-comment"># 创建文件目录(前提是tt目录存在, 否则会报错)</span><br><span class="hljs-comment"># 一般我会使用下面这种创建方法</span><br>p.mkdir((exist_ok=<span class="hljs-literal">True</span>, parents=<span class="hljs-literal">True</span>) <span class="hljs-comment"># 递归创建文件目录</span><br>        p = Path(<span class="hljs-string">r&#x27;d:\test\tt.txt&#x27;</span>)<br>p.stat()                        <span class="hljs-comment"># 获取详细信息</span><br><span class="hljs-comment"># os.stat_result(st_mode=33206, st_ino=562949953579011, st_dev=3870140380, st_nlink=1, st_uid=0, st_gid=0, st_size=0, st_atime=1525254557, st_mtime=1525254557, st_ctime=1525254557)</span><br>p.stat().st_size                <span class="hljs-comment"># 文件大小</span><br><span class="hljs-comment"># 0</span><br>p.stat().st_ctime               <span class="hljs-comment"># 创建时间</span><br><span class="hljs-comment"># 1525254557.2090347</span><br><span class="hljs-comment"># 其他的信息也可以通过相同方式获取</span><br>p.stat().st_mtime               <span class="hljs-comment"># 修改时间</span><br></code></pre></td></tr></table></figure><h2 id="路径获取"><strong>路径获取</strong></h2><ul><li>获取当前工作目录</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; import pathlib<br>&gt;&gt;&gt; pathlib.Path.cwd()<br>C:\Users\me\study<br># WindowsPath(&#x27;C:\Users\me\study&#x27;)<br></code></pre></td></tr></table></figure><p>虽然在这里打印出来的很像一个字符串，但实际上得到的是一个 <code>WindowsPath('C:\Users\me\study')</code>对象。显示内容由 Path 类的 <code>__repr__</code> 定义。</p><blockquote><p>注意<br>工作目录是在哪个目录下运行你的程序，不是项目目录。</p></blockquote><p>如果你只想得到字符串表示，不想要 WindowsPath 对象，可以用 str() 转化：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; str(pathlib.Path.cwd())<br>C:\Users\me\study<br></code></pre></td></tr></table></figure><ul><li>获取用户 home 目录。</li></ul><p>下面的例子因为基本都是使用 pathlib 下面的 Path 类，所以可以换一种导入方式。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">from pathlib import Path<br>&gt;&gt;&gt; Path.home()<br>c:\Users\me<br></code></pre></td></tr></table></figure><ul><li>获取当前文件路径</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; Path(__file__)<br>demo_01.py<br></code></pre></td></tr></table></figure><p>在 pycharm 中右击运行和在 cmd 运行的结果会不同。pycharm 会显示全路径，cmd 运行只会显示工作目录下的相对路径。如果想统一，可以添加后缀 <code>.resolve()</code> 转化成绝对路径，这个在后面还会提到。</p><ul><li>获取任意字符串路径</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; Path(&#x27;subdir/demo_02.py&#x27;)<br>subdir\demo_02.py<br>&gt;&gt;&gt; Path(&#x27;c:d:y/rad.txt&#x27;)<br>c:d:y\rad.txt<br></code></pre></td></tr></table></figure><p>这里需要注意 2 点：</p><ol><li>不管字符串使用的是正斜杠 <code>/</code> 还是反斜杠 <code>\</code>， 在 windows 系统里，得到的路径都是反斜杠<code>\</code>, pathlib 会根据操作系统智能处理。</li><li>第二个例子中字符串会被 <code>/</code> 分割，<code>c:d:y</code> 会被当做一个目录名字，pathlib 不会去判断这个文件真的存在哦。</li></ol><ul><li>获取绝对路径</li></ul><p>只需要在任意路径对象后添加方法 <code>.resolve()</code> 就能获取路径的绝对路径。如果填入的路径是相对路径（windows 下没有盘符，linux 没有 / 开头)，则会在当前工作目录后添加路径。如果是已经是绝对路径，则只会根据操作系统优化表达。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file = Path(&#x27;archive/demo.txt&#x27;)<br>&gt;&gt;&gt; file<br>archive\demo.txt<br>&gt;&gt;&gt; file.resolve()<br>C:\Users\me\study\archive\demo.txt<br></code></pre></td></tr></table></figure><ul><li>获取文件属性</li></ul><p>文件属性比如文件大小，创建时间，修改时间等等。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">file = Path(&#x27;archive/demo.txt&#x27;)<br>print(file.stat())<br>print(file.stat().st_size)<br>print(file.stat().st_atime)<br>print(file.stat().st_ctime)<br>print(file.stat().st_mtime)<br></code></pre></td></tr></table></figure><p>找出最后修改的文件的例子：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; path = Path.cwd()<br>&gt;&gt;&gt; max(<br>        [(f.stat().st_mtime, f) <br>         for f in path.iterdir() <br>         if f.is_file()]<br>    )<br>1589171135.860173 C:\Users\me\study\demo_03.py<br></code></pre></td></tr></table></figure><h2 id="路径组成部分"><strong>路径组成部分</strong></h2><p>获取路径的组成部分非常方便：</p><ul><li>.name 文件名，包含后缀名，如果是目录则获取目录名。</li><li>.stem 文件名，不包含后缀。</li><li>.suffix 后缀，比如 <code>.txt</code>, <code>.png</code>。</li><li>.parent 父级目录，相当于 <code>cd ..</code></li><li>.anchor 锚，目录前面的部分 <code>C:\</code> 或者 <code>/</code>。</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file = Path(&#x27;archive/demo.txt&#x27;)<br>&gt;&gt;&gt; file.name<br>demo.txt<br><br>&gt;&gt;&gt; file.stem<br>demo<br><br>&gt;&gt;&gt; file.suffix<br>.txt<br><br>&gt;&gt;&gt; file.parent<br>C:\Users\me\study\archive<br><br>&gt;&gt;&gt; file.anchor<br>&#x27;C:\&#x27;<br></code></pre></td></tr></table></figure><ul><li>获取上一级目录</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file = Path(&#x27;archive/demo.txt&#x27;)<br>&gt;&gt;&gt; file.parent<br>archive<br></code></pre></td></tr></table></figure><p>获取上 2 级 和 3 级目录会有点问题。因为传入的是一个相对路径，上 3 级已经无法往上了，所以还是会停留在工作目录。所以你需要确保你的路径有这么多层级。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file.parent.parent<br>.<br>&gt;&gt;&gt; file.parent.parent.parent<br>.<br></code></pre></td></tr></table></figure><ul><li>获取所有的上级目录：</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file.parents<br>&lt;WindowsPath.parents&gt;<br>&gt;&gt;&gt; list(file.parents)<br>[WindowsPath(&#x27;archive&#x27;), WindowsPath(&#x27;.&#x27;)]<br></code></pre></td></tr></table></figure><ul><li>父级目录的另一种表示方法：</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file.parents[0]<br>archive<br></code></pre></td></tr></table></figure><p>如果路径是在当前工作目录下的子目录，最好转化成绝对路径再获取上层目录：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file.resolve().parents[4]<br>C:\Users<br># 不能使用负数<br></code></pre></td></tr></table></figure><p>在 os 模块中获取上 3 级目录简直令人奔溃，需要重复使用 dirname 函数，使用 pathlib 的 parent 可以极大简单化操作：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; import os<br>&gt;&gt;&gt; os.path.dirname(file)<br></code></pre></td></tr></table></figure><ul><li>相对其他某个路径的结果：</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file.relative_to(&#x27;archive&#x27;)<br>dmeo.txt<br></code></pre></td></tr></table></figure><h2 id="子路径扫描"><strong>子路径扫描</strong></h2><ul><li>dir_path.iterdir() 可以扫描某个目录下的所有路径（文件和子目录)， 打印的会是处理过的绝对路径。</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; cwd = Path.cwd()<br>&gt;&gt;&gt; [path for path in cwd.iterdir() if cwd.is_dir()]<br>[<br>    WindowsPath(&#x27;C:/Users/me/study/archive&#x27;), <br>    WindowsPath(&#x27;C:/Users/me/study/demo_01.py&#x27;), <br>    WindowsPath(&#x27;C:/Users/me/study/new_archive&#x27;)<br>]<br></code></pre></td></tr></table></figure><ul><li>使用 iterdir() 可以统计目录下的不同文件类型：</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; path = Path.cwd()<br>&gt;&gt;&gt; files = [f.suffix for f in path.iterdir() if f.is_file()]<br>&gt;&gt;&gt; collections.Counter(files)<br>Counter(&#123;&#x27;.py&#x27;: 3, &#x27;.txt&#x27;: 1&#125;)<br></code></pre></td></tr></table></figure><ul><li>查找目录下的指定文件 glob 。</li></ul><p>使用模式匹配（正则表达式）匹配指定的路径。正则表达式不熟练的可以查看 <strong><a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3Fsrc%3D11%26timestamp%3D1589010579%26ver%3D2327%26signature%3DJ84Vp3En0*OyHZ5OJEkl4xjhX3gXUDTEn2jxYy*heATYN*IOB66Vnvj8R9Cu9D6BVB*QcAP4NtxQne2WVDOxb0e9lUFISXOtzT-8dhAqbUvHVZ69*yGAvJJ2vzWhJMfA%26new%3D1">这个教程，真的让我学会了正则表达式</a></strong>。glob 只会匹配当前目录下， rglob 会递归所有子目录。下面这个例子，demo.txt 在 archive 子目录下。所以用 glob 找到的是空列表，rglob 可以找到。glob 得到的是一个生成器，可以通过 list() 转化成列表。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; cwd = Path.cwd()<br>&gt;&gt;&gt; list(cwd.glob(&#x27;*.txt&#x27;))<br>[]<br>&gt;&gt;&gt; list(cwd.rglob(&#x27;*.txt&#x27;))<br>[WindowsPath(&#x27;C:/Users/me/study/archive/demo.txt&#x27;)]<br></code></pre></td></tr></table></figure><ul><li>检查路径是否符合规则 match</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file = Path(&#x27;/archive/demo.txt&#x27;)<br>&gt;&gt;&gt; file.match(&#x27;*.txt&#x27;)<br>True<br></code></pre></td></tr></table></figure><h2 id="路径拼接"><strong>路径拼接</strong></h2><p>pathlib 支持用 <code>/</code> 拼接路径。熟悉魔术方法的同学应该很容易理解其中的原理。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; Path.home() / &#x27;dir&#x27; / &#x27;file.txt&#x27;<br>C:\Users\me\dir\file.txt<br></code></pre></td></tr></table></figure><p>如果用不惯 <code>/</code> ，也可以用类似 os.path.join 的方法：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; Path.home().joinpath(&#x27;dir&#x27;, &#x27;file.txt&#x27;)<br>C:\Users\me\dir\file.txt<br></code></pre></td></tr></table></figure><h2 id="路径测试（判断）"><strong>路径测试（判断）</strong></h2><ul><li>是否为文件</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; Path(&quot;archive/demo.txt&quot;).is_file()<br>True<br>&gt;&gt;&gt; Path(&quot;archive/demo.txt&quot;).parent.is_file()<br>False<br></code></pre></td></tr></table></figure><ul><li>是否为文件夹 (目录)</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; Path(&quot;archive/demo.txt&quot;).is_dir()<br>False<br>&gt;&gt;&gt; Path(&quot;archive/demo.txt&quot;).parent.is_dir()<br>True<br></code></pre></td></tr></table></figure><ul><li>是否存在</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; Path(&quot;archive/demo.txt&quot;).exists<br>True<br>&gt;&gt;&gt; Path(&quot;archive/dem.txt&quot;).exists<br>False<br></code></pre></td></tr></table></figure><h2 id="文件操作"><strong>文件操作</strong></h2><ul><li>创建文件 touch</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file = Path(&#x27;hello.txt&#x27;)<br>&gt;&gt;&gt; file.touch(exist_ok=True)<br>None<br><br>&gt;&gt;&gt; file.touch(exist_ok=False)<br>FileExistsError: [Errno 17] File exists: &#x27;hello.txt&#x27;<br></code></pre></td></tr></table></figure><p>exist_ok 表示当文件已经存在时，程序的反应。如果为 True，文件存在时，不进行任何操作。如果为 False, 则会报 <code>FileExistsError</code> 错误。</p><ul><li>创建目录 path.mkdir</li></ul><p>用 os 创建目录分为 2 个函数 ： <code>mkdir()</code> 和 <code>makedirs()</code>。 <code>mkdir()</code> 一次只能创建一级目录， <code>makedirs()</code> 可以同时创建多级目录：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; os.mkdir(&#x27;dir/subdir/3dir&#x27;)<br>FileNotFoundError: [WinError 3] 系统找不到指定的路径。: &#x27;dir/subdir/3dir&#x27;<br><br>&gt;&gt;&gt; os.makedirs(&#x27;dir/subdir/3dir&#x27;)<br>None<br></code></pre></td></tr></table></figure><p>使用 pathlib 只需要用 path.mkdir() 函数就可以。它提供了 parents 参数，设置为 True 可以创建多级目录；不设置则只能创建 一层：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; path = Path(&#x27;/dir/subdir/3dir&#x27;)<br>&gt;&gt;&gt; path.mkdir()<br>FileNotFoundError: [WinError 3] 系统找不到指定的路径。: &#x27;dir/subdir/3dir&#x27;<br><br>&gt;&gt;&gt; path.mkdir(parents=True)<br>None<br></code></pre></td></tr></table></figure><ul><li>删除目录 path.rmdir()</li></ul><p>删除目录非常危险，并且没有提示，一定要谨慎操作。一次只删除一级目录，且当前目录必须为空。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; path = Path(&#x27;dir/subdir/3dir&#x27;)<br>&gt;&gt;&gt; path.rmdir()<br>None<br></code></pre></td></tr></table></figure><ul><li>删除文件 path.unlink, 危险操作。</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; path = Path(&#x27;archive/demo.txt&#x27;)<br>&gt;&gt;&gt; path.unlink()<br></code></pre></td></tr></table></figure><ul><li>打开文件</li></ul><p>使用 open() 函数打开文件时，如果需要传入文件路径。可以用字符串作为参数传入：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">with open(&#x27;archive/demo.txt&#x27;) as f:<br>    print(f.read())<br></code></pre></td></tr></table></figure><p>也可以传入 Path 对象：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">file_path = Path(&#x27;archive/demo.txt&#x27;)<br>with open(file_path) as f:<br>    print(f.read())<br></code></pre></td></tr></table></figure><p>如果经常使用 pathlib，可以在获取到 Path 路径以后直接调用 path.open() 方法。至于到底用哪一个，其实不必太在意，因为 path.open() 也是调用内置函数 open()。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">file = Path(&#x27;archive/demo.txt&#x27;)<br>with file.open() as f:<br>    print(f.read())<br></code></pre></td></tr></table></figure><p>不过 pathlib 对读取和写入进行了简单的封装，不再需要重复去打开文件和管理文件的关闭了。</p><ul><li>.read_text() 读取文本</li><li>.read_bytes() 读取 bytes</li><li>.write_text() 写入文本</li><li>.write_bytes() 写入 tytes</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs text">&gt;&gt;&gt; file_path = Path(&#x27;archive/demo.txt&#x27;)<br><br>&gt;&gt;&gt; file_path.read_text()   # 读取文本<br>&#x27;text in the demo.txt&#x27;<br><br>&gt;&gt;&gt; file_path.read_bytes()  # 读取 bytes<br>b&#x27;text in the demo.txt&#x27;<br><br>&gt;&gt;&gt; file.write_text(&#x27;new words&#x27;)  # 写入文本<br>9<br><br>&gt;&gt;&gt; file.write_bytes(b&#x27;new words&#x27;) # 写入 bytes<br>9<br></code></pre></td></tr></table></figure><blockquote><p>注意<br>file.write 操作使用的是 w 模式，如果之前已经有文件内容，将会被覆盖。</p></blockquote><ul><li>移动文件</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">txt_path = Path(&#x27;archive/demo.txt&#x27;)<br>res = txt_path.replace(&#x27;new_demo.txt&#x27;)<br>print(res)<br></code></pre></td></tr></table></figure><p>这个操作会把 archive 目录下的 demo.txt 文件移动到当前工作目录，并重命名为 new_demo.txt。</p><p>移动操作支持的功能很受限。比如当前工作目录如果已经有一个 new_demo.txt 的文件，则里面的内容都会被覆盖。还有，如果需要移动到其他目录下，则该目录必须要存在，否则会报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text"># new_archive 目录必须存在，否则会报错<br>txt_path = Path(&#x27;archive/demo.txt&#x27;)<br>res = txt_path.replace(&#x27;new_archive/new_demo.txt&#x27;)<br>print(res)<br></code></pre></td></tr></table></figure><p>为了避免出现同名文件里的内容被覆盖，通常需要进行额外处理。比如判断同名文件不能存在，但是父级目录必须存在；或者判断父级目录不存在时，创建该目录。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">dest = Path(&#x27;new_demo.txt&#x27;)<br>if (not dest.exists()) and dest.parent.exists():<br> txt_path.replace(dest)<br></code></pre></td></tr></table></figure><ul><li>重命名文件</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">txt_path = Path(&#x27;archive/demo.txt&#x27;)<br>new_file = txt_path.with_name(&#x27;new.txt&#x27;)<br>txt_path.replace(new_file)<br></code></pre></td></tr></table></figure><ul><li>修改后缀名</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">txt_path = Path(&#x27;archive/demo.txt&#x27;)<br>new_file = txt_path.with_suffix(&#x27;.json&#x27;)<br>txt_path.replace(new_file)<br></code></pre></td></tr></table></figure><blockquote><p>注意<br>不管是移动文件还是删除文件，都不会给任何提示。所以在进行此类操作的时候要特别小心。<br>对文件进行操作最好还是用 shutil 模块。</p></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>编程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>915 概论</title>
    <link href="/2023/10/21/915%20%E6%A6%82%E8%AE%BA/"/>
    <url>/2023/10/21/915%20%E6%A6%82%E8%AE%BA/</url>
    
    <content type="html"><![CDATA[<h1>915 概论</h1><h2 id="报考情况">报考情况</h2><p><img src="%E6%8A%A5%E5%90%8D%E4%BA%BA%E6%95%B0.jpg" alt="报名人数"></p><h2 id="大纲">大纲</h2><h3 id="考试形式和试卷结构"><strong>考试形式和试卷结构</strong></h3><p><strong>一、试卷满分及考试时间</strong></p><p>试卷满分为150分，考试时间为180分钟。</p><p><strong>二、试卷内容结构</strong></p><p>数据结构与算法             　约80%</p><p>程序设计基础               约20%</p><p><strong>三、试卷题型结构</strong></p><p>单项选择题          10小题，每小题2分，共20分</p><p>填空题            10小题，每小题2分，共20分</p><p>解答题            7-8小题，共80分</p><p>程序设计题          2-3小题，共30分</p><h3 id="数据结构与算法"><strong>数据结构与算法</strong></h3><h4 id="一、数据结构基本概念"><strong>一、数据结构基本概念</strong></h4><p><strong>考试内容</strong></p><p>数据、数据元素、数据项、数据对象、数据结构的定义；</p><p>数据的逻辑结构、数据的物理结构、数据的运算的定义；</p><p>数据类型以及抽象数据类型的定义。</p><p><strong>考试要求</strong></p><p>掌握数据、数据元素、数据项之间的关系；</p><p>掌握数据结构的定义；</p><p>掌握数据结构的三要素；</p><p>掌握数据类型、抽象数据类型和数据结构之间的关系。</p><h4 id="二、算法和算法分析"><strong>二、算法和算法分析</strong></h4><p><strong>考试内容</strong></p><p>算法的定义、算法的特性、算法的时间复杂度和算法的空间复杂度的定义及计算。</p><p><strong>考试要求</strong></p><p>了解算法的定义以及特性；</p><p>了解衡量算法在资源上的两个方面；</p><p>掌握算法的渐进性分析方法，会用该方法对算法进行评估；</p><p>掌握Ο标记法，理解大Ο标记法的意义；</p><p>掌握Ω标记法，理解大Ω标记法的意义；</p><p>掌握Θ标记法，理解大Θ标记法的意义；</p><p>了解时空权衡原则。</p><h4 id="三、线性表"><strong>三、线性表</strong></h4><p><strong>考试内容</strong></p><p>线性表的定义；</p><p>顺序表的定义及其特点；</p><p>链式表的定义及其特点；</p><p>线性表的应用。</p><p><strong>考试要求</strong></p><p>掌握线性表的逻辑结构，以及基本操作；</p><p>掌握用顺序存储结构对线性表基本操作的实现；</p><p>掌握链式存储结构对线性表基本操作的实现；</p><p>掌握链式存储结构的实现技术，比如单向链表、双向链表、单循环链表、双向循环链表以及带头节点的链表；</p><p>具有在实际中选取不同存储结构的判断能力。</p><h4 id="四、栈和队列"><strong>四、栈和队列</strong></h4><p><strong>考试内容</strong></p><p>栈和队列的定义；</p><p>顺序栈和链式栈的定义及其特点；</p><p>顺序队列和链式队列的定义及其特点；</p><p>栈和队列的应用。</p><p><strong>考试要求</strong></p><p>掌握栈、队列的逻辑结构，以及基本操作；</p><p>掌握顺序存储结构对栈和队列基本操作的实现；</p><p>掌握链式存储结构对栈和队列基本操作的实现；</p><p>掌握顺序存储结构中实现循环队列的具体要求；</p><p>理解递归调用和栈之间的关系；</p><p>掌握栈和队列的经典应用。</p><h4 id="五、二叉树、树和森林"><strong>五、二叉树、树和森林</strong></h4><p><strong>考试内容</strong></p><p>二叉树、树和森林的定义；</p><p>二叉树的实现（包括顺序存储结构和链式存储结构）、二叉树的遍历；</p><p>二叉树结构下的应用及扩展，例如二叉检索树、2-3-4树、B树、B+树、Huffman编码以及堆；</p><p>平衡二叉树的定义、平衡因子的定义以及平衡二叉树的旋转操作；</p><p>树和森林的存储结构、树和森林的遍历以及森林与二叉树的转换；</p><p>森林结构的应用，例如并查集。</p><p><strong>考试要求</strong></p><p>掌握二叉树、树和森林的定义以及它们之间的异同点；</p><p>掌握二叉树的四种遍历，并具有能够依赖遍历完成对二叉树进行操作的能力；</p><p>理解二叉树采用顺序存储结构和链式存储结构的差异性；</p><p>掌握利用二叉树及其扩展下的检索技术；</p><p>掌握Huffman编码、堆的实现及应用；</p><p>理解平衡二叉树的意义；</p><p>掌握平衡二叉树的旋转操作；</p><p>掌握树、森林能够采用的各种存储方式的差异性；</p><p>掌握树和森林与二叉树的转换；</p><p>掌握树、森林在遍历方面和二叉树的不同以及相关性；</p><p>理解并查集的意义，以及掌握并查集的基本操作的实现。</p><h4 id="六、图"><strong>六、图</strong></h4><p><strong>考试内容</strong></p><p>图的定义；</p><p>图的实现（包括邻接矩阵和邻接表）和基本操作；</p><p>图的两种遍历；</p><p>图的基本应用，包括最小支撑树、最短路径、拓扑排序和关键路径。</p><p><strong>考试要求</strong></p><p>掌握图的定义，包括完全图、连通图、简单路径、有向图、无向图、无环图等，明确理解图和二叉树、树和森林这种结构之间的异同点；</p><p>掌握图采用邻接矩阵和邻接表进行存储的差异性；</p><p>掌握广度优先遍历和深度优先遍历；</p><p>掌握最小支撑树（Prim算法、Kruskal算法）、最短路径（Dijkstra算法、BellmanFord算法、Floyd算法）、拓扑排序以及关键路径的实现过程。</p><h4 id="七、查找"><strong>七、查找</strong></h4><p><strong>考试内容</strong></p><p>查找的定义；</p><p>查找的如下算法：顺序查找法、折半查找法、散列（Hash）技术。</p><p><strong>考试要求</strong></p><p>理解查找的定义；</p><p>掌握对查找算法进行衡量的一些指标：平均查找长度、成功查找的查找长度、不成功查找的查找长度；</p><p>掌握顺序查找法和折半查找法，并理解二者之间的异同点；</p><p>掌握散列技术，包括散列函数、散列表、散列冲突的发生及其解决方法、以及负载因子；</p><p>理解不同查找技术的优缺点。</p><h4 id="八、排序"><strong>八、排序</strong></h4><p><strong>考试内容</strong></p><p>排序的定义，包括内排序和外排序；</p><p>排序的稳定性定义；</p><p>直接插入排序、冒泡排序、简单选择排序、Shell排序、快速排序、堆排序、归并排序、基数排序、K路归并排序的排序过程。</p><p><strong>考试要求</strong></p><p>理解内排序和外排序的区别；</p><p>掌握排序的稳定性；</p><p>对直接插入排序、冒泡排序、简单选择排序、Shell排序、快速排序、堆排序、归并排序、基数排序这些算法，掌握其在时间复杂度、空间复杂度以及是否稳定等方面的特点；</p><p>了解K路归并的外排序算法；</p><p>具有在不同的应用需求下，能够根据各种排序算法特点选择合适排序算法的能力。</p><h4 id="九、矩阵和串"><strong>九、矩阵和串</strong></h4><p><strong>考试内容</strong></p><p>矩阵和串的定义；</p><p>特殊矩阵的压缩存储、稀疏矩阵的三元组表示法；</p><p>串的模式匹配。</p><p><strong>考试要求</strong></p><p>掌握特殊矩阵的压缩存储方法；</p><p>掌握稀疏矩阵的三元组表示法以及相应的操作；</p><p>掌握多维数组和一维数组的映射；</p><p>掌握模式匹配的两个算法：Brute-Force和KMP。</p><h3 id="程序设计基础"><strong>程序设计基础</strong></h3><p><strong>一、基本输入输出</strong></p><p><strong>考试内容</strong></p><p>控制台形式的输入语法；</p><p>控制台形式的输出语法；</p><p><strong>考试要求</strong></p><p>掌握对不同类型数据的控制台输入方法；</p><p>掌握对不同类型数据的控制台输出方法，包括一些输出格式。</p><p><strong>二、数据类型及运算</strong></p><p><strong>考试内容</strong></p><p>相应编程语言内置的数据类型的使用；</p><p>相应编程语言内置的运算符的使用；</p><p>相应编程语言对自定义数据类型的语法。</p><p><strong>考试要求</strong></p><p>掌握语言内置的数据类型的正确定义、声明和使用；</p><p>掌握语言内置的运算符的正确使用；</p><p>具有自定义数据类型的能力。</p><p><strong>三、语句</strong></p><p><strong>考试内容</strong></p><p>顺序语句、选择语句和循环语句。</p><p><strong>考试要求</strong></p><p>掌握相应语言对顺序语句、选择语句和循环语句的语法以及运用。</p><p><strong>四、函数</strong></p><p><strong>考试内容</strong></p><p>函数的语法定义；</p><p>函数的嵌套调用，特别包括递归调用。</p><p><strong>考试要求</strong></p><p>掌握相应语言对函数定义的语法；</p><p>掌握递归思想，具有能够合理使用函数递归调用完成算法设计与实现的能力。</p>]]></content>
    
    
    
    <tags>
      
      <tag>考研</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>树的应用</title>
    <link href="/2023/10/17/%E6%A0%91%E7%9A%84%E5%BA%94%E7%94%A8/"/>
    <url>/2023/10/17/%E6%A0%91%E7%9A%84%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1>树的应用</h1><h2 id="用栈遍历二叉树">用栈遍历二叉树</h2><h3 id="前序遍历">前序遍历</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PreOrderStack</span><span class="hljs-params">(BiTree root)</span></span><br><span class="hljs-function"></span>&#123;<br>    stack&lt;RecursionState&gt; S;<br><br>    <span class="hljs-built_in">push</span>(S, root);<br><br>    RecursionState top;<br><br>    <span class="hljs-keyword">while</span> (!S.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        top = S.<span class="hljs-built_in">top</span>();<br><br>        <span class="hljs-keyword">switch</span> (top-&gt;satge)<br>        &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:                 <span class="hljs-comment">// 第一次访问时使用父结点</span><br>                <span class="hljs-built_in">visit</span>(top-&gt;T);<br>                <span class="hljs-keyword">break</span>;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:                 <span class="hljs-comment">// 第一次访问后立刻第二次访问, 将左子树入栈</span><br>                <span class="hljs-built_in">push</span>(S, top-&gt;T-&gt;lchild);<br>                <span class="hljs-keyword">break</span>;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:                 <span class="hljs-comment">// 第三次访问时左子树已遍历, 将右子树入栈</span><br>                <span class="hljs-built_in">push</span>(S, top-&gt;T-&gt;rchild);<br>                <span class="hljs-keyword">break</span>;<br><br>            <span class="hljs-keyword">default</span>:                <span class="hljs-comment">// 第四次访问时右子树已遍历, 出栈</span><br>                <span class="hljs-built_in">pop</span>(S);<br><br>                top = <span class="hljs-literal">NULL</span>;<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (top)<br>            top-&gt;satge++;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="中序遍历">中序遍历</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InOrderStack</span><span class="hljs-params">(BiTree root)</span></span><br><span class="hljs-function"></span>&#123;<br>    stack&lt;RecursionState&gt; S;<br><br>    <span class="hljs-built_in">push</span>(S, root);<br><br>    <span class="hljs-keyword">while</span> (!S.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        RecursionState top = S.<span class="hljs-built_in">top</span>();<br><br>        <span class="hljs-keyword">switch</span> (top-&gt;satge)<br>        &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:                 <span class="hljs-comment">// 第一次访问, 将左子树入栈</span><br>                <span class="hljs-built_in">push</span>(S, top-&gt;T-&gt;lchild);<br>                <span class="hljs-keyword">break</span>;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:                 <span class="hljs-comment">// 第二次访问时左子树已遍历, 使用父结点 </span><br>                <span class="hljs-built_in">visit</span>(top-&gt;T);<br>                <span class="hljs-keyword">break</span>;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:                 <span class="hljs-comment">// 第二次访问后立刻第三次访问, 将右子树入栈</span><br>                <span class="hljs-built_in">push</span>(S, top-&gt;T-&gt;rchild);<br>                <span class="hljs-keyword">break</span>;<br><br>            <span class="hljs-keyword">default</span>:                <span class="hljs-comment">// 第四次访问时右子树已遍历, 出栈</span><br>                <span class="hljs-built_in">pop</span>(S);<br><br>                top = <span class="hljs-literal">NULL</span>;<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (top)<br>            top-&gt;satge++;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="后序遍历">后序遍历</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PostOrderStack</span><span class="hljs-params">(BiTree root)</span></span><br><span class="hljs-function"></span>&#123;<br>    stack&lt;RecursionState&gt; S;<br><br>    <span class="hljs-built_in">push</span>(S, root);<br><br>    <span class="hljs-keyword">while</span> (!S.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        RecursionState top = S.<span class="hljs-built_in">top</span>();<br><br>        <span class="hljs-keyword">switch</span> (top-&gt;satge)<br>        &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:                 <span class="hljs-comment">// 第一次访问时将左子树入栈</span><br>                <span class="hljs-built_in">push</span>(S, top-&gt;T-&gt;lchild);<br>                <span class="hljs-keyword">break</span>;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:                 <span class="hljs-comment">// 第二次访问时左子树已遍历, 将右子树入栈</span><br>                <span class="hljs-built_in">push</span>(S, top-&gt;T-&gt;rchild);<br>                <span class="hljs-keyword">break</span>;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:                 <span class="hljs-comment">// 第三次访问时右子树已遍历, 使用父结点</span><br>                <span class="hljs-built_in">visit</span>(top-&gt;T);<br>                <span class="hljs-keyword">break</span>;<br><br>            <span class="hljs-keyword">default</span>:                <span class="hljs-comment">// 第三次访问后立刻第四次访问, 出栈</span><br>                <span class="hljs-built_in">pop</span>(S);<br><br>                top = <span class="hljs-literal">NULL</span>;<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (top)<br>            top-&gt;satge++;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="线索二叉树">线索二叉树</h2><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>链式二叉树</mtext><mi>n</mi><mtext>个结点</mtext><mo>⇒</mo><mn>2</mn><mi>n</mi><mtext>个指针</mtext><mo separator="true">,</mo><mtext>除根结点</mtext><mo separator="true">,</mo><mtext>每个指针被</mtext><mn>1</mn><mtext>个指针所指</mtext></mrow><annotation encoding="application/x-tex">链式二叉树 n 个结点 \Rightarrow 2n 个指针, 除根结点, 每个指针被1个指针所指</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">链式二叉树</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个结点</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个指针</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">除根结点</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">每个指针被</span><span class="mord">1</span><span class="mord cjk_fallback">个指针所指</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>空指针个数</mtext><mo>:</mo><mn>2</mn><mi>n</mi><mo>−</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mi>n</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">空指针个数: 2n - (n - 1) = n + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">空指针个数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></p><h3 id="结构">结构</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ThreadNode</span><br>&#123;<br>    ElemType data;<br><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ThreadNode</span>* lchild, * rchild;                <span class="hljs-comment">// 左线索指向前驱，右线索指向后继</span><br><br>    <span class="hljs-type">int</span> ltag, rtag;                                     <span class="hljs-comment">// 标签是线索的布尔值</span><br>&#125;<br>ThreadNode, * ThreadTree;<br></code></pre></td></tr></table></figure><h3 id="两点之间线索化">两点之间线索化</h3><p>函数聚焦于当前结点，当前结点若为根，则没有上一个结点</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV4AAADvCAYAAAC6yrx+AAAAAXNSR0IArs4c6QAAGs10RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJhcHAuZGlhZ3JhbXMubmV0JTIyJTIwbW9kaWZpZWQlM0QlMjIyMDIzLTA3LTE4VDA3JTNBMTglM0ExMi44ODhaJTIyJTIwYWdlbnQlM0QlMjJNb3ppbGxhJTJGNS4wJTIwKFdpbmRvd3MlMjBOVCUyMDEwLjAlM0IlMjBXaW42NCUzQiUyMHg2NCklMjBBcHBsZVdlYktpdCUyRjUzNy4zNiUyMChLSFRNTCUyQyUyMGxpa2UlMjBHZWNrbyklMjBDaHJvbWUlMkYxMTQuMC4wLjAlMjBTYWZhcmklMkY1MzcuMzYlMjBFZGclMkYxMTQuMC4xODIzLjgyJTIyJTIwZXRhZyUzRCUyMjh1VUZEVU14eW5kbnpIdnZ2QmJwJTIyJTIwdmVyc2lvbiUzRCUyMjIxLjYuMiUyMiUzRSUwQSUyMCUyMCUzQ2RpYWdyYW0lMjBuYW1lJTNEJTIyJUU3JUFDJUFDJTIwMSUyMCVFOSVBMSVCNSUyMiUyMGlkJTNEJTIyejB6ZEZiVGVwSkhxSXJRazB4b1klMjIlM0UlMEElMjAlMjAlMjAlMjAlM0NteEdyYXBoTW9kZWwlMjBkeCUzRCUyMjYwMCUyMiUyMGR5JTNEJTIyMzQ5JTIyJTIwZ3JpZCUzRCUyMjElMjIlMjBncmlkU2l6ZSUzRCUyMjEwJTIyJTIwZ3VpZGVzJTNEJTIyMSUyMiUyMHRvb2x0aXBzJTNEJTIyMSUyMiUyMGNvbm5lY3QlM0QlMjIxJTIyJTIwYXJyb3dzJTNEJTIyMSUyMiUyMGZvbGQlM0QlMjIxJTIyJTIwcGFnZSUzRCUyMjElMjIlMjBwYWdlU2NhbGUlM0QlMjIxJTIyJTIwcGFnZVdpZHRoJTNEJTIyODI3JTIyJTIwcGFnZUhlaWdodCUzRCUyMjExNjklMjIlMjBtYXRoJTNEJTIyMCUyMiUyMHNoYWRvdyUzRCUyMjAlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlM0Nyb290JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjIwJTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyMCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyaTRlQU03eTZQMG5sY3ZmRE9GSjMtMSUyMiUyMHZhbHVlJTNEJTIyY3VyJTIyJTIwc3R5bGUlM0QlMjJlbGxpcHNlJTNCd2hpdGVTcGFjZSUzRHdyYXAlM0JodG1sJTNEMSUzQmFzcGVjdCUzRGZpeGVkJTNCJTIyJTIwdmVydGV4JTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMjElMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIweCUzRCUyMjM3MCUyMiUyMHklM0QlMjIyODAlMjIlMjB3aWR0aCUzRCUyMjgwJTIyJTIwaGVpZ2h0JTNEJTIyODAlMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJpNGVBTTd5NlAwbmxjdmZET0ZKMy0yJTIyJTIwdmFsdWUlM0QlMjJwcmUlMjIlMjBzdHlsZSUzRCUyMmVsbGlwc2UlM0J3aGl0ZVNwYWNlJTNEd3JhcCUzQmh0bWwlM0QxJTNCYXNwZWN0JTNEZml4ZWQlM0JzdHJva2VDb2xvciUzRCUyMzAwMDAwMCUzQmRhc2hlZCUzRDElM0IlMjIlMjB2ZXJ0ZXglM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyMSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjB4JTNEJTIyNDgwJTIyJTIweSUzRCUyMjE3MCUyMiUyMHdpZHRoJTNEJTIyODAlMjIlMjBoZWlnaHQlM0QlMjI4MCUyMiUyMGFzJTNEJTIyZ2VvbWV0cnklMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteENlbGwlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMmk0ZUFNN3k2UDBubGN2ZkRPRkozLTMlMjIlMjB2YWx1ZSUzRCUyMiUyMiUyMHN0eWxlJTNEJTIyZW5kQXJyb3clM0RjbGFzc2ljJTNCaHRtbCUzRDElM0Jyb3VuZGVkJTNEMCUzQiUyMiUyMGVkZ2UlM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyMSUyMiUyMHNvdXJjZSUzRCUyMmk0ZUFNN3k2UDBubGN2ZkRPRkozLTIlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIwd2lkdGglM0QlMjI1MCUyMiUyMGhlaWdodCUzRCUyMjUwJTIyJTIwcmVsYXRpdmUlM0QlMjIxJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyMzkwJTIyJTIweSUzRCUyMjM0MCUyMiUyMGFzJTNEJTIyc291cmNlUG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjQ0MCUyMiUyMHklM0QlMjIyOTAlMjIlMjBhcyUzRCUyMnRhcmdldFBvaW50JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhHZW9tZXRyeSUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyaTRlQU03eTZQMG5sY3ZmRE9GSjMtNSUyMiUyMHZhbHVlJTNEJTIyJTIyJTIwc3R5bGUlM0QlMjJlbmRBcnJvdyUzRGNsYXNzaWMlM0JodG1sJTNEMSUzQnJvdW5kZWQlM0QwJTNCZXhpdFglM0QwJTNCZXhpdFklM0QxJTNCZXhpdER4JTNEMCUzQmV4aXREeSUzRDAlM0IlMjIlMjBlZGdlJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMjElMjIlMjBzb3VyY2UlM0QlMjJpNGVBTTd5NlAwbmxjdmZET0ZKMy0xJTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhHZW9tZXRyeSUyMHdpZHRoJTNEJTIyNTAlMjIlMjBoZWlnaHQlM0QlMjI1MCUyMiUyMHJlbGF0aXZlJTNEJTIyMSUyMiUyMGFzJTNEJTIyZ2VvbWV0cnklMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjMzMCUyMiUyMHklM0QlMjI0MDAlMjIlMjBhcyUzRCUyMnNvdXJjZVBvaW50JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhQb2ludCUyMHglM0QlMjIzNDAlMjIlMjB5JTNEJTIyMzkwJTIyJTIwYXMlM0QlMjJ0YXJnZXRQb2ludCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14R2VvbWV0cnklM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteENlbGwlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMmk0ZUFNN3k2UDBubGN2ZkRPRkozLTYlMjIlMjB2YWx1ZSUzRCUyMiUyMiUyMHN0eWxlJTNEJTIyZW5kQXJyb3clM0RjbGFzc2ljJTNCaHRtbCUzRDElM0Jyb3VuZGVkJTNEMCUzQmVudHJ5WCUzRDAlM0JlbnRyeVklM0QwLjI1JTNCZW50cnlEeCUzRDAlM0JlbnRyeUR5JTNEMCUzQmVudHJ5UGVyaW1ldGVyJTNEMCUzQiUyMiUyMGVkZ2UlM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyMSUyMiUyMHRhcmdldCUzRCUyMmk0ZUFNN3k2UDBubGN2ZkRPRkozLTIlMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIwd2lkdGglM0QlMjI1MCUyMiUyMGhlaWdodCUzRCUyMjUwJTIyJTIwcmVsYXRpdmUlM0QlMjIxJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyMzQwJTIyJTIweSUzRCUyMjM5MCUyMiUyMGFzJTNEJTIyc291cmNlUG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjQ0MCUyMiUyMHklM0QlMjIyOTAlMjIlMjBhcyUzRCUyMnRhcmdldFBvaW50JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDQXJyYXklMjBhcyUzRCUyMnBvaW50cyUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyMzYwJTIyJTIweSUzRCUyMjI0MCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRkFycmF5JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhHZW9tZXRyeSUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyaTRlQU03eTZQMG5sY3ZmRE9GSjMtNyUyMiUyMHZhbHVlJTNEJTIyaWYlMjZhbXAlM0JuYnNwJTNCJTIwY3VyJTIwbm8lMjAlMjZsdCUzQmJyJTI2Z3QlM0JsZWZ0JTIwY2hpbGQlMjIlMjBzdHlsZSUzRCUyMnRleHQlM0JodG1sJTNEMSUzQnN0cm9rZUNvbG9yJTNEbm9uZSUzQmZpbGxDb2xvciUzRG5vbmUlM0JhbGlnbiUzRGNlbnRlciUzQnZlcnRpY2FsQWxpZ24lM0RtaWRkbGUlM0J3aGl0ZVNwYWNlJTNEd3JhcCUzQnJvdW5kZWQlM0QwJTNCJTIyJTIwdmVydGV4JTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMjElMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIweCUzRCUyMjI4MCUyMiUyMHklM0QlMjIyNjAlMjIlMjB3aWR0aCUzRCUyMjEwMCUyMiUyMGhlaWdodCUzRCUyMjQwJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214Q2VsbCUyMGlkJTNEJTIyaTRlQU03eTZQMG5sY3ZmRE9GSjMtOCUyMiUyMHZhbHVlJTNEJTIyJTIyJTIwc3R5bGUlM0QlMjJlbmRBcnJvdyUzRGNsYXNzaWMlM0JodG1sJTNEMSUzQnJvdW5kZWQlM0QwJTNCZXhpdFglM0QxJTNCZXhpdFklM0QxJTNCZXhpdER4JTNEMCUzQmV4aXREeSUzRDAlM0IlMjIlMjBlZGdlJTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMjElMjIlMjBzb3VyY2UlM0QlMjJpNGVBTTd5NlAwbmxjdmZET0ZKMy0yJTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhHZW9tZXRyeSUyMHdpZHRoJTNEJTIyNTAlMjIlMjBoZWlnaHQlM0QlMjI1MCUyMiUyMHJlbGF0aXZlJTNEJTIyMSUyMiUyMGFzJTNEJTIyZ2VvbWV0cnklMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteFBvaW50JTIweCUzRCUyMjQ0MCUyMiUyMHklM0QlMjIzMjAlMjIlMjBhcyUzRCUyMnNvdXJjZVBvaW50JTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhQb2ludCUyMHglM0QlMjI1OTAlMjIlMjB5JTNEJTIyMjgwJTIyJTIwYXMlM0QlMjJ0YXJnZXRQb2ludCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14R2VvbWV0cnklM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteENlbGwlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMmk0ZUFNN3k2UDBubGN2ZkRPRkozLTklMjIlMjB2YWx1ZSUzRCUyMiUyMiUyMHN0eWxlJTNEJTIyZW5kQXJyb3clM0RjbGFzc2ljJTNCaHRtbCUzRDElM0Jyb3VuZGVkJTNEMCUzQmVudHJ5WCUzRDEuMDIyJTNCZW50cnlZJTNEMC42NzUlM0JlbnRyeUR4JTNEMCUzQmVudHJ5RHklM0QwJTNCZW50cnlQZXJpbWV0ZXIlM0QwJTNCJTIyJTIwZWRnZSUzRCUyMjElMjIlMjBwYXJlbnQlM0QlMjIxJTIyJTIwdGFyZ2V0JTNEJTIyaTRlQU03eTZQMG5sY3ZmRE9GSjMtMSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjB3aWR0aCUzRCUyMjUwJTIyJTIwaGVpZ2h0JTNEJTIyNTAlMjIlMjByZWxhdGl2ZSUzRCUyMjElMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhQb2ludCUyMHglM0QlMjI1OTAlMjIlMjB5JTNEJTIyMjgwJTIyJTIwYXMlM0QlMjJzb3VyY2VQb2ludCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyNDkwJTIyJTIweSUzRCUyMjI3MCUyMiUyMGFzJTNEJTIydGFyZ2V0UG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteEdlb21ldHJ5JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjJpNGVBTTd5NlAwbmxjdmZET0ZKMy0xMCUyMiUyMHZhbHVlJTNEJTIyaWYlMjBwcmUlMjBhbmQlMjAlMjZsdCUzQmJyJTI2Z3QlM0JubyUyMHJpZ2h0JTIwY2hpbGQlMjIlMjBzdHlsZSUzRCUyMnRleHQlM0JodG1sJTNEMSUzQnN0cm9rZUNvbG9yJTNEbm9uZSUzQmZpbGxDb2xvciUzRG5vbmUlM0JhbGlnbiUzRGNlbnRlciUzQnZlcnRpY2FsQWxpZ24lM0RtaWRkbGUlM0J3aGl0ZVNwYWNlJTNEd3JhcCUzQnJvdW5kZWQlM0QwJTNCJTIyJTIwdmVydGV4JTNEJTIyMSUyMiUyMHBhcmVudCUzRCUyMjElMjIlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteEdlb21ldHJ5JTIweCUzRCUyMjQ5MCUyMiUyMHklM0QlMjIzMDUlMjIlMjB3aWR0aCUzRCUyMjEzMCUyMiUyMGhlaWdodCUzRCUyMjMwJTIyJTIwYXMlM0QlMjJnZW9tZXRyeSUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRm14Q2VsbCUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRnJvb3QlM0UlMEElMjAlMjAlMjAlMjAlM0MlMkZteEdyYXBoTW9kZWwlM0UlMEElMjAlMjAlM0MlMkZkaWFncmFtJTNFJTBBJTNDJTJGbXhmaWxlJTNFJTBBZoFuFgAAIABJREFUeF7tfQl4VFW29aqEwEsIk0kLDxQDCc2gGGYMjYCiCI9BGmyaQVpEoKEZGkVlMMrQCDi0jYjCL5jGZgZBkIcyqg99TIEgiOCQAM30QCuGQAgCSer/Ntwjl6IqVbfq1r3n3rvP9/Ep4Qz7rH1qZdc+56zjAhdGgBFgBBgBQxFwGToaD8YIMAKMACMAJl5eBIwAI8AIGIwAE6/BgPNwjAAjwAgw8fIaYAQYAUbAYASYeA0GnIdjBHRAIBVAs/Lly9fp3LnzseXLl58CcPujjz76xxMnTlQH4HryySd3jxw58iCAc2lpaY+cPn3ak5eXd/TChQvvAzisgw3cRRgIMPGGAR43ZQQMQuABAD96PJ7bALQeM2ZMv8uXL99Zp06dim3btkWjRo2umVFYWIiYmJhrfzweD1yu6x/v3bt34/Tp0/j+++9x//33/19aWtou+nGLFi1qZWZmfgeA/v6lQXPhYeg3I6PACDACciIQHR3du3bt2qNq1qz5n/3797/9iSeeiNPL0qKiImzatAmffvrp5d27d/84ZcqUl9u1a/euy+Xy6DUG9+MfASZeXh2MgFwINPN4PEUAntq5c+eAixcvxrdv394oC/OPHDnywQMPPFDh+PHjSwCsNWpgp43DxOs0j/N8ZUXgT8nJyb3r16/fYNmyZXeVL1/eNDsXLFiAlStXHj979uzne/fufcI0Q2w8MBOvjZ3LU7MGAh6Pp1H//v2X33///b8dMmSINEZnZ2cjJSVlFYCpLpfrBIBcaYyzuCFMvBZ3IJtvXQRiYmIaXblypQ+A52WfRbt27Q5+8cUXH5aUlLwku61WsI+J1wpeYhvthkC7OnXqjOvTp0/jyZMn326FyX377bd4/fXXf962bdveH374oTeAn61gt6w2MvHK6hm2y64I/LZhw4brRo4c+dvBgwdbbo579+5F06ZNJ7tcrkmWM14ig5l4JXIGm2JvBDweD+2Y/evs2bM9qlatavXJrq5ateraH3/88V9Wn4gZ9jPxmoE6j+k4BO69994J+/fv7wmgiR0mT5c1/vznP7s//fTTdadPnx5ohzkZOQcmXiPR5rEciUBSUtKSTp06dX7nnXcq2g2AESNGnN+xY8e7WVlZz9ltbpGcDxNvJNHlvh2PQOPGjV9v3br1n2fNmhVvYzD+D8B/uVyur2w8R12nxsSrK5zcGSNwAwGPx5MCYAuAuxyAy7+fe+65Qa+//jrNl0sABJh4eYkwAhFAoFGjRo327dv3nl1yusFANHz48LPvv//+Py9evDg+mPpOrsPE62Tv89wjhcCQbt26jf/ggw+SSCnMKeXnn39G3759T2zcuHEigH86Zd6hzJOJNxTUuA0j4B+BZg0bNlw8e/bs37Zp08ZxOJEE5ZdffrmEpCsdN3kNE2bi1QAWV2UEAiEwfPjwCS1atHj5T3/6U6Cqdv/3ji6Xa6PdJxnq/Jh4Q0WO2zECXgh4PB76PH0DoD6Dg8MxMTF/LSoq2sxY3IoAEy+vCkbgZgToBALpEFzQCMxdHo/nL1YQvNE4r5CqnzhxAt27d8/OysoiXYe9IXVi40ZMvDZ2Lk8tJASWAviD0rIAwHkAeYok4o8A3ABGePdMlySmT5/ep3dv4hkuhMCbb76JN954Y/nx48cZFK8lwcTLnxFG4GYE6HbZBgBNAZT1AucqgAP00KTXz7u0a9duzmeffXYHg3kzAtOnT987YcIEb7wcDxMTr+OXAAPgB4GPATwEQJwHuwJgJ4C23vW7dOkyvU+fPuP69u3LYPpG4AGXy/U5g3MDASZeXg2MwM0IdKP3zgC0AlBJId4SADlKpEuph5uKx+NZA+BRBtIvAmtdLtdwAPQMPRd+ZZjXACNwDYEEhWxJZYtyuBnKn2LlM0Jkex+Ab32QLr2tvo9x9I/A5s2bMWjQoJXHjx/vxThdR4AjXl4JTkbgdwCIbOmPINv/VQChaPcnANFKyuEzH0DV692796KlS5dSPphLKQikpaXl7Ny5kzbZ9jBQTLy8BpyJgCDbRACkp0Ck6/2QI1072wpgAIDFvmCKiop6ccyYMS+8+uqr5ZwJY/CzTk9P/2XGjBlPFhcXLwu+lX1rcsRrX9/yzG5GoK4S2VL+9kuFbD8KABKdUjjpr079+vW/mD9/futWrSgdzKU0BH766Sf85je/+aPL5VrBSHHEy2vA/gioN8tEOuE7Paa9du3aTd26dXtYj74c0sdSl8vFRz84x+uQ5e68afrbLNMVCY/Hc045+aBrv3bt7OjRoxdq165NKRzHC6ZzqsGuq9yZ8ypts0xXRDwez/0Atunaqc07W79+PUaNGrXuyJEj9C3E0YWJ19Hut83kg9ks03OyrtTU1AM7duy4JzY2Vs9+bd0X6fW2bdv20MGDB++29USDmBwTbxAgcRUpEQhls0yvibTs2LHjyk8++eROvTp0Sj+DBw/+bv78+XTZRJc8u1VxY+K1queca3fENss0QDpg+PDhb86ePdt2rwZrwCDUqv92uVxJoTa2SzsmXrt40t7zoPO2Ip2gvllmyqw9Hk+FH3/88fztt99uyvg2GLSiy+XSKrtpg2nfmAITr63cabvJGLZZpgU5j8fD14S1AKaqe/z4cTz33HPDVqxYMTfELmzRjInXFm603SSM3izTBKDH4+kKINDlC019OqXyli1bMHz48M++//77B50yZ1/zZOJ1svflmrvYLCPSJb0EuuwgJbk1aNBg98cff9z8rrvosQpjS35+PgYMGIDU1FQsWrQIOTk5ePXVVymKxI4dO+i41jWDXC4XVq1ahZMnT6J///7X6jVv3vzaz+6807w9wcOHD+Oxxx7LPHToUAtjkZNrNCZeufzhRGtk2CzThHvDhg0PfP755w1vu+02Te30qCyI99SpU78SK5HtrFmzrnVPJEtE3KNHD9DzOz179sS4ceOu/X3YsGE4c+YMFixYgEqVSAPI+FJYWIhevXptWb9+vaNv/DHxGr/2eERAqs0yrQ5p2LDhoX379tWPjibhMmOLIF7Sh6AolwoRau3atdG6detrES+RcFpaGlavXo0ZM2b8GuVSRPzSSy8hIyPD1KgXwIsul2uqscjJNRoTr1z+sLs1Um6WaQXd4/FMBDBJazs96gvipciWolhv4lUTKxEvRbzqkpycjIULF14jZrPKgAEDNr3//vsdAXjMssHscZl4zfaAM8ZXb5ZR7pakGL1lGC2DhMfjSQfwNzMM9o541X+niNebeIlkzUwteGNUVFSExo0bf3fw4MF6ZuAny5hMvLJ4wn52WGazTCv0X3/99cS6detOiokRz7Fp7SH0+oJoqQci1EOHDv2aXqCfqYnXO8f72muvYeXKlaZusJ0/f56i7W8OHTp0T+goWL8lE6/1fSjbDGizjCJcSivoKsMoy0Tr1auX9eGHHzauV8/4oE0Qb7Vq1TB37vWjsHRSgdIOvnK49DNxqkGGNENeXh6effbZBRkZGU/K4k8z7GDiNQN1+41p6c0yre6oW7fuloULF7an41lGF185XqNt0GG8bi6Xa50O/Vi2CyZey7pOCsNtsVmmFcnatWsvnD179uOdOnXS2jTs+jYh3sYul8vRmrxMvGF/FBzZgfdmGaUUSEPBEYW0GgDc8sy7IyYf5iTXrFmDkSNH9jx58uTqMLuydHMmXku7z1DjbbtZFgqKHo/nGADjr66FYqxEbYYPH37+nXfeeVrJ/0tkmbGmMPEai7cVR7P9ZlkoTsnMzNzcrFmzh0Jp6+Q2HTt2PLFx48ZBADY5GQcmXid73//cHbVZFsoSuPvuuw9v27atnhnXhkOxV4Y2V69exZgxY1a/9dZbN9/qkME4g21g4jUYcMmHc+RmWSg+SUlJ+WjixIldH3/88VCaO7lNG5fL9YWTAaC5M/E6fQVcn7+jN8tCXAJPZ2RkTH3yySfjQmzvxGb5LpershMn7j1nJl7nrgLeLAvT9x6PZwmAPmF245jmffv2/Xbp0qWdARxxzKT9TJSJ13krgDfLdPK5x+PpBWC5Tt3ZupuPP/6Ybqx9cfjw4Ta2nmiQk2PiDRIoi1fjzbIIOLBcuXK/XbRo0b7HHnuM0w0B8E1PT/9l+vTpfyspKZkWAVdYrksmXsu5TJPBvFmmCS7Nles1a9bs48zMzFqaWzqswVdfffV+48aNXwBwymFT9zldJl57rgLeLDPIr3fdddfSESNG9H722WcNGtGywzj+mrDac0y8ll3Htxiu3izbrtwMWmuf6Uk7k2bz58+f/dRTT7WU1kKTDcvMzNzaokULvmyi8gMTr8mLUofhebNMBxDD6cLj8bQD8Fk4fdi17ZIlS5Cenr7p6NGjj9h1jqHMi4k3FNTMb8ObZeb74CYLPB7PBwAcfyPL2y0dO3Y8vnHjxmdINlgyl5lqDhOvqfBrHpw3yzRDZkyDu++++61+/fqNGD9+vDEDWmCUb775Bn379p154MABEsXhwqkGy60B3iyT32VtGzVq9N7SpUuTzXiZQlJ4XnW5XGMltc1UszjiNRX+UgfnzTJ5fePTsqioqPELFiz4S//+/e+wmOmRMPcwgLtdLpdjXxIuDVQm3kgsufD65M2y8PAztbXH46FNpA2mGmHy4PPnz8ecOXOWZ2Vl9TbZFGmHZ+KVwzW8WSaHH3SxwuPxTDp79uzEqlWr6tKflTrZsmULnn766R8OHjw4DMBWK9lupK1MvEaifetYvFlmLv6RGv2hDh06vLdy5cqaFStWjNQYUvY7d+7cncOGDXsXwD+lNFASo5h4zXEEb5aZg7tho8bFxU179NFHBy9ZsoS+zTilZAEgvd2LTplwqPNk4g0VOe3teLNMO2aWblG3bt2/HThw4E9ly5ataemJBGH86tWrf+zRo8fvXC5XdhDVHV+FiTfyS0BslrUG8J5ylfe7yA/LI8iAQPfu3Ue++eab6TVr1rxdBnsiYcOgQYMK165du8ftdreNRP927JOJNzJe5c2yyOBqtV5J9Pu/27Rpk96+ffsxL730UhWrTSCQvTNnzvx5ypQp3+bl5bUC0AXA+kBt+N/56Z9IrIEoAJ8qKvsU4f5vJAbhPqVH4BrpCjKqXr16RuvWrbvNmzcvwUYbbll79ux5onnz5gcB3DRf6b1jsoEc8ervgBQAWwAk6d8192gRBHySUHx8/N9mzpzZ/qmnnkqzyDx8mrl7927Ex8dvaNCgwWNeG2lMvkE6lok3SKA0VOsA4HkALIOnATQbVQ1IPnTOF8BEK8551qxZmDdvHp3THeXnokjA+Vtx3nrbzMSrN6LAnwE0BTBE/665R8kRCJp0+vTpMy02Nnboiy++WCUpyRpfjrZs2fLvoUOH/pCTk/MigJ2l+CJoHCT3Z8TMY+LVH9pXAOQBmKF/19yjxAhoJpuoqKj01NTUJ2bMmJHSoQN9UZK6vApgnAbtBc14SD17nY1j4tUZUAArAZA2K78+qz+2svYYDsk09ng8JCSTLpue76JFi/Cvf/3reJkyZWZ98sknfw8B/HBwCWE46zRh4tXfV3sBDAWQqX/X3KOECOhGLuPGjftLVlbW+E6dOt0xevRoU6c6e/bsPTNnzjybk5MzJ8wjYrrhYyogOg/OxKszoAB+BlAHQK7+XXOPkiEQCVLpVrNmzb73339/rUWLFtFtx0pGzHnDhg3Izs6+NGLECDoC+Z7L5fpKx3EjgZOO5hnfFROvvpgnAPgBwG36dsu9SYhApMmkosfjuQDgDy+++OKzJSUl9zZq1Khcly5dEBsbqxscbrf7fM+ePc/99NNP//7uu+82lpSUvA3gnG4D3Ogo0nhFwOTIdcnEqy+2zQHQV7Nm+nbLvUmGgNEkkkrHE1NSUtr06dOnYMqUKXEAGq9bt+4ut9uNlJQUNGnSBOXLl/8VpqKiIhQUFKBcuXK/EvWcOXPw9ddfn//+++8vTJgwYdmDDz641uVyfQGgHoBvDcDYaNwMmFJoQzDxhoabv1Z/BPAYRSn6dsu9SYSANOSRkJAwKjY2tm358uUr9e7d++tJkyadBBDboUOHrmfOnCE9yqvPP//8qscff5xUw04kJia2zs3NvQzgGIDNJmEqDX4mzf/asEy8+qI/DgDdx+d3pvTFVZbemDT08YTjcWTi1WchiV5IAJqii7n6dsu9SYCA48lCZx84Gk8mXn1XE2k00EHzTfp2y72ZjICjSSKC2DsWVyZefVdVDgB67JDFoPXF1czeHEsOBoHuSHyZePVbXSQHWQygjPJf/XrmnsxCwJGkYALYjsOZiVe/VUZykBsBJOvXJfdkIgKOIwMTsaahHYU3E69+q43lIPXD0uyeHEUCZoOtGt8xuDPx6rfqWA5SPyzN7MkxH34zQS5lbEfgz8Sr3+pjOUj9sDSrJ0d86M0CV8O4tvcDE6+G1RCgKstB6oelGT3Z/sNuBqhhjGlrfzDxhrEyvJqyHKR+WBrdk60/5EaDqeN4tvULE69+q4TlIPXD0siebPvhNhLECI5lS/8w8eqzYlgOUh8cje7Flh9qo0E0YDzb+YmJV59Vw3KQ+uBoZC+2+zAbCZ4JY9nKX0y8+qwgloPUB0ejerHVh9go0CQYxzZ+Y+LVZzWxHKQ+OBrRi20+vEaAJeEYtvAfE68+K4vlIPXBMdK92OJDG2mQLNC/5f0oA/GmAZgCYCCA8wAWAOiuaNoOs8AiIBNZDlJ+R1n+wyo/xIZaaGl/ykC8am/dCWAWgFH0VImhbgxvMJaDDA+/SLe29Ic00uBYuH/L+lUG4hURbzqAtwDQCQEisv4AdpSyKKjdQkUNbA2AAQDaK+3o//MBPAegNgDKwVIkXUGp0xPAalXfPQCI6Pohr/HpeW0RhVMT77YsByn3J9eyH065YZXGOkv6VybipVQDlQwALwUgXYqM1fXoZd8jKsL0R7xnVASrXjlEvKsUUt2qEK2oS31XUxE7vTCh/qXAcpDSfAZvMcSSH0p54ZTWMsv52arES0RJ5CcIVqwI7597R7zbAbzmY/lQO4qKKZqlFId3O4qsKUIW0a+6H5aDlPPzaLkPo5wwWsYqX/6epgRa9ACtVMWqxEvE2CoE4hUE6u0Ef4RNjqNIeIYqNSGia0HgLAcp1ZK+ZgyTrnw+McIib79/BuA+AC0BHDDCgGDHsCrxBhvxEklSETlercTr3c5XxMtykMGuNmPqMekag7Osowj/9wKwHECREjhR+lKaYlXipY01cfqBNuAEwW5WXvmlNMRJJVol1bBQiZc23ALleFkOUprlzJGuPK4w1ZI/AFgB4BcA/6Hs/0j1JJdViZe8KjbE6P/FqQY6yUBEORRAJoBtAMqHSbyBTjWwHKSpn7FfB+dIVw4/mGnFywBaKCeXLgGIU4wpANAawH4zjVOPLQPxyoJFqHawHGSoyOnXjklXPyyt3BN9FmOVl77ptW9RLgOglOBEWSbHxBueJ1gOMjz89GjNpKsHivbp414AlGp4HMBvAJRTiJiOm0qTbmDiDW/BsRxkePiF25pJN1wE7d0+VUXCtwOgvSEp0g1MvOEtPKvLQdIvjtS4uDj6c09xcfEdV69eve3KlSvli4qKYkpKSqKioqJKypQpc7Vs2bIXY2Jifo6Ojj5ZWFh4sLCwkBYw/aFcuhmFSdcM1K055sOKDMEeAJNlmAITb3hesJocZBMAHRMTE3vk5eU1SkpKKmjevHl0kyZN4lNSUnDnnXeiatWqqFy5MuLi4hAdHY3i4mIUFhbi3LlzOHv2LE6cOIHs7GxkZWUVZGZmFh87diy+SpUqX7ndbrpgsgFAVniQBtWaSTcomBxdiW63UrqBTjhdVOQF6DhpngyoMPGG5wUryEHWoQVYuXLlp+Li4ir27Nmz7COPPFKuTZs2qFCBpCvCKxcuXMC2bduwcePGy6tWrbpSWFh4/ty5c+8BWATgh/B6v9aaPijvAHhB6YtJVwdQbdwFKRsS2T6iIlu6aSpVkYV41dKQpamSiSNkJKJDu5R0SJo0HoJRMhPHwnxdolCPT1+/fV1Hpt+g3rfYZJaDpMh27KVLl+4bOHCgq1+/fuVatqQLPJEtu3btwuLFiy9nZGR4YmNjd7rdbvITRcKhFNoo2QWAPjgkgMSkGwqK9m9TTxXdHlUR7hVZp2414qWrwlToum6wZC2wL4141f7xdyvOF/HKKAfZOTEx8eVKlSoljR07ttLgwYNNW3vz5s3DK6+8kp+fn3/M7XZTxLpeozGk0zwWQAwAyqfTofguIfSjcViubhEEKJVAfxqryFaKzbNA+MlKvL4uRwxRbqXRnOhrbF1FQpI2d4S4jXq+4iIF/Yz+XaiOkWPIWXS05HkfJK6OeKmtkISkSxo1VLoNsslBpiYmJs6Mj49vPHXq1Er9+vUL5HvD/n3x4sVIT0/PLygo2Od2u0dr2FmmI0C1ABQqh+HpGw7dFOTiXASaqqJb+jZE32CXWQ0OGYn3DtV14ENeEo1CNYyu8pYW8fqq91cAdLOFitDuFRKP9DPxCoaaeEkcRy0JKaQjaSNJJjnIyTExMeNnzJgR88wzz0i7Bt944w2MGzfu6tWrV6cHcZidjgJ9CSBemRCRLx2Op1+g9Mt2grQTZcP0RoBuoFH6jwImCn6IbOlPtt4DGdWfjMTb20t5TP3Vn6JeEjYvjXj9pRS8BW7Umr6+iJdewSA9CG9JSPF3GeQgmyQkJCxq1apVjbfffrsinUqQvdCpiOHDh5/fvn37qdzcXPog+TsFIdIMZVVzIsGTYiUCvk32ubJ9YSPQRkW465TPIv3X8kVW4qVIVF1EOoFIORDx+srFUl/ehByIeCknSWkGIQnp3d5sOchBAObNmTMHQ4eSNIW1yty5czFs2LVHPygJPd+H9SLNQGRLVz5/UlJMlGqQSuLPWshLby3dNhPRLeX2RXT7f9JbrsFAWYlXkKv3VIJJNQSKeEXEGoh4A0W8pslBxsbG/qNatWoDV6xYUbFZs2Ya3C1X1T179qBXr17nz5w5k3Hp0qWnVdZRmoFU535Uka0lNk3kQthS1nRSCJfy+IJsP7XUDDQYKyPxqnO8QvJR5FmDSTXQ9IVMpEhJUMqAcoJ/UaUOAhEv5YFpPCG4TseZ1DleU+QgExIS1qSmprZbs2ZNJT3O4WpYKxGpSueAu3fvnr9///7Pc3Nz6QymKES+TLYRQV2aTpMUsqUIlwRuBOHSa+O2LjISL53JVZ9qUJ9aUEe8IqVADvI+1eBLylGcagg24iXipaI+1UDych8qr1HQ9UMidsOuzCYmJn728MMPN1uyZInYcLLN4uzbt2/B5s2b97jd7gdsMymeiD8EHlMIt61CtnRKiU4oOKbIQrxWBNxQOUgi3a5du7bIyMgQGqNWxKxUmwcOHFi4bt263Uy+tnMtTege1TGww6rotsSWsw0wKSbe0LxuqBwkpRc6dOjQ3o6Rrjf8FPlu2rRpq1faITQvcSuzEYhWkW19Fdl+Y7ZhZo/PxBuaB+is71wAdJg7ooU20tLS0p7cunUrpU8cUdq3b5+/Y8eOf3ptuDli7jaZJN1NFwI1/6MQ7gc2mZsu02DiDQ1Go+QgB9WqVevv+/fvr2iHjbRgoaYNt9TU1PNHjx4d4+eoWbBdcT3jEKioOgZG3wjFRtkx40ywzkhMvKH5ygg5SJJw3JuZmQkrHxkLDV6Ajpo1b05fLK59qzBCajJUU53e7kFVdEsnfYhwP3E6KIHmz8QbCCHf/x5xOciEhIRDU6dOrW/FyxGhQXprK7pkkZ6efjg3N7eBXn1yP7og8J+q6JZuEoroli65cAkCASbeIEDyUSXScpCTu3btOvqjjz6ir2+OLt26dTu/bt26mUFoOzgaJ4Mm31Uh3G4qsqWXvLloRICJVyNgSvVIykGmxsTEZObk5MRYQXshNPiCb0XaDsnJySSsQ3kHvlARPHR61SQxKHGFl67tiuiWRIu4hIgAE6924CIqB0nndcePH99OZpUx7ZCF14JUzaZPn/45n+8ND0eNrUkXhQj3PhXZ7tXYB1f3gwATr/alEUk5yM5JSUmLjx496pijY8HCX6tWrfxjx46RyLBWMfVgh+B6QCPVRtk+RSeDbpVx0RkBJl7tgEZMDjIxMfGrmTNnpsokYq4dnsi0IDH10aNH73e73UQOXPRDoJyKbEl0XqQSvtNvCO7JGwEmXu1rIlJykB2Tk5OXZWdnc7TrxycpKSn5OTk59BU41DfctHvbvi1+pyLcjQrh0isrXAxAgIlXO8gRkYOk3O60adPamflGmnYojG1Bb7hNmDCBc72hw07i8eJGWXlVdHsy9C65ZSgIMPFqRy0ScpB1ypcvf6CgoOA/tJvjrBbx8fG/XLx4kV4f1uPpeKeAR+kxQbgilbDZKZOXcZ5MvNq9Egk5yMkjR44cO2vWLMq3cSkFgVGjRl1+66236FvHRAaqVARINlUcA7uoim7zGDfzEWDi1e4D3eUgK1eufHLDhg01WrYkbREupSGwa9cudOzY8dS5c+dIMJ/LrQj8XoluH1GR7XYGSi4EmHi1+SMScpBNqlev/vmpU6cqaDPFubVr1Khx4fTp0+1Yw+HXNVBPFd0eVRHulQCrRP1SN736IET/SXnv2oN4Ehd/bytKbPIN05h4tbkpEnKQE0aOHPkSpxmCd4SSbqBXiKcF38qWNUXelo7YidxtqLf7iMjoiSx6a5BegZG9MPHK7iEd7dNdDjIxMXHPggULmnbu3FlHM+3d1fr16zFgwIC9brfbui99hu4iUmsTuVt6LocId1mI3YmINx3AWwAosKDr8NQ/vXdIRTyjRYRORJ8M4HkArwGg9kTWVDzKE1yUAiKbqJ762S5vE9XPe9G/0fNdq5Vnv0S0/ZCXPeonvejoWw3VK+AhQmBOM454teGuuxxkdHR0UV5eXrST9Ha1QX5rbdLrrVKlSnFxcXGZcPuySHs6+iWi2+qq6DY7TPvVqQbqKgPASypTIGwbAAAQrUlEQVTSVRMvkRyRo/oxWvp3IlkiYiJN7yiUHp0VD9Xmq2wVhE3RNRE8vaXo61FZ8U7iGSX1oe7P+/HZMKEwtjkTrza89ZaDbJ6cnLyZL01ocwLVVi5TPGzkY6ParQy7BT0GKQh3rXKFd13Yvd7oQAvx0gYdRblUiACPAPhSlZ4gAqUoloIT8fisuv/S0hfUjqJsemCWCFXdh3jgln5GOWjxWK2IfsXfdYQl8l0x8WrDWG85yEG9e/f+x9KlS233arA2WLXX7tOnT8GyZcuetuELFberyJbeLBO5W4r69C5aiFdNcGripVz7QCUv7J0+IHu9UxdiDtTHUNWEKHUgiFeQMEXJgngpn79KlVpg4tV7NUjcn65ykHFxcW9NmjRpxHPP0driogWB1157DZMmTZpdWFg4Uks7iev+l0K4f1CR7WcRtlcL8YqIVxAe/Z0iXm/iVZOmP/O9I2PviNcX8XLEG+HFIGv3Qg6SohBdnqSma8Lvvvtuu9//no5ectGCwIcffoghQ4ZY/fowidKIjbJcFeFe0IJFGHW1EC8NQxEpvQYiTj/Qz9TE653jpYiCfpGI1IMwVU284hib6J9SDb6Ilzbc/OWCKb9sqcKphuDdpbscZJUqVX7YtGlTihPfVAsedt816U22Dh06ZOfl5dUJty8T2hMZUe6WcrgilbDbBDu0EC+lOkRqQJxA8JXDpZ+JUw3+0gzq0wlU5+9KfphSFnSywh/xep9qKADwobKxZwJ8oQ/JxBs8drrLQcbHx+ceOnToNjNfmtixYwf69++PnJwcdO/eHQsWLMDWrVuxcOHCa/9fqVIl0Nf6I0eOYMaMGXSMC3SqgOqsWrUKPXpQ8GJ8oZcpGjRo8HNBQQFdarFCuUcV3R5WEa4u354iCIClc6kRxCWsrpl4g4dPdznIsmXL/uJ2u8uZdZSMyGvgwIGYMmUK0tLSMGzYMNSuXZue2imVeKtVq4Y5c2hvxLxC5J+YmHj5ypUrMgsLUVpKpBLqq8j2G/OQ0zwyE69myAI3YOINjJGoobscZFRUVPGVK1eioqPp82l8Wb169U0EKyzw/rl3xNuqVSuYvSFYXFyMsmXLlpSUlJgDXunuItENQbj/oxDuB8Z7mEeUFQEm3uA9Ewk5SI/HQxd+zClEqNu3b/81pRAs8VJqwqwUgxopl+va8pVlDVNkKM7cku6tyN0eM8e7PKrMCMiyaGXGSNimuxykVSJeSkFQETleGYhXooj3QVV0S7+ciXA/scKCZhvNQ4CJN3jsdZeDNDvHSxtro0aNwqxZs37N8RIcDz/8MJ5//vlraYg77rgDPXv2RNOmTaUiXpNzvHRtV0S3V5UbZUS4PwW/nLimkxFg4g3O+5GQg4QMpxoon0vESkWcaqCTDBTlzp07F82bN0ebNm1w8eJFqYjXpFMN3RTC7apKJXwR3BKyRS31RQe19oJ6cqVdEw72CrHor7SNPXVf3kfQRHtpFcyYeIP7PERCDpKEXvgcb3D431LLwHO8dE5YRLenVIR7KUTT7d7MKOJV4+jvFwITr8VXm+5ykIQH31wLfVUYcHOtj0K4dEJBbJRlhW6x4S0FAdIlg+7K6OLiA/1VrasgdBK8o1iqMx5AFQBfK1oJ1AfdYKuo/J2CEmpPeiOkbEaFbrORjOQYlVYDPahJWgtU359cpFq/gcYR6mT+JCnFrTl1xEvjC0F3aaUjOeIN7vOguxwkDctaDcGB76tWhLQaSFBcHAPbpxDu4tCtNLWluEH2/xRVMbWkIl37FXKO3tKL3pHkqyp9XnVkOUOpKK7y0jl3wo4K9e1vXPUVY/VYQgyH+hO/NP4K4GWlkhDQEfYIgve+7UZ2CSlKaaUjmXiD+2zoLQcpRmV1suDwv6WWjupk9MCoIFvSThDR7XchmiZLM2/N29KEaLxFa8Qc/InZvADgTZV2L32lF1q+1FZoOQipSHEFmAjfF/H6y+WqBXlIktJ7HO+Il/R9aWzppSOZeIP7mOgtBylGZT3e4PC/pVYQerz0YSdyuAuAL9GZ36kId6PyYaWvpnYp3rlWNfEOUQmPU3rBX17WO3cq/v6O8uySEDL3R4ikwavuwx/x+svFehNyIOKlXwiUZqCol4RzpL11x8Qb3MdMVzlI9ZD8AkVwDlDXCuIFCpJY/AhAEQD1lWI6nUIbZfSHXnUQ0S3lH+1WSiNebwWw0iJetWCNINFAEa8/qchQI14RwQYiXo54bbSK6UoqfYB1k4NUY8NvrmlfKQHeXLsPwDYAMQBOK+9ykcCRSCcIst2sfWRLtSiNeLXkeH0RL+VbS8vxaiVeAlaIf4gcL6UMJgD4iyp1EIh4yS51NM85Xkst2ZuN1V0O0gsLfmVY4+Io5ZXhugB2AqisdJkH4CwA2tkXhEs/c0IpjXgpvRDsqQZ/xKs+1UCyjqlepxrUr1KIPkQbwt9bo1ct+Sj+XWz8BRvxEvFSUZ9qkFI6klMNgT+CustBeg3ZpHr16p+fOnWqQmBTuAYhUKNGjQunT59uB0B9vOs3AOhad00VSiS5OBXAREYuogj4S1VEdFArd87EG9h7ustBeg9ZuXLlkxs2bKjRsiUdGeVSGgK7du1Cx44dT507d45euxWF0kAkRkMv4Xqv6UIA9Hz5PxhZ3RDwjk79CZ7rNqDdOmLiDexR3eUgfQw5eeTIkWNnzZpFR5u4lIKAkmYgn3hHsZ8qTzKRjgJFv3To/woA0lKgDTaKfP/G4DICMiDAxBvYC5GQg/QetU758uUPFBQUyCzqHRgpA2rEx8f/cvHixXsB/BDEcHSKoSqAegA2AKDolwsjYDoCTLyBXaC7HKSvIen68LRp09oNHjw4sEUOrTFv3jxMmDDB6g9cOtR7PG01Aky8gdeD7nKQfobsmJycvCw7O5vyZ1x8IKBcmuitRK+MESNgWQSYeEt3XUTkIP0NmZiY+NXMmTNT+/XrZ9kFFSnDFy9ejNGjR+93u92kp8CFEbA0Aky8pbsvInKQpQzZOSkpafHRo0c56vUCqVatWvnHjh2j30jrLf2JY+MZAYneq5LVGRGRgyxtspTrHT9+fLtnnnlGVkwMt+uNN97A9OnTObdrOPI8YKQQ4Ii3dGQjIgcZwJmpMTExmTk5OTF33kk3JJ1d6KWJ5OTkq1evXqVvH6TLyoURsDwCTLyluzBScpCBFs7krl27jv7oo4/oiqWjS7du3c6vW7duJt8+c/QysN3kmXhLd2mk5CADLqSEhIRDU6dOrT906NCAde1agd58S09PP5ybm0uiLlwYAdsgwMRbuisjJgcZxApqAmBvZmYmmjVrFkR1e1WhN9XooU0ATb00Gew1UZ6NIxFg4vXv9ojKQQa52gbVqlXr7/v3769YoYJzNHRIbzc1NfX80aNH6c2u+UFixdUYAcsgwMTr31WRloMMapHExsb+Iy0t7cmtW7c65ohZ+/bt83fs2PHPS5cuPR0USFyJEbAYAky8/h0WaTnIoJdKQkLCmg4dOrRfsmQJveRq69K3b9+CTZs2bc3NzRUv49p6vjw5ZyLAxOvf7xGXg9Sy5CpUqHCgU6dOKcuXL4/V0s5KdQcOHFi4bt263W63+wEr2c22MgJaEWDi9Y+YEXKQwfqrM4D/rlChwtddunSpZcfIlyLdzZs372HSDXZJcD0rI8DE6997RshBBrN2rpEugC50XZbSDqmpqe3WrFlTyQ4bbrSR1r179/z9+/d/zumFYJYD17EDAky8/r1oiBxkgEV0E+mKurThVq1atYErVqyoaOWjZnRkrFevXufPnDmTwRtpdqATnkOwCDDx+kfKKDlIfxb4JF1V5UEA5s2ZMwdWvGRBlyOGDaMHZUECxHxkLNhPLNezBQJMvL7daKgcpA8TApGuaNIkISFhUatWrWq8/fbbFa2g7UDaC8OHDz+/ffv2U7m5uY/z5Qhb8AhPQiMCTLy+ATNaDlJtRbCkq24zOSYmZvyMGTNiZFY1I5WxcePGkeDNdNZe0PhJ5eq2QoCJ17c7DZeDVMwIhXTFDFITExNnxsfHN546dWolmcTUScQ8PT09v6CgYJ/b7R7NKmO24hCeTAgIMPH6Bs0MOchwSPemiDkxMfHlSpUqJY0dO7aSmW+40Rtpr7zySn5+fv4xt9v9AouYh/AJ5Sa2RICJ17dbjZaD1It01bPpmJiYOPbSpUv3DRw40NWvX79yLVu2jPgi3rVrFxYvXnw5IyPDExsbu9PtdtN5aHrhlwsjwAgoCDDx+l4KRspBRoJ01bOqA+DxypUrPxUXF1exZ8+eZR955JFybdq0gR7ngOkc7rZt27Bx48bLq1atulJYWHj+3Llz7wFYFOQT7PxhZAQchwATr2+XGyUHGWnS9Z4dSU1SJNwjLy+vUVJSUkHz5s2jmzRpEp+SkgI6FVG1alVUrlwZcXFxiI6ORnFxMQoLC3Hu3DmcPXsWdCohOzsbWVlZBZmZmcXHjh2Lr1Klyldut3u1EtlmOe5TxBNmBDQiwMR7K2BGyUEaTbq+lgad3kiNi4ujP/cUFxffcfXq1duuXLlSvqioKKakpCQqKiqqpEyZMlfLli17MSYm5ufo6OiThYWFBwsLC+kZHvqTqXHNcXVGwPEIMPHeugSMkIOUgXQdv/gZAEbALASYeG9FPtJykEy6Zq12HpcRkAQBJt5bHRFJOUgmXUkWPpvBCJiJABPvrehHSg6SSdfMlc5jMwISIcDEe6szIiEHyaQr0aJnUxgBsxFg4r3VA3rLQTLpmr3KeXxGQDIEmHhvdYiecpBMupIteDaHEZABASbem72gpxwkk64MK5xtYAQkRICJ92an6CUHyaQr4WJnkxgBWRBg4r3ZE3rIQTLpyrK62Q5GQFIEmHhvdky4cpBMupIudDaLEZAJASbem70Rjhwkk65MK5ttYQQkRoCJ92bnhCoHyaQr8SJn0xgB2RBg4r3ZI6HIQTLpyraq2R5GQHIEmHhvOCgUOUgmXckXOJvHCMiIABPvDa9olYNk0pVxRbNNjIAFEGDiveEkLXKQTLoWWNxsIiMgKwJMvDc8MxQAPY0zJICzmHRlXc1sFyNgEQSYeG84Khg5SCZdiyxsNpMRkBkBJt4b3gkkB8mkK/NKZtsYAQshwMR7w1mlyUEy6VpoUbOpjIDsCDDx3vCQkIPMBvAOgBeUf2LSlX0Vs32MgMUQYOK97jAhB9kOwC4A2wG0B8Cka7EFzeYyAlZAgIn3upeEHOR6AGMBxAAgpbIVALoAoJ9zYQQYAUZAFwSYeK/DKOQgmwKoBaAQQByAXgBo040LI8AIMAK6IcDEex1KkoOsC+AxAPEKukS+sQC2AsgEMEE31LkjRoARcDQCTLzX3U9ykDUAPASgrGpFFAEoViLg2xy9UnjyjAAjoBsCTLzXoSQ5yLsBVANAZHsZwE8AFimphgO6Ic4dMQKMgOMRYOK9vgROAEgEcFZFtvsdvzoYAEaAEYgIAky8AMlBvghgLYB9EUGZO2UEGAFGQIUAEy8vB0aAEWAEDEaAiddgwHk4RoARYASYeHkNMAKMACNgMAJMvAYDzsMxAowAI8DEy2uAEWAEGAGDEWDiNRhwHo4RYAQYASZeXgOMACPACBiMABOvwYDzcIwAI8AIMPHyGmAEGAFGwGAEmHgNBpyHYwQYAUaAiZfXACPACDACBiPAxGsw4DwcI8AIMAJMvLwGGAFGgBEwGIH/D/ig3cJ9+vh9AAAAAElFTkSuQmCC" style="cursor:pointer;max-width:100%;" onclick="(function(img){if(img.wnd!=null&&!img.wnd.closed){img.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==img.wnd){img.wnd.postMessage(decodeURIComponent(img.getAttribute('src')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);img.wnd=window.open('https://viewer.diagrams.net/?client=1&page=0&edit=_blank');}})(this);"/><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">ThreadTree <span class="hljs-title">BuildThread</span><span class="hljs-params">(ThreadTree pre, ThreadTree cur)</span>  <span class="hljs-comment">// 建立 pre, cur 之间的线索</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (cur-&gt;lchild == <span class="hljs-literal">NULL</span>)                            <span class="hljs-comment">// cur 的左线索指向 pre</span><br>    &#123;<br>        cur-&gt;ltag = <span class="hljs-number">1</span>;<br>        cur-&gt;lchild = pre;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (pre &amp;&amp; pre-&gt;rchild == <span class="hljs-literal">NULL</span>)                     <span class="hljs-comment">// pre 的右线索指向 cur</span><br>    &#123;<br>        pre-&gt;rtag = <span class="hljs-number">1</span>;<br>        pre-&gt;rchild = cur;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> cur;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="二叉树的线索化">二叉树的线索化</h3><p>*序通用框架，线索化二叉树后将*序最后结点的右子树指针线索化以线索化所有结点</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CreateThread</span><span class="hljs-params">(F Thread, ThreadTree root)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>)<br>        <span class="hljs-keyword">return</span>;<br><br>    ThreadTree last = <span class="hljs-built_in">Thread</span>(<span class="hljs-literal">NULL</span>, root);<br><br>    <span class="hljs-keyword">if</span> (last-&gt;rchild == <span class="hljs-literal">NULL</span>)                       <span class="hljs-comment">// 若*序最后结点右子树为空则线索化指向 NULL</span><br>        last-&gt;rtag = <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>*序递归线索化</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">ThreadTree <span class="hljs-title">PreThread</span><span class="hljs-params">(ThreadTree pre, ThreadTree cur)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (cur)<br>    &#123;<br>        pre = <span class="hljs-built_in">BuildThread</span>(pre, cur);                    <span class="hljs-comment">// pre 在 BuildThread 中更新, 在 *hread(pre, *) 直接传递</span><br>                                                        <span class="hljs-comment">// (pre, cur) --BuildThread-&gt; (cur, *)</span><br>        <span class="hljs-keyword">if</span> (cur-&gt;ltag == <span class="hljs-number">0</span>)                             <span class="hljs-comment">// 若 cur 左子树为空, 则被 BuildThread 线索化</span><br>            pre = <span class="hljs-built_in">PreThread</span>(pre, cur-&gt;lchild);          <span class="hljs-comment">// 所以若先 BuildThread(pre, cur) 后 pre = *Thread(pre, cur-&gt;lchild)</span><br>                                                        <span class="hljs-comment">// 需判断 cur-&gt;ltag(左子树是否线索化)</span><br>        pre = <span class="hljs-built_in">PreThread</span>(pre, cur-&gt;rchild);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> pre;                                         <span class="hljs-comment">// 返回*序最后结点</span><br>&#125;<br><br><br><span class="hljs-function">ThreadTree <span class="hljs-title">InThread</span><span class="hljs-params">(ThreadTree pre, ThreadTree cur)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (cur)<br>    &#123;<br>        pre = <span class="hljs-built_in">InThread</span>(pre, cur-&gt;lchild);<br><br>        pre = <span class="hljs-built_in">BuildThread</span>(pre, cur);<br><br>        pre = <span class="hljs-built_in">InThread</span>(pre, cur-&gt;rchild);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> pre;<br>&#125;<br><br><br><span class="hljs-function">ThreadTree <span class="hljs-title">PostThread</span><span class="hljs-params">(ThreadTree pre, ThreadTree cur)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (cur)<br>    &#123;<br>        pre = <span class="hljs-built_in">PostThread</span>(pre, cur-&gt;lchild);<br><br>        pre = <span class="hljs-built_in">PostThread</span>(pre, cur-&gt;rchild);<br><br>        pre = <span class="hljs-built_in">BuildThread</span>(pre, cur);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> pre;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="说明-1">说明 1</h3><p>对于后序线索二又树的遍历，考研数据结构中出现的题目最多的是手工找出当前结点的后继，因此大家只需记住以下即可：</p><ul><li>若结点x是二叉树的根，则其后继为空</li><li>若结点x是其双亲的右孩子，或是其双亲的左孩子且其双亲没有右子树，则其后继即为双亲结</li><li>若结点x是其双亲的左孩子，且其双亲有右子树，则其后继为双亲右子树上按后序遍历列出的第一个结点。</li></ul><h3 id="说明-2">说明 2</h3><p>本节在考研数据结构选择题中涉及较多的是给出一棵二叉树，让考生指出其中一个结点的线索按照某种线索化方法所应该指向的结点<br>例如，请画出图所示二又树按照中序线索化方法线索化后，E结点的右线索的连接情况</p><p>解决这类题的方法为：先写出题目所要求的遍历方式下的结点访问序列，根据此序列找出题目要求中结点的前驱和后继</p><p>然后连接线索如图所示二叉树的中序遍历序列为D，B，E，A，C，结点E的前驱为B，后继为A，因此其右线索应该指向A</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">    <span class="hljs-variable">A</span><br>   <span class="hljs-operator">/</span> \<br>  <span class="hljs-variable">B</span>   <span class="hljs-built_in">C</span><br> <span class="hljs-operator">/</span> \<br><span class="hljs-built_in">D</span>   <span class="hljs-built_in">E</span><br></code></pre></td></tr></table></figure><h2 id="huffman-树与编码">huffman 树与编码</h2><h3 id="概念">概念</h3><ul><li><p>结点的带权路径长度: 从树的根到该结点的路径长度(经过的边数)与该结点上权值的乘积</p></li><li><p>树的带权路径长度(WPL): 树中所有叶结点的带权路径长度之和(huffman 树非叶子结点值之和)</p></li></ul><h3 id="性质">性质</h3><ol><li><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>n</mi><mtext>个结点合并</mtext><mi>n</mi><mo>−</mo><mn>1</mn><mtext>次得到</mtext><mi>n</mi><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>=</mo><mn>2</mn><mi>n</mi><mo>−</mo><mn>1</mn><mtext>个结点的huffman树</mtext></mrow><annotation encoding="application/x-tex">n个结点合并n-1次得到n + n - 1 = 2n - 1个结点的\text{huffman}树</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个结点合并</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord cjk_fallback">次得到</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">1</span><span class="mord cjk_fallback">个结点的</span><span class="mord text"><span class="mord">huffman</span></span><span class="mord cjk_fallback">树</span></span></span></span></span></p></li><li><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>huffman树的结点只能是度为</mtext><mn>0</mn><mtext>的叶子结点或度为</mtext><mn>2</mn><mtext>的分支</mtext><mspace linebreak="newline"></mspace><mo>⇒</mo><mtext>huffman编码成对出现</mtext></mrow><annotation encoding="application/x-tex">\text{huffman}树的结点只能是度为0的叶子结点或度为2的分支 \\\Rightarrow \text{huffman}编码成对出现</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">huffman</span></span><span class="mord cjk_fallback">树的结点只能是度为</span><span class="mord">0</span><span class="mord cjk_fallback">的叶子结点或度为</span><span class="mord">2</span><span class="mord cjk_fallback">的分支</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">huffman</span></span><span class="mord cjk_fallback">编码成对出现</span></span></span></span></span></p></li><li><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>m</mi><mtext>叉huffman树合并一次消灭</mtext><mi>m</mi><mo>−</mo><mn>1</mn><mtext>个结点</mtext><mo separator="true">,</mo><mi>n</mi><mtext>个结点需要消灭</mtext><mi>n</mi><mo>−</mo><mn>1</mn><mtext>个</mtext><mspace linebreak="newline"></mspace><mtext>可以补</mtext><mn>0</mn><mtext>结点保证整除</mtext><mo separator="true">,</mo><mtext>合并次数</mtext><mo>=</mo><mrow><mo fence="true">⌈</mo><mfrac><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></mfrac><mo fence="true">⌉</mo></mrow></mrow><annotation encoding="application/x-tex">m叉 \text{huffman} 树合并一次消灭 m - 1 个结点, n个结点需要消灭n-1个 \\ 可以补0结点保证整除,合并次数 = \left \lceil \frac{n - 1}{m - 1} \right \rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">m</span><span class="mord cjk_fallback">叉</span><span class="mord text"><span class="mord">huffman</span></span><span class="mord cjk_fallback">树合并一次消灭</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mord cjk_fallback">个结点</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个结点需要消灭</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">1</span><span class="mord cjk_fallback">个</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">可以补</span><span class="mord">0</span><span class="mord cjk_fallback">结点保证整除</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">合并次数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">⌈</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">⌉</span></span></span></span></span></span></span></p></li></ol><h3 id="算法">算法</h3><ul><li>huffman 树建树时每次合并当前最小权两结点</li></ul><h3 id="编码">编码</h3><ul><li>huffman 编码不能是其他 huffman 编码的前缀</li></ul><img src="image-20230811104005504.png" alt="image-20230811104005504" style="zoom:90%;" /><h3 id="代码">代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HuffmanTree</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, data</span>):<br>        n = <span class="hljs-built_in">len</span>(data)<br>        heap = []<br><br>        <span class="hljs-keyword">for</span> value, weight <span class="hljs-keyword">in</span> data:<br>            heappush(heap, Node(value, weight))<br><br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):<br>            left = heappop(heap)<br>            right = heappop(heap)<br><br>            weight = left.weight + right.weight<br>            heappush(heap, Node(<span class="hljs-string">&#x27;&#x27;</span>, weight, left, right))<br><br>        self.root = heappop(heap)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encode</span>(<span class="hljs-params">self</span>):<br>        dic = &#123;&#125;<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">node, code</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:<br>                <span class="hljs-keyword">return</span><br><br>            <span class="hljs-keyword">if</span> node.value:<br>                dic[node.value] = code<br>                <span class="hljs-keyword">return</span><br><br>            dfs(node.left, code + <span class="hljs-string">&#x27;0&#x27;</span>)<br>            dfs(node.right, code + <span class="hljs-string">&#x27;1&#x27;</span>)<br><br>        dfs(self.root, <span class="hljs-string">&#x27;&#x27;</span>)<br>        <span class="hljs-keyword">return</span> dic<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">WPL</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">node, depth</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br>            <span class="hljs-keyword">if</span> node.value:<br>                <span class="hljs-keyword">return</span> node.weight * depth<br><br>            <span class="hljs-keyword">return</span> dfs(node.left, depth + <span class="hljs-number">1</span>) + dfs(node.right, depth + <span class="hljs-number">1</span>)<br><br>        <span class="hljs-keyword">return</span> dfs(self.root, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>外部排序</title>
    <link href="/2023/10/16/%E5%A4%96%E9%83%A8%E6%8E%92%E5%BA%8F/"/>
    <url>/2023/10/16/%E5%A4%96%E9%83%A8%E6%8E%92%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<h1>外部排序</h1><h2 id="k-路归并排序">k 路归并排序</h2><h3 id="1-内存分配">1 内存分配:</h3><ul><li>k 个输入缓冲区，1 个输出缓冲区</li></ul><h3 id="2">2</h3><ol><li>硬盘有 N 个记录，内存工作区(每个段)容纳 L 个记录</li><li>硬盘每个归并段同样容纳 L 个记录，初始归并段的数量 $r = \left \lceil \frac{N}{L} \right \rceil $</li><li>对每个段的 L 个记录内部排序，组成有序的初始归并段</li></ol><h3 id="3-总共-S-left-lceil-log-kr-right-rceil-趟-k-路归并">3 总共 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mrow><mo fence="true">⌈</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mi>k</mi></msub><mi>r</mi><mo fence="true">⌉</mo></mrow></mrow><annotation encoding="application/x-tex">S = \left \lceil \log_kr \right \rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose delimcenter" style="top:0em;">⌉</span></span></span></span></span> 趟 k 路归并</h3><ol><li>k 个归并段读入 k 个输入缓冲区</li><li>归并排序从 k 个归并段选出最小记录暂存至缓冲区</li><li>缓冲区满时，写出外存</li></ol><h3 id="4-时间开销">4 时间开销</h3><ul><li>读写外存时间 + 内部排序时间 + 内部归并时间</li></ul><h3 id="5-优化">5 优化</h3><h4 id="增加归并路数-k">增加归并路数 k</h4><h5 id="代价">代价</h5><ol><li>增加相应输入缓冲区</li><li>k 个归并段选最小值需要对比 k - 1 次关键字</li></ol><h4 id="减少初始归并段数量-r">减少初始归并段数量 r</h4><h2 id="败者-锦标赛-树">败者(锦标赛)树</h2><h3 id="优化问题">优化问题</h3><blockquote><p>k 个归并段选最小值需要对比 k - 1 次关键字</p></blockquote><h3 id="k-路归并的比较次数">k 路归并的比较次数</h3><ul><li>初始归并段长度相同的 k 路归并排序中，每一趟 k 路归并的比较次数都是相同的</li></ul><h4 id="r-个归并段，每个段有-L-个记录，一趟-k-路归并，总的比较次数">r 个归并段，每个段有 L 个记录，一趟 k 路归并，总的比较次数:</h4><ul><li>总记录数: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>⋅</mo><mi>L</mi></mrow><annotation encoding="application/x-tex">r \cdot L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span></li></ul><h5 id="无优化">无优化</h5><ol><li>k 个段头的 k 个记录选出最小需要 k - 1 次比较</li><li>r * L 个记录需要选 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>⋅</mo><mi>L</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r \cdot L - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 次最小</li><li>总比较次数: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>r</mi><mo>⋅</mo><mi>L</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><mi>k</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(r \cdot L - 1) \cdot (k - 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></li></ol><h5 id="败者树优化">败者树优化</h5><ol><li><p>败者树比较次数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">⌈</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mi>k</mi><mo fence="true">⌉</mo></mrow><annotation encoding="application/x-tex">\left \lceil \log_2 k \right \rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose delimcenter" style="top:0em;">⌉</span></span></span></span></span></p></li><li><p>总比较次数: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>⋅</mo><mi>L</mi><mo>⋅</mo><mrow><mo fence="true">⌈</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mi>k</mi><mo fence="true">⌉</mo></mrow></mrow><annotation encoding="application/x-tex">r \cdot L \cdot \left \lceil \log_2 k \right \rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose delimcenter" style="top:0em;">⌉</span></span></span></span></span></p></li></ol><h2 id="置换-选择排序">置换-选择排序</h2><h3 id="生成-初始归并段">(生成)初始归并段</h3><h3 id="优化问题-2">优化问题</h3><blockquote><p>减少初始归并段数量 r</p></blockquote><h3 id="图示">图示</h3><p><img src="image-20231017225935160.png" alt="image-20231017225935160"></p><h2 id="最佳归并树">最佳归并树</h2><h3 id="k-路归并排序的最优方案">k 路归并排序的最优方案</h3><h3 id="磁盘-I-O-次数">磁盘 I/O 次数</h3><p><img src="image-20231017230315296.png" alt="image-20231017230315296"></p><h3 id="k-叉哈夫曼树">k 叉哈夫曼树</h3><h4 id="补虚段">补虚段</h4><p><img src="image-20231017230824887.png" alt="image-20231017230824887"></p>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>散列表</title>
    <link href="/2023/10/13/%E6%95%A3%E5%88%97%E8%A1%A8/"/>
    <url>/2023/10/13/%E6%95%A3%E5%88%97%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h1>散列表</h1><h2 id="概念">概念</h2><img src="image-20231012205154671.png" alt="image-20231012205154671" style="zoom:150%;" /><h3 id="复杂度-O-1"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>复杂度</mtext><mo>:</mo><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">复杂度: O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">复杂度</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></h3><h3 id="聚集">聚集</h3><ul><li>聚集(堆积): 不同关键字射向同一散列地址</li><li>处理冲突方法 选取不当的结果</li></ul><h2 id="装填因子-负载因子">装填因子(负载因子)</h2><h3 id="定义">定义</h3><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>散列表的装填因子</mtext><mi>α</mi><mo>=</mo><mfrac><mtext>表中记录数</mtext><mtext>散列表长度</mtext></mfrac></mrow><annotation encoding="application/x-tex">散列表的装填因子 \alpha = \frac{表中记录数}{散列表长度}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">散列表的装填因子</span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">散列表长度</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">表中记录数</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><h2 id="平均查找长度">平均查找长度</h2><h3 id="影响因素">影响因素</h3><ul><li>平均查找长度 与装填因子 直接相关</li><li>平均查找长度 直接 受到堆积现象影响</li><li>平均查找长度 受 散列函数，冲突解决策略 影响</li><li>平均查找长度 不直接 依赖于 已有表项个数，表长</li></ul><h3 id="ASL">ASL</h3><ul><li>链地址法查找失败只计算与关键字的比较次数，不包含扫描到空指针的那一次</li></ul><h4 id="例题">例题</h4><h5 id="条件">条件</h5><p>装填因子 0.7 的散列表存储 (7, 8, 30, 11, 18, 9, 14)，H(key) = (key * 3) mod 7，线性探测法处理冲突</p><h5 id="表长">表长</h5><ul><li>装填因子 0.7 ，7 个键，表长为 10</li></ul><h5 id="计算位置">计算位置</h5><ul><li>7 * 3 % 7 = 0</li><li>8 * 3 % 7 = 3</li><li>30 * 3 % 7 = 6</li><li>11 * 3 % 7 = 5</li><li>18 * 3 % 7 = 5     5 + 1 = 6     5 + 2 = 7</li><li>9 * 3 % 7 = 6       6 + 1 = 7     6 + 2 = 8</li><li>14 * 3 % 7 = 0     0 + 1 = 1</li></ul><h5 id="散列表">散列表</h5><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">下标|<span class="hljs-string"> 0</span>|<span class="hljs-string"> 1</span>|<span class="hljs-string"> 2</span>|<span class="hljs-string"> 3</span>|<span class="hljs-string"> 4</span>|<span class="hljs-string"> 5</span>|<span class="hljs-string"> 6</span>|<span class="hljs-string"> 7</span>|<span class="hljs-string"> 8</span>|<span class="hljs-string"> 9</span>|<br>关键|<span class="hljs-string"> 7</span>|<span class="hljs-string">14</span>|<span class="hljs-string">  </span>|<span class="hljs-string"> 8</span>|<span class="hljs-string">  </span>|<span class="hljs-string">11</span>|<span class="hljs-string">30</span>|<span class="hljs-string">18</span>|<span class="hljs-string"> 9</span>|<span class="hljs-string">  </span>|<br></code></pre></td></tr></table></figure><h5 id="成功查找长度">成功查找长度</h5><ul><li>只包含 7 个键</li></ul><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">下标|<span class="hljs-string"> 7</span>|<span class="hljs-string"> 8</span>|<span class="hljs-string">30</span>|<span class="hljs-string">11</span>|<span class="hljs-string">18</span>|<span class="hljs-string"> 9</span>|<span class="hljs-string">14</span>|<br>次数|<span class="hljs-string"> 1</span>|<span class="hljs-string"> 1</span>|<span class="hljs-string"> 1</span>|<span class="hljs-string"> 1</span>|<span class="hljs-string"> 3</span>|<span class="hljs-string"> 3</span>|<span class="hljs-string"> 2</span>|<br></code></pre></td></tr></table></figure><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>S</mi><mi>L</mi><mo>=</mo><mfrac><mn>12</mn><mn>7</mn></mfrac></mrow><annotation encoding="application/x-tex">ASL = \frac{12}{7}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">7</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><h5 id="失败查找长度">失败查找长度</h5><ul><li>mod 7 代表哈希只会等概率映射到 0 到 6 位置</li></ul><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">下标|<span class="hljs-string"> 0</span>|<span class="hljs-string"> 1</span>|<span class="hljs-string"> 2</span>|<span class="hljs-string"> 3</span>|<span class="hljs-string"> 4</span>|<span class="hljs-string"> 5</span>|<span class="hljs-string"> 6</span>|<br>次数|<span class="hljs-string"> 3</span>|<span class="hljs-string"> 2</span>|<span class="hljs-string"> 1</span>|<span class="hljs-string"> 2</span>|<span class="hljs-string"> 1</span>|<span class="hljs-string"> 5</span>|<span class="hljs-string"> 4</span>|<br></code></pre></td></tr></table></figure><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>S</mi><mi>L</mi><mo>=</mo><mfrac><mn>18</mn><mn>7</mn></mfrac></mrow><annotation encoding="application/x-tex">ASL = \frac{18}{7}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">7</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">18</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><h2 id="散列函数">散列函数</h2><h3 id="设计规则">设计规则</h3><img src="image-20231012210038959.png" alt="image-20231012210038959" style="zoom:150%;" /><h3 id="除留余数法">除留余数法</h3><p><img src="image-20231012210159971.png" alt="image-20231012210159971"></p><img src="image-20231012210219615.png" alt="image-20231012210219615" /><h3 id="直接定址法">直接定址法</h3><img src="image-20231012210430064.png" alt="image-20231012210430064" style="zoom:150%;" /><h3 id="数字分析法">数字分析法</h3><img src="image-20231012210646476.png" alt="image-20231012210646476" style="zoom:150%;" /><h3 id="平方取中法">平方取中法</h3><img src="image-20231012212336272.png" alt="image-20231012212336272" style="zoom:150%;" /><h2 id="拉链法">拉链法</h2><h3 id="插入">插入</h3><img src="image-20231012215523070.png" alt="image-20231012215523070" style="zoom:150%;" /><h4 id="优化-有序链表">优化: 有序链表</h4><h3 id="查找长度-查找中比对关键字次数">查找长度: 查找中比对关键字次数</h3><h3 id="删除-查找-→-删除结点">删除: 查找 → 删除结点</h3><h2 id="开放定址法">开放定址法</h2><h3 id="原理">原理</h3><ul><li>开放定址: 散列定址对 同义词 和 非同义词 开放</li></ul><img src="image-20231012220947822.png" alt="image-20231012220947822" style="zoom:150%;" /><h3 id="探查第-i-次冲突的散列地址">探查第 i 次冲突的散列地址</h3><img src="image-20231012221328280.png" alt="image-20231012221328280" style="zoom:150%;" /><h4 id="代码">代码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">linear_search</span>(<span class="hljs-params">key, i</span>):<br>    <span class="hljs-keyword">return</span> i<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">square_search</span>(<span class="hljs-params">key, i</span>):<br>    <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <br>    <span class="hljs-keyword">if</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> -(i // <span class="hljs-number">2</span>) ** <span class="hljs-number">2</span><br>    <br>    <span class="hljs-keyword">return</span> ((i + <span class="hljs-number">1</span>) // <span class="hljs-number">2</span>) ** <span class="hljs-number">2</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hash_search</span>(<span class="hljs-params">key, i</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">hash2</span>(<span class="hljs-params">key</span>):<br>        <span class="hljs-keyword">if</span> key % <span class="hljs-number">7</span> == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">8</span><br>        <br>        <span class="hljs-keyword">return</span> key % <span class="hljs-number">7</span><br>    <br>    <span class="hljs-keyword">return</span> i * hash2(key)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HashList</span>:                         <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, size</span>):<br>        self.size = size<br>        self.array = [-<span class="hljs-number">1</span>] * size          <span class="hljs-comment"># -1: 空</span><br><br>        self.prime = max_prime(size)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">hash</span>(<span class="hljs-params">self, key</span>):                <span class="hljs-comment"># key: 自然数</span><br>        <span class="hljs-keyword">return</span> key % self.prime<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">self, key, search</span>):<br>        h = self.<span class="hljs-built_in">hash</span>(key)<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.size):      <span class="hljs-comment"># 一个查找次数上界</span><br>            d = search(key, i)<br>            nxt = (h + d) % self.size<br><br>            <span class="hljs-keyword">if</span> self.array[nxt] == -<span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>               <span class="hljs-comment"># -1: 不存在</span><br><br>            <span class="hljs-keyword">if</span> self.array[nxt] == key:<br>                <span class="hljs-keyword">return</span> nxt<br><br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">self, key, search</span>):<br>        h = self.<span class="hljs-built_in">hash</span>(key)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.size):<br>            d = search(key, i)<br>            nxt = (h + d) % self.size<br><br>            <span class="hljs-keyword">if</span> self.array[nxt] == -<span class="hljs-number">1</span>:<br>                self.array[nxt] = key<br><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;insert <span class="hljs-subst">&#123;key&#125;</span> at <span class="hljs-subst">&#123;nxt&#125;</span>&#x27;</span>)<br>                <span class="hljs-keyword">return</span> nxt<br><br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="删除">删除</h3><h4 id="逻辑删除">逻辑删除</h4><img src="image-20231012231435805.png" alt="image-20231012231435805" style="zoom:150%;" /><h4 id="优化">优化</h4><img src="image-20231012231546567.png" alt="image-20231012231546567" style="zoom:150%;" />]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>图的算法</title>
    <link href="/2023/10/13/%E5%9B%BE%E7%9A%84%E7%AE%97%E6%B3%95/"/>
    <url>/2023/10/13/%E5%9B%BE%E7%9A%84%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1>图的算法</h1><h2 id="floyd-prim">floyd &amp; prim</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdjMatrix</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n                                  <span class="hljs-comment"># default 0 and 1 to n vertex</span><br>        self.matrix = [[<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (n + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            self[i][i] = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, item</span>):<br>        <span class="hljs-keyword">return</span> self.matrix[item]<br></code></pre></td></tr></table></figure><h3 id="floyd">floyd</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">floyd</span>(<span class="hljs-params">self</span>):<br>    n = self.n<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>                self[j][k] = <span class="hljs-built_in">min</span>(self[j][k], self[j][i] + self[i][k])<br></code></pre></td></tr></table></figure><h3 id="prim">prim</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">prim</span>(<span class="hljs-params">self</span>):<br>    n = self.n<br>    size = <span class="hljs-number">0</span><br><br>    dist = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (n + <span class="hljs-number">1</span>)<br>    mst = <span class="hljs-built_in">set</span>()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">u</span>):                      <span class="hljs-comment"># 将结点加入最小生成树</span><br>        mst.add(u)<br>        dist[u] = <span class="hljs-number">0</span><br><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):       <span class="hljs-comment"># 更新最小生成树到新结点的相邻结点的距离</span><br>            dist[v] = <span class="hljs-built_in">min</span>(dist[v], self[u][v])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">next</span>():                         <span class="hljs-comment"># 选取距离最小生成树最近的结点作为下一个结点</span><br>        u = <span class="hljs-number">0</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> mst:<br>                <span class="hljs-keyword">if</span> dist[i] &lt; dist[u]:<br>                    u = i<br><br>        <span class="hljs-keyword">return</span> u<br><br>    update(<span class="hljs-number">1</span>)                           <span class="hljs-comment"># 将结点 1 置为源点</span><br><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>):              <span class="hljs-comment"># 若连通, 最小生成树有 n - 1 条边</span><br>        u = <span class="hljs-built_in">next</span>()<br><br>        <span class="hljs-keyword">if</span> u == <span class="hljs-number">0</span>:                      <span class="hljs-comment"># 剩下结点不连通</span><br>            <span class="hljs-keyword">return</span><br><br>        size += dist[u]<br><br>        update(u)<br><br>    <span class="hljs-keyword">return</span> size<br></code></pre></td></tr></table></figure><h2 id="kruskal">kruskal</h2><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>图的最小生成树唯一</mtext><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mtext>图的边权各不相同</mtext></mrow><annotation encoding="application/x-tex">图的最小生成树唯一 \iff 图的边权各不相同</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7073em;vertical-align:-0.024em;"></span><span class="mord cjk_fallback">图的最小生成树唯一</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟺</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">图的边权各不相同</span></span></span></span></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EdgeSet</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n<br>        self.edges = []<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, u, v, w</span>):<br>        <span class="hljs-keyword">if</span> u &gt; v:<br>            u, v = v, u<br>        pair = (u, v)<br><br>        self.edges.append((w, pair))<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">kruskal</span>(<span class="hljs-params">self</span>):<br>    n = self.n<br>    ufs = UFS(n)<br><br>    size = <span class="hljs-number">0</span><br>    edges = <span class="hljs-built_in">sorted</span>(self.edges)          <span class="hljs-comment"># 排序后大边在后无效, 所以不用去重</span><br><br>    <span class="hljs-keyword">for</span> w, (a, b) <span class="hljs-keyword">in</span> edges:<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ufs.is_connected(a, b):  <span class="hljs-comment"># 两结点之间尚未连通</span><br>            ufs.union(a, b)             <span class="hljs-comment"># 最小生成树中加入这条边</span><br><br>            size += w<br><br>    <span class="hljs-keyword">if</span> ufs.get_size(<span class="hljs-number">0</span>) &lt; n:             <span class="hljs-comment"># 结点不全连通</span><br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-keyword">return</span> size<br></code></pre></td></tr></table></figure><h2 id="bellmanford">bellmanford</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EdgeSet</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n<br>        self.edges = &#123;&#125;<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">iter</span>(self.edges.items())<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, a, b, w</span>):<br>        edges = self.edges<br><br>        <span class="hljs-keyword">if</span> (a, b) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> edges:<br>            edges[(a, b)] = w<br>        <span class="hljs-keyword">else</span>:<br>            edges[(a, b)] = <span class="hljs-built_in">min</span>(edges[(a, b)], w)<br></code></pre></td></tr></table></figure><h3 id="最短路">最短路</h3><h4 id="1">1</h4><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>对于边</mtext><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>松弛操作对应下面的式子</mtext><mo>:</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>d</mi><mi>i</mi><mi>s</mi><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo><mo>+</mo><mi>w</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mtext>尝试用</mtext><mi>S</mi><mo>→</mo><mi>u</mi><mo>→</mo><mi>v</mi><mo stretchy="false">(</mo><mtext>其中</mtext><mi>S</mi><mo>→</mo><mi>u</mi><mtext>的路径取最短路</mtext><mo stretchy="false">)</mo><mtext>这条路径去更新</mtext><mi>v</mi><mtext>点最短路的长度</mtext><mspace linebreak="newline"></mspace><mtext>如果这条路径更优</mtext><mo separator="true">,</mo><mtext>就进行更新</mtext><mo separator="true">,</mo><mtext>不断尝试对图上每一条边进行松弛</mtext><mspace linebreak="newline"></mspace><mtext>每进行一轮循环</mtext><mo separator="true">,</mo><mtext>就对图上所有的边都尝试进行一次松弛操作</mtext><mspace linebreak="newline"></mspace><mtext>当一次循环中没有成功的松弛操作时</mtext><mo separator="true">,</mo><mtext>算法停止</mtext></mrow><annotation encoding="application/x-tex">对于边 (u,v), 松弛操作对应下面的式子: dis(v) = \min(dis(v), dis(u) + w(u, v)) \\尝试用 S \to u \to v (其中 S \to u 的路径取最短路)这条路径去更新 v 点最短路的长度 \\如果这条路径更优, 就进行更新, 不断尝试对图上每一条边进行松弛 \\每进行一轮循环, 就对图上所有的边都尝试进行一次松弛操作 \\当一次循环中没有成功的松弛操作时, 算法停止</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">对于边</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">松弛操作对应下面的式子</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">))</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">尝试用</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord cjk_fallback">其中</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">u</span><span class="mord cjk_fallback">的路径取最短路</span><span class="mclose">)</span><span class="mord cjk_fallback">这条路径去更新</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord cjk_fallback">点最短路的长度</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">如果这条路径更优</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">就进行更新</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">不断尝试对图上每一条边进行松弛</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">每进行一轮循环</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">就对图上所有的边都尝试进行一次松弛操作</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">当一次循环中没有成功的松弛操作时</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">算法停止</span></span></span></span></span></p><h4 id="2">2</h4><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>在最短路存在的情况下</mtext><mo separator="true">,</mo><mtext>由于一次松弛操作会使最短路的边数至少</mtext><mo>+</mo><mn>1</mn><mspace linebreak="newline"></mspace><mtext>而最短路的边数最多为</mtext><mi>n</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mtext>算法最多执行</mtext><mi>n</mi><mo>−</mo><mn>1</mn><mtext>轮松弛操作</mtext><mspace linebreak="newline"></mspace><mtext>每次循环是</mtext><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo><mtext>的</mtext><mo separator="true">,</mo><mtext>总时间复杂度为</mtext><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">在最短路存在的情况下, 由于一次松弛操作会使最短路的边数至少 +1 \\而最短路的边数最多为 n-1, 算法最多执行 n-1 轮松弛操作 \\每次循环是 O(m) 的, 总时间复杂度为 O(nm)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">在最短路存在的情况下</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">由于一次松弛操作会使最短路的边数至少</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord cjk_fallback">而最短路的边数最多为</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">算法最多执行</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">1</span><span class="mord cjk_fallback">轮松弛操作</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">每次循环是</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mord cjk_fallback">的</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">总时间复杂度为</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">nm</span><span class="mclose">)</span></span></span></span></span></p><h4 id="3">3</h4><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>如果从源点出发</mtext><mo separator="true">,</mo><mtext>抵达一个负环时</mtext><mo separator="true">,</mo><mtext>松弛操作会无休止地进行下去</mtext><mspace linebreak="newline"></mspace><mtext>如果第</mtext><mi>n</mi><mtext>轮循环时仍然存在能松弛的边</mtext><mo separator="true">,</mo><mtext>说明从源点出发</mtext><mo separator="true">,</mo><mtext>能够抵达一个负环</mtext></mrow><annotation encoding="application/x-tex">如果从源点出发, 抵达一个负环时, 松弛操作会无休止地进行下去 \\如果第 n 轮循环时仍然存在能松弛的边, 说明从源点出发, 能够抵达一个负环</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">如果从源点出发</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">抵达一个负环时</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">松弛操作会无休止地进行下去</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">如果第</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">轮循环时仍然存在能松弛的边</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">说明从源点出发</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">能够抵达一个负环</span></span></span></span></span></p><h3 id="代码">代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">bellmanford</span>(<span class="hljs-params">self, a, b</span>):<br>    dist = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (self.n + <span class="hljs-number">1</span>)<br>    dist[a] = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">relax</span>():<br>        <span class="hljs-keyword">for</span> (a, b), w <span class="hljs-keyword">in</span> self:<br>            dist[b] = <span class="hljs-built_in">min</span>(dist[b], dist[a] + w)<br><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.n - <span class="hljs-number">1</span>):<br>        relax()<br><br>    <span class="hljs-keyword">return</span> dist[b]<br></code></pre></td></tr></table></figure><h3 id="边数限制的最短路">边数限制的最短路</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">edge_limit_shortest_path</span>(<span class="hljs-params">self, a, b, k</span>):<br>    dist = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (self.n + <span class="hljs-number">1</span>)<br>    dist[a] = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">relax</span>():<br>        last_dist = dist.copy()<br><br>        <span class="hljs-keyword">for</span> (a, b), w <span class="hljs-keyword">in</span> self:<br>            dist[b] = <span class="hljs-built_in">min</span>(dist[b], last_dist[a] + w)<br><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>        relax()<br><br>    <span class="hljs-keyword">return</span> dist[b]<br></code></pre></td></tr></table></figure><h2 id="dijkstra">dijkstra</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdjList</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n<br>        self.<span class="hljs-built_in">list</span> = [&#123;&#125; <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)]  <span class="hljs-comment"># default 0 and 1 to n vertex</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, item</span>):<br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">list</span>[item]<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>(<span class="hljs-params">self, a, b</span>):<br>    n = self.n<br><br>    dist = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)] * (n + <span class="hljs-number">1</span>)<br>    in_tree = [<span class="hljs-literal">False</span>] * (n + <span class="hljs-number">1</span>)<br><br>    q = []<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">d, v</span>):                         <span class="hljs-comment"># 不在最短路生成树中的顶点</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> in_tree[v] <span class="hljs-keyword">and</span> d &lt; dist[v]:  <br>            dist[v] = d                     <span class="hljs-comment"># 若距离可被更新, 则更新距离</span><br><br>            heappush(q, (d, v))             <span class="hljs-comment"># 加入堆中</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">relax</span>(<span class="hljs-params">v</span>):                           <span class="hljs-comment"># 更新相邻顶点到源点的距离</span><br>        <span class="hljs-keyword">for</span> u, w <span class="hljs-keyword">in</span> self[v].items():<br>            d = dist[v] + w<br>            push(d, u)<br><br>    push(<span class="hljs-number">0</span>, a)                              <span class="hljs-comment"># 源点入队</span><br><br>    <span class="hljs-keyword">while</span> q:<br>        d, v = heappop(q)                   <span class="hljs-comment"># 取出距离最短路生成树最近的顶点</span><br><br>        <span class="hljs-keyword">if</span> v == b:<br>            <span class="hljs-keyword">return</span> d<br><br>        in_tree[v] = <span class="hljs-literal">True</span>                   <span class="hljs-comment"># 加入最短路生成树</span><br><br>        relax(v)                            <span class="hljs-comment"># 松弛操作</span><br><br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>                               <span class="hljs-comment"># 不存在最短路</span><br></code></pre></td></tr></table></figure><h2 id="拓扑排序-关键路径">拓扑排序 &amp; 关键路径</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdjList</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n<br>        self.<span class="hljs-built_in">list</span> = [&#123;&#125; <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br>        self.in_degree = [<span class="hljs-number">0</span>] * n<br>        self.out_degree = [<span class="hljs-number">0</span>] * n<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, index</span>):<br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">list</span>[index]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_edge</span>(<span class="hljs-params">self, u, v, w</span>):<br>        <span class="hljs-keyword">if</span> v <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.<span class="hljs-built_in">list</span>[u]:<br>            self.<span class="hljs-built_in">list</span>[u][v] = w<br><br>            self.in_degree[v] += <span class="hljs-number">1</span><br>            self.out_degree[u] += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="拓扑排序">拓扑排序</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">topsort</span>(<span class="hljs-params">self</span>):<br>    n = self.n<br>    in_degree = self.in_degree<br><br>    seq = []<br>    stack = []<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">u</span>):<br>        <span class="hljs-keyword">if</span> in_degree[u] == <span class="hljs-number">0</span>:       <span class="hljs-comment"># 入度为 0 的点入栈</span><br>            stack.append(u)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):        <br>        push(i)<br><br>    <span class="hljs-keyword">while</span> stack:<br>        u = stack.pop()<br><br>        seq.append(u)               <span class="hljs-comment"># 出栈的点加入拓扑序列</span><br><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> self[u]:<br>            in_degree[v] -= <span class="hljs-number">1</span>       <span class="hljs-comment"># 删除 u -&gt; v 的边</span><br><br>            push(v)                 <span class="hljs-comment"># 判断 v 是否入栈</span><br><br>    <span class="hljs-keyword">return</span> seq<br></code></pre></td></tr></table></figure><h3 id="逆拓扑排序">逆拓扑排序</h3><ul><li>拓扑序的逆序就是逆拓扑序</li><li>anyway 下面给出两种逆拓扑排序的实现</li></ul><h4 id="栈">栈</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">rev_topsort</span>(<span class="hljs-params">self</span>):<br>    n = self.n<br>    out_degree = self.out_degree<br><br>    seq = []<br>    stack = []<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">u</span>):<br>        <span class="hljs-keyword">if</span> out_degree[u] == <span class="hljs-number">0</span>:      <span class="hljs-comment"># 出度为 0 的点入栈</span><br>            stack.append(u)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">u</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):          <span class="hljs-comment"># 删除 i -&gt; u 的边</span><br>            <span class="hljs-keyword">if</span> u <span class="hljs-keyword">in</span> self[i]:<br>                out_degree[i] -= <span class="hljs-number">1</span><br><br>                push(i)             <span class="hljs-comment"># 判断 i 是否入栈</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        push(i)<br><br>    <span class="hljs-keyword">while</span> stack:<br>        u = stack.pop()             <span class="hljs-comment"># 出栈的点加入逆拓扑序列</span><br><br>        seq.append(u)<br><br>        update(u)<br><br>    <span class="hljs-keyword">return</span> seq<br></code></pre></td></tr></table></figure><h4 id="dfs">dfs</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">reverse_topsort</span>(<span class="hljs-params">graph</span>):<br>    n = <span class="hljs-built_in">len</span>(graph)<br><br>    visited = <span class="hljs-built_in">set</span>()<br>    stack = []<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">u</span>):<br>        <span class="hljs-keyword">if</span> u <span class="hljs-keyword">in</span> visited:<br>            <span class="hljs-keyword">return</span><br><br>        visited.add(u)<br><br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> graph[u]:<br>            dfs(v)          <span class="hljs-comment"># 后继结点先入栈</span><br><br>        stack.append(u)     <span class="hljs-comment"># 前继结点后入栈</span><br><br>    <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        dfs(u)<br><br>    <span class="hljs-keyword">return</span> stack            <span class="hljs-comment"># 逆拓扑排序</span><br></code></pre></td></tr></table></figure><h3 id="关键路径">关键路径</h3><h4 id="概念与特性">概念与特性</h4><p><img src="image-20231022235544958.png" alt="image-20231022235544958"></p><h4 id="根据边生成-AOE-网络-从源点出发画树连接">根据边生成 AOE 网络: 从源点出发画树连接</h4><h4 id="算法">算法</h4><p><img src="image-20231022235714258.png" alt="image-20231022235714258"></p><p><img src="image-20231022235800813.png" alt="image-20231022235800813"></p><p><img src="image-20231022235835852.png" alt="image-20231022235835852"></p><p><img src="image-20231022235914876.png" alt="image-20231022235914876"></p><p><img src="image-20231022235942453.png" alt="image-20231022235942453"></p><p><img src="image-20231023000004226.png" alt="image-20231023000004226"></p>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>串的匹配</title>
    <link href="/2023/10/07/%E4%B8%B2%E7%9A%84%E5%8C%B9%E9%85%8D/"/>
    <url>/2023/10/07/%E4%B8%B2%E7%9A%84%E5%8C%B9%E9%85%8D/</url>
    
    <content type="html"><![CDATA[<h1>串的匹配</h1><h2 id="bruteforce">bruteforce</h2><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(mn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></p><img src="image-20230821194417104.png" alt="image-20230821194417104" style="zoom:80%;" /><h2 id="kmp">kmp</h2><h3 id="时间复杂度-O-m-n">时间复杂度: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m + n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></h3><h3 id="思想">思想</h3><img src="扫描全能王 2023-10-27 21.20.jpg" alt="扫描全能王 2023-10-27 21.20" style="zoom: 25%;" /><h3 id="最大相等真前后缀">最大相等真前后缀</h3><p>求出输入字符串最大相等真前后缀的长度</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">max_fix</span>(<span class="hljs-params">s</span>):         <span class="hljs-comment"># 字符串最大相等真前后缀的长度</span><br>    n = <span class="hljs-built_in">len</span>(s)<br><br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>:          <span class="hljs-comment"># 空串没有真前后缀, 最大相等长度 -1</span><br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>       <span class="hljs-comment"># 长度为 1 的字符串, 真前后是空串, 最大相等长度 0</span><br><br>    <span class="hljs-keyword">for</span> size <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> s[: size] == s[-size:]:<br>            <span class="hljs-keyword">return</span> size<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>            <span class="hljs-comment"># 相等真前后缀只有空串, 最大相等长度 0</span><br></code></pre></td></tr></table></figure><p>以下字符串，数组下标从 0 计数</p><h3 id="next">next</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_next</span>(<span class="hljs-params">p</span>):<br>    n = <span class="hljs-built_in">len</span>(p)<br>    <span class="hljs-comment"># next[tail] = p 到 p[tail] 之前的前缀的最大相等真前后缀的长度</span><br>    <span class="hljs-comment"># 同时也是模式串匹配的下一个位置</span><br>    <span class="hljs-keyword">return</span> [max_fix(p[: tail]) <span class="hljs-keyword">for</span> tail <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br></code></pre></td></tr></table></figure><h4 id="next-val">next_val</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_nextval</span>(<span class="hljs-params">p</span>):<br>    n = <span class="hljs-built_in">len</span>(p)<br><br>    next_val = get_next(p)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>        j = next_val[i]<br>        <span class="hljs-comment"># 如果前一个待匹配字符和当前待匹配字符相等, 显然也不合法</span><br>        <span class="hljs-comment"># 可以继续往前找, 直到找到一个不相等的字符</span><br>        <span class="hljs-keyword">if</span> p[i] == p[j]:<br>            next_val[i] = next_val[j]<br><br>    <span class="hljs-keyword">return</span> next_val<br></code></pre></td></tr></table></figure><h3 id="匹配">匹配</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">kmp</span>(<span class="hljs-params">s, p, get_nxt</span>):<br>    nxt = get_nxt(p)<br><br>    i = <span class="hljs-number">0</span><br>    j = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">len</span>(s) <span class="hljs-keyword">and</span> j &lt; <span class="hljs-built_in">len</span>(p):<br>        <span class="hljs-keyword">if</span> j == -<span class="hljs-number">1</span>:                 <span class="hljs-comment"># 模式串头不匹配</span><br>            i += <span class="hljs-number">1</span>                  <span class="hljs-comment"># i 右移 1 位</span><br>            j = <span class="hljs-number">0</span>                   <span class="hljs-comment"># j 重新从 1 开始匹配</span><br><br>        <span class="hljs-keyword">elif</span> s[i] == p[j]:<br>            <span class="hljs-keyword">if</span> j == <span class="hljs-built_in">len</span>(p) - <span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">return</span> i - j<br><br>            i += <span class="hljs-number">1</span><br>            j += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:                       <span class="hljs-comment"># s[i] != p[j]</span><br>            j = nxt[j]              <span class="hljs-comment"># j 的下一个位置</span><br><br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br></code></pre></td></tr></table></figure><h3 id="下标从-1-计数时">下标从 1 计数时</h3><ul><li><p>next / next _val 数组表示模式串该字符匹配失败后下一个模式串待匹配字符的位置</p></li><li><p>串下标从 0 计数时，next / next _val 元素表示模式串该字符匹配失败后下一个模式串待匹配字符的位置</p></li><li><p>串下标从 0 计数时，next / next _val 元素也表示模式串到该字符前的前缀的最大相等真前后缀长度</p></li><li><p>串下标从 1 计数时，next / next _val 存储下标要比串下标从 0 计数时前进一位</p></li><li><p>串下标从 1 计数时 next / next _val 元素的值是串下标从 0 计数时，next / next _val 元素的值 + 1</p></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>查找</title>
    <link href="/2023/10/07/%E6%9F%A5%E6%89%BE/"/>
    <url>/2023/10/07/%E6%9F%A5%E6%89%BE/</url>
    
    <content type="html"><![CDATA[<h1>查找</h1><h2 id="顺序查找">顺序查找</h2><h3 id="无序">无序</h3><img src="image-20231027102447919.png" alt="image-20231027102447919" style="zoom: 67%;" /><h3 id="有序">有序</h3><img src="image-20231027102513786.png" alt="image-20231027102513786" style="zoom:67%;" /><h2 id="折半查找">折半查找</h2><h3 id="算法">算法</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">BSearch</span><span class="hljs-params">(<span class="hljs-type">int</span> nums[], <span class="hljs-type">int</span> numsSize, <span class="hljs-type">int</span> target)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> l = <span class="hljs-number">0</span>, r = numsSize - <span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">while</span> (l &lt;= r)<br>    &#123;<br>        <span class="hljs-type">int</span> m = (l + r) / <span class="hljs-number">2</span>;<br><br>        <span class="hljs-keyword">if</span> (nums[m] == target)<br>            <span class="hljs-keyword">return</span> m;<br><br>        <span class="hljs-keyword">if</span> (nums[m] &lt; target)<br>            l = m + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span><br>            r = m - <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="性质">性质</h3><ul><li>复杂度: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(log_2 n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></li><li>折半查找一般比顺序查找块</li><li>空结点不计入比较次数</li><li>根据判定树计算平均查找长度</li></ul><h3 id="判定树">判定树</h3><h4 id="概念">概念</h4><img src="image-20231013213937891.png" alt="image-20231013213937891"  /><h4 id="构造">构造</h4><p><img src="image-20231013215901347.png" alt="image-20231013215901347"></p>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>排序</title>
    <link href="/2023/10/07/%E6%8E%92%E5%BA%8F/"/>
    <url>/2023/10/07/%E6%8E%92%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<h1>排序</h1><h2 id="概念">概念</h2><p><img src="image-20231014140216702.png" alt="image-20231014140216702"></p><img src="image-20231016160233050.png" alt="image-20231016160233050" style="zoom: 67%;" /><ul><li>快速排序最坏空间复杂度: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></li></ul><h3 id="区分比较次数和移动次数">区分比较次数和移动次数</h3><h2 id="插入排序">插入排序</h2><h3 id="插入排序每趟排序都未必把某个元素放入最终位置">插入排序每趟排序都未必把某个元素放入最终位置</h3><h3 id="直接与折半插入">直接与折半插入</h3><h4 id="算法">算法</h4><p><img src="image-20231014150446216.png" alt="image-20231014150446216"></p><h4 id="稳定性-稳定">稳定性: 稳定</h4><h4 id="空间复杂度-O-1">空间复杂度: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></h4><h4 id="时间复杂度-O-n-2">时间复杂度: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></h4><ul><li>最好复杂度: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></li><li>最坏复杂度: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li><li>折半插入排序移动元素次数不变，复杂度仍为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li><li>链表插入排序比较元素次数不变，复杂度仍为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li></ul><h3 id="希尔排序">希尔排序</h3><h4 id="算法-2">算法</h4><p><img src="shell.jpg" alt="shell"></p><h4 id="稳定性">稳定性</h4><ul><li>不稳定: 相同关键字划分至不同子表可能改变相对次序</li></ul><h4 id="空间复杂度-O-1-2">空间复杂度: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></h4><h4 id="时间复杂度">时间复杂度</h4><ul><li>最坏复杂度: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mtext>的特定范围</mtext><mo>:</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>1.3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">n 的特定范围: O(n^{1.3})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">的特定范围</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1.3</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li></ul><h4 id="适用性">适用性</h4><ul><li>随机访问仅限顺序表，同理折半插入排序也仅限顺序表</li></ul><h2 id="交换排序">交换排序</h2><h3 id="冒泡排序">冒泡排序</h3><h4 id="概念-2">概念</h4><p><img src="image-20231014155133233.png" alt="image-20231014155133233"></p><h4 id="移动次数-比较次数-3">移动次数 = 比较次数 * 3</h4><img src="image-20231014160051009.png" alt="image-20231014160051009" style="zoom:50%;" /><h4 id="代码">代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubble_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> a[], <span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++)<br>    &#123;<br>        <span class="hljs-type">bool</span> flag = <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = n - <span class="hljs-number">1</span>; j &gt; i; j--)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (a[j - <span class="hljs-number">1</span>] &gt; a[j])<br>            &#123;<br>                <span class="hljs-built_in">swap</span>(a[j - <span class="hljs-number">1</span>], a[j]);<br>                flag = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (flag == <span class="hljs-literal">false</span>)<br>            <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="快速排序">快速排序</h3><h4 id="算法-3">算法</h4><p><img src="image-20231014172809829.png" alt="image-20231014172809829"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">quick_sort</span>(<span class="hljs-params">arr: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">int</span>]</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">partition</span>(<span class="hljs-params">l: <span class="hljs-built_in">int</span>, r: <span class="hljs-built_in">int</span></span>):<br>        pivot = arr[l]<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        起始时 l 指向空位</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">while</span> l &lt; r:<br>            <span class="hljs-keyword">while</span> l &lt; r <span class="hljs-keyword">and</span> pivot &lt;= arr[r]:<br>                r -= <span class="hljs-number">1</span><br>            <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">            此时 r 指向 &lt; pivot 的值</span><br><span class="hljs-string">            &quot;&quot;&quot;</span><br>            arr[l] = arr[r]<br>            <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">            将值填入 l 指向的空位</span><br><span class="hljs-string">            此时 r 指向空位</span><br><span class="hljs-string">            &quot;&quot;&quot;</span><br>            <span class="hljs-keyword">while</span> l &lt; r <span class="hljs-keyword">and</span> arr[l] &lt; pivot:<br>                l += <span class="hljs-number">1</span><br>            <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">            此时 l 指向 &gt;= pivot 的值</span><br><span class="hljs-string">            &quot;&quot;&quot;</span><br>            arr[r] = arr[l]<br>            <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">            将值填入 r 指向的空位</span><br><span class="hljs-string">            此时 l 再次指向空位</span><br><span class="hljs-string">            </span><br><span class="hljs-string">            l == r 时交换元素无影响</span><br><span class="hljs-string">            &quot;&quot;&quot;</span><br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        退出循环后 l, r 恰好都指向唯一空位, 填入 pivot</span><br><span class="hljs-string">        这就是 pivot 在排序中的最终位置</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        arr[l] = pivot<br>        <span class="hljs-keyword">return</span> l<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">l: <span class="hljs-built_in">int</span>, r: <span class="hljs-built_in">int</span></span>):<br>        <span class="hljs-keyword">if</span> l &gt;= r:<br>            <span class="hljs-keyword">return</span><br><br>        p = partition(l, r)<br><br>        divide(l, p - <span class="hljs-number">1</span>)<br>        divide(p + <span class="hljs-number">1</span>, r)<br><br>    divide(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(arr) - <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h4 id="缺陷与优化">缺陷与优化</h4><p><img src="quicksort.png" alt="quicksort"></p><h4 id="概念-3">概念</h4><img src="image-20231014173924541.png" alt="image-20231014173924541" style="zoom:67%;" /><p><img src="image-20231014174117266.png" alt="image-20231014174117266"></p><h2 id="选择排序">选择排序</h2><h3 id="选择排序-比较次数-固定-→-复杂度固定">选择排序 比较次数 固定 → 复杂度固定</h3><h3 id="简单选择排序">简单选择排序</h3><p><img src="image-20231014180808373.png" alt="image-20231014180808373"></p><h3 id="堆排序">堆排序</h3><h4 id="概念-4">概念</h4><p><img src="image-20231015000608436.png" alt="image-20231015000608436"></p><h4 id="子结点取最值也要计算比较次数">子结点取最值也要计算比较次数</h4><p><img src="image-20231015211454393.png" alt="image-20231015211454393"></p><h4 id="算法-4">算法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">heap_sort</span>(<span class="hljs-params">arr</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    从 1 开始计数的大根堆</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    n = <span class="hljs-built_in">len</span>(arr)<br>    arr = [<span class="hljs-number">0</span>] + arr<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">swap</span>(<span class="hljs-params">a, b</span>):<br>        arr[a], arr[b] = arr[b], arr[a]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">down</span>(<span class="hljs-params">k, size</span>):<br>        at = <span class="hljs-keyword">lambda</span> k: arr[k] <span class="hljs-keyword">if</span> k &lt;= size <span class="hljs-keyword">else</span> -<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br><br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            l, r = <span class="hljs-number">2</span> * k, <span class="hljs-number">2</span> * k + <span class="hljs-number">1</span><br>            s = l <span class="hljs-keyword">if</span> at(l) &gt; at(r) <span class="hljs-keyword">else</span> r<br><br>            <span class="hljs-keyword">if</span> at(k) &gt;= at(s):<br>                <span class="hljs-keyword">break</span><br><br>            swap(k, s)<br>            k = s<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    heapify</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n // <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        down(i, n)<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    sort</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        swap(<span class="hljs-number">1</span>, i)<br>        down(<span class="hljs-number">1</span>, i - <span class="hljs-number">1</span>)<br><br>    <span class="hljs-keyword">return</span> arr[<span class="hljs-number">1</span>:]<br></code></pre></td></tr></table></figure><h2 id="归并排序">归并排序</h2><h3 id="归并">归并</h3><p><img src="image-20231016104304250.png" alt="image-20231016104304250"></p><h3 id="性质">性质</h3><ul><li>两个长度为 N 有序表合并，最少比较次数 N，最多比较次数 2 N - 1</li></ul><h3 id="排序">排序</h3><p><img src="image-20231016104348066.png" alt="image-20231016104348066"></p><h3 id="复杂度">复杂度</h3><img src="mergesort111.png" alt="mergesort111" style="zoom:67%;" /><h3 id="稳定性-稳定-2">稳定性: 稳定</h3><h3 id="归并排序-比较次数-固定-→-复杂度固定">归并排序 比较次数 固定 → 复杂度固定</h3><h2 id="基数排序">基数排序</h2><h3 id="概念-5">概念</h3><p><img src="image-20231016151031946.png" alt="image-20231016151031946"></p><h3 id="算法-5">算法</h3><h4 id="桶">桶</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bucket</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, r: <span class="hljs-built_in">int</span>, p: <span class="hljs-built_in">int</span></span>):<br>        self.data = [[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(r)]<br>        self.p = p<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    r: 每一位的取值范围(基数)</span><br><span class="hljs-string">    按照 num[p] 的值将 num 放入对应的桶中</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">append</span>(<span class="hljs-params">self, num: <span class="hljs-built_in">tuple</span></span>):<br>        digit = num[self.p]<br>        self.data[digit].append(num)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">self</span>):<br>        data = []<br><br>        <span class="hljs-keyword">for</span> q <span class="hljs-keyword">in</span> self.data:<br>            data += q<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        这里 c 用链表实现, 操作 r 次</span><br><span class="hljs-string">        桶中元素按入队顺序排列</span><br><span class="hljs-string">        相同值元素相对顺序不变</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> data<br></code></pre></td></tr></table></figure><h4 id="排序-2">排序</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">lsd</span>(<span class="hljs-params">d: <span class="hljs-built_in">int</span>, nums: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">tuple</span>]</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, d + <span class="hljs-number">1</span>):<br>        bucket = Bucket(<span class="hljs-number">10</span>, -i)<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        辅助空间: r = 10 的桶重复使用</span><br><span class="hljs-string">        越高位优先级越高, 层层递进实现排序</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            bucket.append(num)<br><br>        nums = bucket.merge()<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    分配: d * n</span><br><span class="hljs-string">    收集: d * r</span><br><span class="hljs-string"></span><br><span class="hljs-string">    d: dimension / digit</span><br><span class="hljs-string">    n: number</span><br><span class="hljs-string">    r: range</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> nums<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>平衡树</title>
    <link href="/2023/10/07/%E5%B9%B3%E8%A1%A1%E6%A0%91/"/>
    <url>/2023/10/07/%E5%B9%B3%E8%A1%A1%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<h1>平衡树</h1><h2 id="二叉搜索树">二叉搜索树</h2><h3 id="定义">定义</h3><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>左子树的值</mtext><mo>&lt;</mo><mtext>根的值</mtext><mo>&lt;</mo><mtext>右子树的值</mtext></mrow><annotation encoding="application/x-tex">左子树的值 &lt; 根的值 &lt; 右子树的值</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord cjk_fallback">左子树的值</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord cjk_fallback">根的值</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">右子树的值</span></span></span></span></span></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BTNode</span><br>&#123;<br>    <span class="hljs-type">int</span> key;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BTNode</span>* left;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BTNode</span>* right;<br>&#125; BTNode;<br></code></pre></td></tr></table></figure><h3 id="性质">性质</h3><ul><li>中序遍历二叉搜索树得到排序，若左右大小关系反转，排序也反转</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mtext>个结点理想深度</mtext><mrow><mo fence="true">⌈</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo fence="true">⌉</mo></mrow></mrow><annotation encoding="application/x-tex">n 个结点理想深度 \left \lceil \log_2(n + 1) \right \rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个结点理想深度</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">⌉</span></span></span></span></span></li></ul><h3 id="性质-2">性质</h3><img src="image-20231009171519680.png" alt="image-20231009171519680" style="zoom:80%;" /><h3 id="插入">插入</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">BSTInsert</span><span class="hljs-params">(BTNode* &amp;bt, <span class="hljs-type">int</span> key)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (bt == <span class="hljs-literal">NULL</span>)<br>    &#123;<br>        bt = <span class="hljs-built_in">BSTCreate</span>(key);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span> (key == bt-&gt;key)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">if</span> (key &lt; bt-&gt;key)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">BSTInsert</span>(bt-&gt;left, key);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">BSTInsert</span>(bt-&gt;right, key);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="删除">删除</h3><h4 id="1">1</h4><img src="image-20231009210924824.png" alt="image-20231009210924824" style="zoom:50%;" /><h4 id="2">2</h4><img src="image-20231009210947097.png" alt="image-20231009210947097" style="zoom:50%;" /><h4 id="3">3</h4><img src="image-20231009211013702.png" alt="image-20231009211013702" style="zoom:50%;" /><h2 id="平衡二叉树">平衡二叉树</h2><h3 id="平衡因子">平衡因子</h3><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>树</mtext><mo stretchy="false">(</mo><mtext>结点</mtext><mo stretchy="false">)</mo><mtext>的平衡因子</mtext><mo>:</mo><mtext>BF</mtext><mo stretchy="false">(</mo><mtext>结点</mtext><mo stretchy="false">)</mo><mo>=</mo><mtext>左子树的高度</mtext><mo>−</mo><mtext>右子树的高度</mtext></mrow><annotation encoding="application/x-tex">树(结点) 的平衡因子: \text{BF}(结点) = 左子树的高度 - 右子树的高度</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">树</span><span class="mopen">(</span><span class="mord cjk_fallback">结点</span><span class="mclose">)</span><span class="mord cjk_fallback">的平衡因子</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">BF</span></span><span class="mopen">(</span><span class="mord cjk_fallback">结点</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord cjk_fallback">左子树的高度</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">右子树的高度</span></span></span></span></span></p><h3 id="平衡二叉树-2">平衡二叉树</h3><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>平衡二叉树</mtext><mo>:</mo><mi mathvariant="normal">∀</mi><mtext>结点</mtext><mo>∈</mo><mtext>平衡二叉树</mtext><mo separator="true">,</mo><mi mathvariant="normal">∣</mi><mtext>结点平衡因子</mtext><mi mathvariant="normal">∣</mi><mo>≤</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">平衡二叉树: \forall 结点 \in 平衡二叉树, |结点平衡因子| \le 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">平衡二叉树</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord">∀</span><span class="mord cjk_fallback">结点</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">平衡二叉树</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mord cjk_fallback">结点平衡因子</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></p><h3 id="高度">高度</h3><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>高度</mtext><mo>:</mo><mi>O</mi><mo stretchy="false">(</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">高度: O(\log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">高度</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><img src="image-20231009222805109.png" alt="image-20231009222805109" style="zoom: 50%;" /><h2 id="AVL-树">AVL 树</h2><h3 id="定义-2">定义</h3><ul><li><p>二叉搜索树只对树上结点值的关系作约束，二叉平衡树只对树的结构作约束</p></li><li><p>定义 AVL 树 结点值的关系是二叉搜索树，结构是二叉平衡树，在插入删除时会旋转</p></li><li><p>AVL 树: 平衡的二叉搜索树</p></li></ul><h3 id="旋转">旋转</h3><ul><li><p>AVL 树的旋转就是 父结点 与其 子树 交换地位</p></li><li><p>同时影响树上所有结点移动至合法位置</p></li></ul><p><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="482px" viewBox="-0.5 -0.5 482 202" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-10-11T17:22:58.728Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36 Edg/117.0.2045.60&quot; etag=&quot;H-Xnq11719qgY6ZeDq2A&quot; version=&quot;22.0.4&quot; type=&quot;google&quot;&gt;&#10;  &lt;diagram name=&quot;第 1 页&quot; id=&quot;2VGwCbn4nPZgC10Kusmk&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;500&quot; dy=&quot;291&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-11&quot; value=&quot;&quot; style=&quot;shape=flexArrow;endArrow=classic;html=1;rounded=0;&quot; parent=&quot;1&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;440&quot; y=&quot;640&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;520&quot; y=&quot;640&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-12&quot; value=&quot;父&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;360&quot; y=&quot;560&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-13&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;dashed=1;dashPattern=1 1;&quot; parent=&quot;1&quot; source=&quot;tDCj7c3KVlzSA5xIdJwX-12&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;410&quot; y=&quot;620&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;440&quot; y=&quot;640&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-14&quot; value=&quot;子&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;280&quot; y=&quot;640&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-15&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;&quot; parent=&quot;1&quot; source=&quot;tDCj7c3KVlzSA5xIdJwX-14&quot; target=&quot;tDCj7c3KVlzSA5xIdJwX-12&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;350&quot; y=&quot;660&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;390&quot; y=&quot;620&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;lmNE9jmCAh87s3QYGWGb-1&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;dashed=1;dashPattern=1 1;&quot; parent=&quot;1&quot; source=&quot;tDCj7c3KVlzSA5xIdJwX-14&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;280&quot; y=&quot;680&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;240&quot; y=&quot;720&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;lmNE9jmCAh87s3QYGWGb-2&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#FF0000;dashed=1;dashPattern=1 1;&quot; parent=&quot;1&quot; source=&quot;tDCj7c3KVlzSA5xIdJwX-14&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;320&quot; y=&quot;680&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;360&quot; y=&quot;720&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;lmNE9jmCAh87s3QYGWGb-3&quot; value=&quot;父&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;640&quot; y=&quot;640&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;lmNE9jmCAh87s3QYGWGb-4&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;dashed=1;dashPattern=1 1;&quot; parent=&quot;1&quot; source=&quot;lmNE9jmCAh87s3QYGWGb-3&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;720&quot; y=&quot;560&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;720&quot; y=&quot;720&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;lmNE9jmCAh87s3QYGWGb-5&quot; value=&quot;子&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;560&quot; y=&quot;560&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;lmNE9jmCAh87s3QYGWGb-6&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;&quot; parent=&quot;1&quot; source=&quot;lmNE9jmCAh87s3QYGWGb-5&quot; target=&quot;lmNE9jmCAh87s3QYGWGb-3&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;660&quot; y=&quot;600&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;700&quot; y=&quot;560&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;lmNE9jmCAh87s3QYGWGb-7&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;dashed=1;dashPattern=1 1;&quot; parent=&quot;1&quot; source=&quot;lmNE9jmCAh87s3QYGWGb-5&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;590&quot; y=&quot;620&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;520&quot; y=&quot;640&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;lmNE9jmCAh87s3QYGWGb-8&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#FF0000;dashed=1;dashPattern=1 1;&quot; parent=&quot;1&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;640&quot; y=&quot;680&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;600&quot; y=&quot;720&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;QW1cge0ePoVEiX_QeNVu-2&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#FF0000;dashed=1;dashPattern=1 1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; target=&quot;tDCj7c3KVlzSA5xIdJwX-12&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;380&quot; y=&quot;520&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;400&quot; y=&quot;550&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;QW1cge0ePoVEiX_QeNVu-4&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#FF0000;dashed=1;dashPattern=1 1;&quot; edge=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;579.76&quot; y=&quot;520&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;579.76&quot; y=&quot;560&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://viewer.diagrams.net/?client=1&amp;page=0&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:202px;"><defs/><g><path d="M 200.5 125 L 200.5 115 L 260.5 115 L 260.5 104.5 L 279.5 120 L 260.5 135.5 L 260.5 125 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="120" y="40" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 60px; margin-left: 121px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">父</div></div></div></foreignObject><text x="140" y="66" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">父</text></switch></g><path d="M 160 80 L 200 120" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="1 1" pointer-events="stroke"/><rect x="40" y="120" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 140px; margin-left: 41px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">子</div></div></div></foreignObject><text x="60" y="146" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">子</text></switch></g><path d="M 80 120 L 120 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 40 160 L 0 200" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="1 1" pointer-events="stroke"/><path d="M 80 160 L 120 200" fill="none" stroke="#ff0000" stroke-miterlimit="10" stroke-dasharray="1 1" pointer-events="stroke"/><rect x="400" y="120" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 140px; margin-left: 401px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">父</div></div></div></foreignObject><text x="420" y="146" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">父</text></switch></g><path d="M 440 160 L 480 200" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="1 1" pointer-events="stroke"/><rect x="320" y="40" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 60px; margin-left: 321px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">子</div></div></div></foreignObject><text x="340" y="66" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">子</text></switch></g><path d="M 360 80 L 400 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 320 80 L 280 120" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="1 1" pointer-events="stroke"/><path d="M 400 160 L 360 200" fill="none" stroke="#ff0000" stroke-miterlimit="10" stroke-dasharray="1 1" pointer-events="stroke"/><path d="M 140 0 L 140 40" fill="none" stroke="#ff0000" stroke-miterlimit="10" stroke-dasharray="1 1" pointer-events="stroke"/><path d="M 339.76 0 L 339.76 40" fill="none" stroke="#ff0000" stroke-miterlimit="10" stroke-dasharray="1 1" pointer-events="stroke"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg></p><h3 id="插入-2">插入</h3><ul><li>从叶向上匹配第一对不平衡因子</li></ul><img src="image-20231009232037553.png" alt="image-20231009232037553" /><h4 id="LL-型-右旋一次">LL 型: 右旋一次</h4><p><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="480px" viewBox="-0.5 -0.5 480 200" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-10-11T17:04:47.619Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36 Edg/117.0.2045.60&quot; etag=&quot;vpXWCZfGERy7ZVzavw5H&quot; version=&quot;22.0.4&quot; type=&quot;google&quot;&gt;&#10;  &lt;diagram name=&quot;第 1 页&quot; id=&quot;2VGwCbn4nPZgC10Kusmk&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;868&quot; dy=&quot;474&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-6&quot; value=&quot;A: 2&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;400&quot; y=&quot;520&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-7&quot; value=&quot;B: 1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;320&quot; y=&quot;600&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-8&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#FF0000;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;tDCj7c3KVlzSA5xIdJwX-7&quot; target=&quot;tDCj7c3KVlzSA5xIdJwX-6&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;370&quot; y=&quot;660&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;420&quot; y=&quot;610&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-9&quot; value=&quot;C&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;240&quot; y=&quot;680&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-10&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;tDCj7c3KVlzSA5xIdJwX-9&quot; target=&quot;tDCj7c3KVlzSA5xIdJwX-7&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;310&quot; y=&quot;700&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;350&quot; y=&quot;660&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-11&quot; value=&quot;&quot; style=&quot;shape=flexArrow;endArrow=classic;html=1;rounded=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;440&quot; y=&quot;619.66&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;520&quot; y=&quot;619.66&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-12&quot; value=&quot;B&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;600&quot; y=&quot;560&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-13&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;tDCj7c3KVlzSA5xIdJwX-12&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;650&quot; y=&quot;620&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;680&quot; y=&quot;640&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-14&quot; value=&quot;C&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;520&quot; y=&quot;640&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-15&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;tDCj7c3KVlzSA5xIdJwX-14&quot; target=&quot;tDCj7c3KVlzSA5xIdJwX-12&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;590&quot; y=&quot;660&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;630&quot; y=&quot;620&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tDCj7c3KVlzSA5xIdJwX-16&quot; value=&quot;A&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;680&quot; y=&quot;640&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://viewer.diagrams.net/?client=1&amp;page=0&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:200px;"><defs/><g><rect x="160" y="0" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 20px; margin-left: 161px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">A: 2</div></div></div></foreignObject><text x="180" y="26" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">A: 2</text></switch></g><rect x="80" y="80" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 100px; margin-left: 81px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">B: 1</div></div></div></foreignObject><text x="100" y="106" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">B: 1</text></switch></g><path d="M 120 80 L 160 40" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="stroke"/><rect x="0" y="160" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 180px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">C</div></div></div></foreignObject><text x="20" y="186" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">C</text></switch></g><path d="M 40 160 L 80 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 200.5 104.66 L 200.5 94.66 L 260.5 94.66 L 260.5 84.16 L 279.5 99.66 L 260.5 115.16 L 260.5 104.66 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="360" y="40" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 60px; margin-left: 361px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">B</div></div></div></foreignObject><text x="380" y="66" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">B</text></switch></g><path d="M 400 80 L 440 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><rect x="280" y="120" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 140px; margin-left: 281px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">C</div></div></div></foreignObject><text x="300" y="146" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">C</text></switch></g><path d="M 320 120 L 360 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><rect x="440" y="120" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 140px; margin-left: 441px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">A</div></div></div></foreignObject><text x="460" y="146" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">A</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg></p><h4 id="LR-型-左旋一次-→-右旋一次">LR 型: 左旋一次 → 右旋一次</h4><p><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="680px" viewBox="-0.5 -0.5 680 200" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-10-11T17:05:34.954Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36 Edg/117.0.2045.60&quot; etag=&quot;p_nruJgSv2zOrQkcqbiI&quot; version=&quot;22.0.4&quot; type=&quot;google&quot;&gt;&#10;  &lt;diagram name=&quot;第 1 页&quot; id=&quot;H2ad6vj5IFYbuf4054S6&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;1042&quot; dy=&quot;569&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-1&quot; value=&quot;A: 2&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;240&quot; y=&quot;520&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-2&quot; value=&quot;B:-1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;160&quot; y=&quot;600&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-3&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;&quot; parent=&quot;1&quot; source=&quot;atjtPHl_4XYjLoQTsiDn-2&quot; target=&quot;atjtPHl_4XYjLoQTsiDn-1&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;210&quot; y=&quot;660&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;260&quot; y=&quot;610&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-4&quot; value=&quot;&quot; style=&quot;shape=flexArrow;endArrow=classic;html=1;rounded=0;&quot; parent=&quot;1&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;280&quot; y=&quot;619.66&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;360&quot; y=&quot;619.66&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-5&quot; value=&quot;C&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;240&quot; y=&quot;680&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-6&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#FF0000;&quot; parent=&quot;1&quot; source=&quot;atjtPHl_4XYjLoQTsiDn-5&quot; target=&quot;atjtPHl_4XYjLoQTsiDn-2&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;150&quot; y=&quot;700&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;190&quot; y=&quot;660&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-7&quot; value=&quot;A: 2&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;520&quot; y=&quot;520&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-8&quot; value=&quot;C: 1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;440&quot; y=&quot;600&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-9&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#FF0000;&quot; parent=&quot;1&quot; source=&quot;atjtPHl_4XYjLoQTsiDn-8&quot; target=&quot;atjtPHl_4XYjLoQTsiDn-7&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;490&quot; y=&quot;660&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;540&quot; y=&quot;610&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-10&quot; value=&quot;B&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;360&quot; y=&quot;680&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;atjtPHl_4XYjLoQTsiDn-11&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;&quot; parent=&quot;1&quot; source=&quot;atjtPHl_4XYjLoQTsiDn-10&quot; target=&quot;atjtPHl_4XYjLoQTsiDn-8&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;430&quot; y=&quot;700&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;470&quot; y=&quot;660&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;mq7Q5jUtgd6ml0nvMkqT-1&quot; value=&quot;&quot; style=&quot;shape=flexArrow;endArrow=classic;html=1;rounded=0;&quot; parent=&quot;1&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;560&quot; y=&quot;619.66&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;640&quot; y=&quot;619.66&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;mq7Q5jUtgd6ml0nvMkqT-2&quot; value=&quot;A&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;800&quot; y=&quot;640&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;mq7Q5jUtgd6ml0nvMkqT-3&quot; value=&quot;C&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;720&quot; y=&quot;560&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;mq7Q5jUtgd6ml0nvMkqT-4&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;&quot; parent=&quot;1&quot; source=&quot;mq7Q5jUtgd6ml0nvMkqT-3&quot; target=&quot;mq7Q5jUtgd6ml0nvMkqT-2&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;770&quot; y=&quot;620&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;820&quot; y=&quot;570&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;mq7Q5jUtgd6ml0nvMkqT-5&quot; value=&quot;B&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;640&quot; y=&quot;640&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;mq7Q5jUtgd6ml0nvMkqT-6&quot; value=&quot;&quot; style=&quot;endArrow=none;html=1;rounded=0;strokeColor=#000000;&quot; parent=&quot;1&quot; source=&quot;mq7Q5jUtgd6ml0nvMkqT-5&quot; target=&quot;mq7Q5jUtgd6ml0nvMkqT-3&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;710&quot; y=&quot;660&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;750&quot; y=&quot;620&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://viewer.diagrams.net/?client=1&amp;page=0&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:200px;"><defs/><g><rect x="80" y="0" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 20px; margin-left: 81px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">A: 2</div></div></div></foreignObject><text x="100" y="26" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">A: 2</text></switch></g><rect x="0" y="80" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 100px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">B:-1</div></div></div></foreignObject><text x="20" y="106" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">B:-1</text></switch></g><path d="M 40 80 L 80 40" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 120.5 104.66 L 120.5 94.66 L 180.5 94.66 L 180.5 84.16 L 199.5 99.66 L 180.5 115.16 L 180.5 104.66 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="80" y="160" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 180px; margin-left: 81px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">C</div></div></div></foreignObject><text x="100" y="186" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">C</text></switch></g><path d="M 80 160 L 40 120" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="stroke"/><rect x="360" y="0" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 20px; margin-left: 361px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">A: 2</div></div></div></foreignObject><text x="380" y="26" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">A: 2</text></switch></g><rect x="280" y="80" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 100px; margin-left: 281px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">C: 1</div></div></div></foreignObject><text x="300" y="106" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">C: 1</text></switch></g><path d="M 320 80 L 360 40" fill="none" stroke="#ff0000" stroke-miterlimit="10" pointer-events="stroke"/><rect x="200" y="160" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 180px; margin-left: 201px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">B</div></div></div></foreignObject><text x="220" y="186" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">B</text></switch></g><path d="M 240 160 L 280 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 400.5 104.66 L 400.5 94.66 L 460.5 94.66 L 460.5 84.16 L 479.5 99.66 L 460.5 115.16 L 460.5 104.66 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="640" y="120" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 140px; margin-left: 641px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">A</div></div></div></foreignObject><text x="660" y="146" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">A</text></switch></g><rect x="560" y="40" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 60px; margin-left: 561px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">C</div></div></div></foreignObject><text x="580" y="66" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">C</text></switch></g><path d="M 600 80 L 640 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><rect x="480" y="120" width="40" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 140px; margin-left: 481px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">B</div></div></div></foreignObject><text x="500" y="146" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="20px" text-anchor="middle">B</text></switch></g><path d="M 520 120 L 560 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg></p><h4 id="LL-型-与-LR-型-依此类推">LL 型 与 LR 型: 依此类推</h4><h3 id="删除-2">删除</h3><ol><li>二叉搜索树删除</li><li>向上找到最小不平衡子树，并旋转平衡</li><li>继续向上重复<strong>2</strong></li></ol><h2 id="B-树">B 树</h2><h3 id="概念">概念</h3><h4 id="B-树-上元素的查找如下图可知">B 树 上元素的查找如下图可知</h4><img src="btree-1696945694915-1.jpg" alt="btree" /><h5 id="重点">重点</h5><img src="image-20231012090014995.png" alt="image-20231012090014995" /><h3 id="性质-3">性质</h3><h4 id="高度-磁盘存取次数">高度(磁盘存取次数)</h4><img src="btheight.jpg" alt="btheight" /><h4 id="叶结点数">叶结点数</h4><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>n</mi><mtext>个关键词会产生</mtext><mi>n</mi><mo>+</mo><mn>1</mn><mtext>种失败区间</mtext><mo>⇒</mo><mi>n</mi><mo>+</mo><mn>1</mn><mtext>个叶结点</mtext></mrow><annotation encoding="application/x-tex">n 个关键词会产生 n + 1 种失败区间 \Rightarrow n + 1 个叶结点</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个关键词会产生</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">1</span><span class="mord cjk_fallback">种失败区间</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">1</span><span class="mord cjk_fallback">个叶结点</span></span></span></span></span></p><h3 id="插入-3">插入</h3><h4 id="步骤">步骤</h4><img src="image-20231012154841475.png" alt="image-20231012154841475" style="zoom:150%;" /><h4 id="图示">图示</h4><img src="image-20231010221107531.png" alt="image-20231010221107531" style="zoom:80%;" /><h3 id="删除-3">删除</h3><h4 id="1-2">1</h4><img src="屏幕截图 2023-10-10 222346.png" alt="屏幕截图 2023-10-10 222346" /><h4 id="2-2">2</h4><img src="image-20231010222520516.png" alt="image-20231010222520516" /><h3 id="2-3-4-树">2-3-4 树</h3><blockquote><p>2–3–4 trees are B-trees of order 4</p></blockquote><ul><li>2-3-4 树 是 4 阶 B 树，大纲单独列出 2-3-4 树 可能代表考察 B 树时倾向于选用 4 阶 B 树</li></ul><h2 id="B-树-2">B+ 树</h2><h3 id="定义与性质">定义与性质</h3><img src="image-20231010223916785.png" alt="image-20231010223916785" style="zoom:150%;" /><h3 id="查找">查找</h3><h4 id="树型查找">树型查找</h4><ul><li>B+ 树查找必须要到最后一层</li></ul><h4 id="顺序查找">顺序查找</h4><h3 id="应用">应用</h3><ul><li>B+ 树 比 B 树更适合 操作系统文件/数据库 索引</li></ul><h2 id="堆">堆</h2><h3 id="声明">声明</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Heap</span>:                             <span class="hljs-comment"># 小根堆</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.<span class="hljs-built_in">list</span> = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)]      <span class="hljs-comment"># 从 1 开始的完全二叉树</span><br></code></pre></td></tr></table></figure><h3 id="操作">操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">swap</span>(<span class="hljs-params">self, a, b</span>):<br>    self[a], self[b] = self[b], self[a]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">up</span>(<span class="hljs-params">self, k</span>):<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        f = self.fa(k)<br><br>        <span class="hljs-keyword">if</span> f == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> self[f] &lt; self[k]:<br>            <span class="hljs-keyword">return</span><br><br>        self.swap(k, f)<br>        k = f<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">down</span>(<span class="hljs-params">self, k</span>):<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        l, r = self.ls(k), self.rs(k)<br><br>        s = l <span class="hljs-keyword">if</span> self[l] &lt; self[r] <span class="hljs-keyword">else</span> r<br><br>        <span class="hljs-keyword">if</span> self[k] &lt;= self[s]:<br>            <span class="hljs-keyword">return</span><br><br>        self.swap(k, s)<br>        k = s<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">top</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">return</span> self[<span class="hljs-number">1</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">self, x</span>):<br>    self.append(x)<br><br>    self.up(<span class="hljs-built_in">len</span>(self))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self</span>):<br>    top = self.top()<br>    bottom = self.<span class="hljs-built_in">list</span>.pop()<br><br>    self[<span class="hljs-number">1</span>] = bottom<br>    self.down(<span class="hljs-number">1</span>)<br><br>    <span class="hljs-keyword">return</span> top<br></code></pre></td></tr></table></figure><h2 id="并查集">并查集</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UFS</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.n = n<br>        self.f = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(n))<br>        self.size = [<span class="hljs-number">1</span>] * n<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_root</span>(<span class="hljs-params">self, a</span>):<br>        <span class="hljs-keyword">return</span> a == self.f[a]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_connected</span>(<span class="hljs-params">self, a, b</span>):<br>        <span class="hljs-keyword">return</span> self.find(a) == self.find(b)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">self, a</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.is_root(a):<br>            f = self.f[a]<br>            <br>            self.f[a] = self.find(f)        <span class="hljs-comment"># 路径结点插在根下</span><br><br>        <span class="hljs-keyword">return</span> self.f[a]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">union</span>(<span class="hljs-params">self, a, b</span>):                  <span class="hljs-comment"># a branch, b root</span><br>        root_a, root_b = self.find(a), self.find(b)<br><br>        <span class="hljs-keyword">if</span> root_a != root_b:<br>            self.f[root_a] = root_b<br>            <br>            self.size[root_b] += self.size[root_a]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_size</span>(<span class="hljs-params">self, a</span>):<br>        root = self.find(a)<br>        <span class="hljs-keyword">return</span> self.size[root]<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>栈与队列</title>
    <link href="/2023/07/23/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/"/>
    <url>/2023/07/23/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h1>栈与队列</h1><h2 id="顺序栈">顺序栈</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span><br>&#123;<br>    ElemType data[MAXSIZE];<br>    <span class="hljs-type">int</span> top;                    <span class="hljs-comment">// 栈顶元素在数组中的下标</span><br>&#125; <br>SqStack;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(SqStack &amp;S)</span>      </span><br><span class="hljs-function"></span>&#123;<br>    S.top = <span class="hljs-number">-1</span>;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">StackEmpty</span><span class="hljs-params">(SqStack S)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> S.top == <span class="hljs-number">-1</span>;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">Push</span><span class="hljs-params">(SqStack &amp;S, ElemType x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (S.top == MAXSIZE - <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    S.data[++S.top] = x;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">Pop</span><span class="hljs-params">(SqStack &amp;S, ElemType &amp;x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (S.top == <span class="hljs-number">-1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    x = S.data[S.top--];<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">GetTop</span><span class="hljs-params">(SqStack S, ElemType &amp;x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (S.top == <span class="hljs-number">-1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    x = S.data[S.top];<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="循环队列">循环队列</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span><br>&#123;<br>    ElemType data[MAXSIZE];<br>    <span class="hljs-type">int</span> front;                      <span class="hljs-comment">// 队头元素下标</span><br>    <span class="hljs-type">int</span> rear;                       <span class="hljs-comment">// 队尾元素后一个位置下标</span><br>&#125;<br>SqQueue;<br></code></pre></td></tr></table></figure><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>n</mi><mi>e</mi><mi>x</mi><mi>t</mi><mo stretchy="false">(</mo><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">%</mi><mi>m</mi><mi>a</mi><mi>x</mi><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">next(index) = (index + 1) \% maxsize</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">%</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span></span></span></span></span></p><ul><li>当循环队列尾rear指向队尾元素后一个位置下标时</li></ul><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>循环队空</mtext><mo>:</mo><mtext> </mtext><mi>r</mi><mi>e</mi><mi>a</mi><mi>r</mi><mo>=</mo><mi>f</mi><mi>r</mi><mi>o</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">循环队空: \ rear = front</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">循环队空</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">ro</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>循环队满</mtext><mo>:</mo><mtext> </mtext><mi>n</mi><mi>e</mi><mi>x</mi><mi>t</mi><mo stretchy="false">(</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>r</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mi>r</mi><mi>o</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">循环队满: \ next(rear) = front</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">循环队满</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal">re</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">ro</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span></span></p><ul><li>根据队满条件，队头前一个位置不能存数据</li></ul><h2 id="进出栈序列问题">进出栈序列问题</h2><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mtext>个元素顺序进栈</mtext><mo stretchy="false">(</mo><mn>1</mn><mtext>进栈</mtext><mo separator="true">,</mo><mn>2</mn><mtext>进栈</mtext><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>n</mi><mtext>进栈</mtext><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext> 合法出栈排列数</mtext><mo>:</mo></mrow><annotation encoding="application/x-tex">n个元素顺序进栈(1进栈,2进栈...n进栈), \ 合法出栈排列数:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个元素顺序进栈</span><span class="mopen">(</span><span class="mord">1</span><span class="mord cjk_fallback">进栈</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mord cjk_fallback">进栈</span><span class="mord">...</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">进栈</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">合法出栈排列数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Catalan</mtext><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mtext> </mtext><msubsup><mi>C</mi><mrow><mn>2</mn><mi>n</mi></mrow><mi>n</mi></msubsup><mo>−</mo><msubsup><mi>C</mi><mrow><mn>2</mn><mi>n</mi></mrow><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msubsup><mo>=</mo><mfrac><msubsup><mi>C</mi><mrow><mn>2</mn><mi>n</mi></mrow><mi>n</mi></msubsup><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{Catalan}(n) = \ C_{2n}^n - C_{2n}^{n+1} = \frac{C_{2n}^{n}}{n+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">Catalan</span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9614em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-2.453em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1205em;vertical-align:-0.2564em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.4436em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2564em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1297em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-2.4519em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><h2 id="栈的应用">栈的应用</h2><h3 id="括号匹配">括号匹配</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">isValid</span>(<span class="hljs-params">s</span>):<br>    par = &#123;<span class="hljs-string">&#x27;(&#x27;</span>: <span class="hljs-string">&#x27;)&#x27;</span>, <span class="hljs-string">&#x27;[&#x27;</span>: <span class="hljs-string">&#x27;]&#x27;</span>, <span class="hljs-string">&#x27;&#123;&#x27;</span>: <span class="hljs-string">&#x27;&#125;&#x27;</span>&#125;<br><br>    stack = []<br><br>    <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s:<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> stack:<br>            stack.append(c)<br>            <span class="hljs-keyword">continue</span><br><br>        <span class="hljs-keyword">if</span> c <span class="hljs-keyword">in</span> par:<br>            stack.append(c)<br>            <span class="hljs-keyword">continue</span><br><br>        top = stack[-<span class="hljs-number">1</span>]<br><br>        <span class="hljs-keyword">if</span> top <span class="hljs-keyword">in</span> par <span class="hljs-keyword">and</span> par[top] == c:<br>            stack.pop()<br>            <span class="hljs-keyword">continue</span><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(stack) == <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="缀表达式">*缀表达式</h3><h4 id="计算后缀表达式">计算后缀表达式</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-built_in">input</span>()[: -<span class="hljs-number">1</span>].replace(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-string">&#x27;//&#x27;</span>)<br>ops = &#123;<span class="hljs-string">&#x27;+&#x27;</span>, <span class="hljs-string">&#x27;-&#x27;</span>, <span class="hljs-string">&#x27;*&#x27;</span>, <span class="hljs-string">&#x27;//&#x27;</span>&#125;<br><br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> ops:<br>    s = s.replace(c, c + <span class="hljs-string">&#x27;.&#x27;</span>)<br><br>l = s[: -<span class="hljs-number">1</span>].split(<span class="hljs-string">&#x27;.&#x27;</span>)<br>stack = []<br><br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> l:<br>    <span class="hljs-keyword">if</span> c <span class="hljs-keyword">in</span> ops:<br>        right = stack.pop()<br>        left = stack.pop()<br><br>        z = <span class="hljs-built_in">eval</span>(left + c + right)<br>        c = <span class="hljs-built_in">str</span>(z)<br><br>    stack.append(c)<br><br><span class="hljs-built_in">print</span>(stack.pop())<br></code></pre></td></tr></table></figure><h4 id="中缀表达式转后缀表达式">中缀表达式转后缀表达式</h4><ul><li><p>使用一个栈来存储运算符，一个队列来存储输出结果。</p></li><li><p>从左到右扫描中缀表达式的每个字符。</p></li><li><p>如果遇到操作数，直接将其加入输出队列。</p></li><li><p>如果遇到左括号，直接将其压入运算符栈。</p></li><li><p>如果遇到右括号，弹出运算符栈中的元素，并加入输出队列，直到遇到左括号为止，然后丢弃左括号。</p></li><li><p>如果遇到运算符，比较其与运算符栈顶元素的优先级：</p><ul><li>如果栈为空，或者栈顶元素是左括号，或者当前运算符的优先级高于栈顶元素的优先级，则直接将其压入运算符栈。</li><li>如果当前运算符的优先级低于或等于栈顶元素的优先级，则弹出运算符栈中的元素，并加入输出队列，重复此步骤直到满足上述条件为止，然后将当前运算符压入运算符栈。</li></ul></li><li><p>当扫描完整个中缀表达式后，弹出运算符栈中剩余的元素，并加入输出队列。</p></li><li><p>最终输出队列中的元素就是后缀表达式。</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">()的优先级比较复杂, 加入()只是为了囊括所有算符以便判断数字</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>priority = &#123;<span class="hljs-string">&#x27;(&#x27;</span>: <span class="hljs-number">0</span>,<span class="hljs-string">&#x27;)&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;+&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;-&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;*&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;/&#x27;</span>: <span class="hljs-number">2</span>&#125;<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">prefix_to_infix</span>(<span class="hljs-params">prefix</span>):<br>    infix = <span class="hljs-string">&#x27;&#x27;</span><br>    stack = []<br><br>    <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> prefix:<br>        <span class="hljs-keyword">if</span> char <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> priority:<br>            infix += char<br>            <span class="hljs-keyword">continue</span><br><br>        <span class="hljs-keyword">if</span> char == <span class="hljs-string">&#x27;(&#x27;</span>:<br>            stack.append(char)<br>            <span class="hljs-keyword">continue</span><br><br>        <span class="hljs-keyword">if</span> char == <span class="hljs-string">&#x27;)&#x27;</span>:<br>            <span class="hljs-keyword">while</span> (top := stack.pop()) != <span class="hljs-string">&#x27;(&#x27;</span>:<br>                infix += top<br>            <span class="hljs-keyword">continue</span><br><br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        此处当priority[stack[-1]]为(或优先级小于char时char入栈</span><br><span class="hljs-string">        但是(恰好优先级为0必然小于不为(的char不用额外判断, 但这不意味着()的优先级为0</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> priority[stack[-<span class="hljs-number">1</span>]] &gt;= priority[char]:<br>            infix += stack.pop()<br><br>        stack.append(char)<br><br>    <span class="hljs-keyword">while</span> stack:<br>        infix += stack.pop()<br><br>    <span class="hljs-keyword">return</span> infix<br><br><br>sample = <span class="hljs-string">&#x27;a+b-a*((c+d)/e-f)+g&#x27;</span><br><span class="hljs-built_in">print</span>(prefix_to_infix(sample))<br></code></pre></td></tr></table></figure><h3 id="共享栈">共享栈</h3><p><img src="image-20231007151540427.png" alt="image-20231007151540427"></p><h2 id="双端队列合法输出序列">双端队列合法输出序列</h2><p>输入(出)受限的双端队列：只能在一端输入(出)</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mtext>个元素顺序进入双端队列</mtext><mo stretchy="false">(</mo><mn>1</mn><mtext>进队</mtext><mo separator="true">,</mo><mn>2</mn><mtext>进队</mtext><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>n</mi><mtext>进队</mtext><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext> 求不同限制下的合法出队排列数</mtext></mrow><annotation encoding="application/x-tex">n个元素顺序进入双端队列(1进队,2进队...n进队), \ 求不同限制下的合法出队排列数</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个元素顺序进入双端队列</span><span class="mopen">(</span><span class="mord">1</span><span class="mord cjk_fallback">进队</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mord cjk_fallback">进队</span><span class="mord">...</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">进队</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">求不同限制下的合法出队排列数</span></span></span></span></p>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>图</title>
    <link href="/2023/07/23/%E5%9B%BE/"/>
    <url>/2023/07/23/%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<h1>图</h1><h2 id="概念与性质">概念与性质</h2><h3 id="概念">概念</h3><h4 id="1">1</h4><p>简单图: 无重边，无自环</p><p>网: 带权图</p><h4 id="2">2</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>→</mo><mi>q</mi><mtext>路径</mtext><mo>:</mo><mi>p</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>q</mi></mrow><annotation encoding="application/x-tex">p \to q 路径: p ... q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord cjk_fallback">路径</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord">...</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span></p><p>简单路径: 顶点不重复出现的路径</p><h4 id="3">3</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>无向边</mtext><mo>:</mo><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">无向边: (a, b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">无向边</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>有向边</mtext><mi>a</mi><mo>→</mo><mi>b</mi><mo>:</mo><mo>&lt;</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">有向边 a \to b: &lt;a, b&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">有向边</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span></span></span></span></p><h4 id="4">4</h4><p>连通分量: 无向图的极大连通子图</p><h4 id="5">5</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>有向图中顶点</mtext><mi>v</mi><mo separator="true">,</mo><mi>w</mi></mrow><annotation encoding="application/x-tex">有向图中顶点v, w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">有向图中顶点</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>若</mtext><mi mathvariant="normal">∃</mi><mi>v</mi><mo>→</mo><mi>w</mi><mtext>的路径</mtext><mo separator="true">,</mo><mtext>则称</mtext><mi>v</mi><mtext>到</mtext><mi>w</mi><mtext>连通</mtext></mrow><annotation encoding="application/x-tex">若 \exists v \to w的路径, 则称v到w连通</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord cjk_fallback">若</span><span class="mord">∃</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord cjk_fallback">的路径</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">则称</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord cjk_fallback">到</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord cjk_fallback">连通</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>若</mtext><mi mathvariant="normal">∃</mi><mtext>双向路径</mtext><mo separator="true">,</mo><mtext>则称</mtext><mi>v</mi><mo separator="true">,</mo><mi>w</mi><mtext>强连通</mtext></mrow><annotation encoding="application/x-tex">若 \exists 双向路径, 则称v, w强连通</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">若</span><span class="mord">∃</span><span class="mord cjk_fallback">双向路径</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">则称</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord cjk_fallback">强连通</span></span></span></span></p><h4 id="6">6</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>无向图顶点</mtext><mi>v</mi><mtext>的度</mtext><mi>T</mi><mi>D</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>顶点含</mtext><mi>v</mi><mtext>的边数</mtext></mrow><annotation encoding="application/x-tex">无向图顶点v的度TD(v) = 顶点含v的边数</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">无向图顶点</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord cjk_fallback">的度</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">顶点含</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord cjk_fallback">的边数</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∵</mo><mn>1</mn><mtext>条边给</mtext><mn>2</mn><mtext>个顶点贡献度</mtext><mo>∴</mo><mtext>顶点度数和是边数</mtext><mn>2</mn><mtext>倍</mtext></mrow><annotation encoding="application/x-tex">\because 1条边给2个顶点贡献度 \therefore 顶点度数和是边数2倍</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6922em;"></span><span class="mrel amsrm">∵</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6922em;"></span><span class="mord">1</span><span class="mord cjk_fallback">条边给</span><span class="mord">2</span><span class="mord cjk_fallback">个顶点贡献度</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel amsrm">∴</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">顶点度数和是边数</span><span class="mord">2</span><span class="mord cjk_fallback">倍</span></span></span></span></p><h4 id="7">7</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>有向图顶点</mtext><mi>v</mi></mrow><annotation encoding="application/x-tex">有向图顶点v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">有向图顶点</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo><mi>v</mi><mtext>入度</mtext><mi>I</mi><mi>D</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>v</mi><mo>→</mo><mtext>出度</mtext><mi>O</mi><mi>D</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>度</mtext><mi>T</mi><mi>D</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><mi>I</mi><mi>D</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo>+</mo><mi>O</mi><mi>D</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\to v 入度 ID(v), v \to 出度 OD(v), 度 TD(v) = ID(v) + OD(v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord cjk_fallback">入度</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">出度</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">度</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>顶点入</mtext><mo stretchy="false">(</mo><mtext>出</mtext><mo stretchy="false">)</mo><mtext>度之和</mtext><mo>=</mo><mtext>图边数</mtext></mrow><annotation encoding="application/x-tex">顶点入(出)度之和 = 图边数</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">顶点入</span><span class="mopen">(</span><span class="mord cjk_fallback">出</span><span class="mclose">)</span><span class="mord cjk_fallback">度之和</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">图边数</span></span></span></span></p><h4 id="8">8</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>无向图的边数</mtext><mo>≤</mo><msubsup><mi>C</mi><mi>n</mi><mn>2</mn></msubsup><mo separator="true">,</mo><mtext>每个顶点都无向边相连时称为</mtext><mo stretchy="false">(</mo><mtext>无向</mtext><mo stretchy="false">)</mo><mtext>完全图</mtext></mrow><annotation encoding="application/x-tex">无向图的边数 \le C_n^2, 每个顶点都无向边相连时称为(无向)完全图</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord cjk_fallback">无向图的边数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.453em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">每个顶点都无向边相连时称为</span><span class="mopen">(</span><span class="mord cjk_fallback">无向</span><span class="mclose">)</span><span class="mord cjk_fallback">完全图</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>有向图的边数</mtext><mo>≤</mo><msubsup><mi>A</mi><mi>n</mi><mn>2</mn></msubsup><mo separator="true">,</mo><mtext>每个顶点都双向有向边相连时称为有向完全图</mtext></mrow><annotation encoding="application/x-tex">有向图的边数 \le A_n^2, 每个顶点都双向有向边相连时称为有向完全图</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord cjk_fallback">有向图的边数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0611em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">每个顶点都双向有向边相连时称为有向完全图</span></span></span></span></p><h4 id="9">9</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>最小生成树</mtext><mo>:</mo><mi>n</mi><mtext>个顶点</mtext><mo separator="true">,</mo><mtext>边权和最小</mtext><mo separator="true">,</mo><mtext>连通子图</mtext><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mtext>条边可能少于</mtext><mi>n</mi><mtext>个顶点</mtext><mo separator="true">,</mo><mtext>不一定构成最小生成树</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">最小生成树: n 个顶点, 边权和最小, 连通子图(n - 1条边可能少于n个顶点, 不一定构成最小生成树)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">最小生成树</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个顶点</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">边权和最小</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">连通子图</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord cjk_fallback">条边可能少于</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个顶点</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">不一定构成最小生成树</span><span class="mclose">)</span></span></span></span></p><h3 id="性质">性质</h3><h4 id="1-2">1</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>总计</mtext><mi>n</mi><mtext>个不同算子和算符的表达式</mtext><mo stretchy="false">(</mo><mtext>最少</mtext><mo stretchy="false">)</mo><mtext>可以用</mtext><mi>n</mi><mtext>个结点表示</mtext></mrow><annotation encoding="application/x-tex">总计n个不同算子和算符的表达式(最少)可以用n个结点表示</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">总计</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个不同算子和算符的表达式</span><span class="mopen">(</span><span class="mord cjk_fallback">最少</span><span class="mclose">)</span><span class="mord cjk_fallback">可以用</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个结点表示</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>A</mi><mo>+</mo><mi>B</mi><mo stretchy="false">)</mo><mo>∗</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>A</mi><mo>+</mo><mi>B</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>A</mi><mo stretchy="false">)</mo><mo>:</mo></mrow><annotation encoding="application/x-tex">(A+B)*((A+B)/A):</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">((</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathnormal">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span></span></span></span></p><p><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="111px" viewBox="-0.5 -0.5 111 151" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-08-20T09:00:25.995Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36 Edg/115.0.1901.203&quot; etag=&quot;pDjKAGT4aARv1qXhynyr&quot; version=&quot;21.6.8&quot;&gt;&#10;  &lt;diagram name=&quot;第 1 页&quot; id=&quot;tILpn8SeYm6wWBppoZyC&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;1050&quot; dy=&quot;611&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-17&quot; value=&quot;A&quot; style=&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;40&quot; y=&quot;410&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-18&quot; value=&quot;B&quot; style=&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;120&quot; y=&quot;410&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-19&quot; value=&quot;+&quot; style=&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;80&quot; y=&quot;370&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-20&quot; value=&quot;/&quot; style=&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;50&quot; y=&quot;330&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-23&quot; value=&quot;*&quot; style=&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;110&quot; y=&quot;290&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-24&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;tPQCWT3yaJ0HaMEc6yb7-17&quot; target=&quot;tPQCWT3yaJ0HaMEc6yb7-19&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;409&quot; y=&quot;418&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;445&quot; y=&quot;372&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-25&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;tPQCWT3yaJ0HaMEc6yb7-18&quot; target=&quot;tPQCWT3yaJ0HaMEc6yb7-19&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;419&quot; y=&quot;428&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;455&quot; y=&quot;382&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-27&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;tPQCWT3yaJ0HaMEc6yb7-17&quot; target=&quot;tPQCWT3yaJ0HaMEc6yb7-20&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;76&quot; y=&quot;424&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;94&quot; y=&quot;406&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-28&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;exitX=0;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;tPQCWT3yaJ0HaMEc6yb7-19&quot; target=&quot;tPQCWT3yaJ0HaMEc6yb7-20&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;86&quot; y=&quot;434&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;104&quot; y=&quot;416&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-29&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;entryX=0;entryY=1;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;tPQCWT3yaJ0HaMEc6yb7-20&quot; target=&quot;tPQCWT3yaJ0HaMEc6yb7-23&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;96&quot; y=&quot;444&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;114&quot; y=&quot;426&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;tPQCWT3yaJ0HaMEc6yb7-30&quot; value=&quot;&quot; style=&quot;endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;tPQCWT3yaJ0HaMEc6yb7-19&quot; target=&quot;tPQCWT3yaJ0HaMEc6yb7-23&quot;&gt;&#10;          &lt;mxGeometry width=&quot;50&quot; height=&quot;50&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;106&quot; y=&quot;454&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;124&quot; y=&quot;436&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://viewer.diagrams.net/?client=1&amp;page=0&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:151px;"><defs/><g><ellipse cx="15" cy="135" rx="15" ry="15" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 135px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">A</div></div></div></foreignObject><text x="15" y="139" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">A</text></switch></g><ellipse cx="95" cy="135" rx="15" ry="15" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 135px; margin-left: 81px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">B</div></div></div></foreignObject><text x="95" y="139" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">B</text></switch></g><ellipse cx="55" cy="95" rx="15" ry="15" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 95px; margin-left: 41px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">+</div></div></div></foreignObject><text x="55" y="99" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">+</text></switch></g><ellipse cx="25" cy="55" rx="15" ry="15" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 55px; margin-left: 11px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">/</div></div></div></foreignObject><text x="25" y="59" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">/</text></switch></g><ellipse cx="85" cy="15" rx="15" ry="15" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 15px; margin-left: 71px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><em></div></div></div></foreignObject><text x="85" y="19" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle"></em></text></switch></g><path d="M 25.61 124.39 L 39.89 110.11" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 43.6 106.4 L 41.13 113.82 L 39.89 110.11 L 36.18 108.87 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 84.39 124.39 L 70.11 110.11" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 66.4 106.4 L 73.82 108.87 L 70.11 110.11 L 68.87 113.82 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 15 120 L 23.75 76.24" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 24.78 71.1 L 26.84 78.65 L 23.75 76.24 L 19.98 77.27 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 44.39 84.39 L 38.3 71.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 36.08 66.62 L 42.22 71.48 L 38.3 71.37 L 35.88 74.44 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 37.91 47.36 L 68.92 28.87" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 73.43 26.18 L 69.21 32.77 L 68.92 28.87 L 65.63 26.76 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 61.29 81.38 L 82.33 35.78" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 84.53 31.02 L 84.78 38.84 L 82.33 35.78 L 78.42 35.9 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg></p><h4 id="2-2">2</h4><p>判断有向图有环: dfs，拓扑排序</p><h4 id="3-2">3</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>顶点数</mtext><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mtext>强连通图无环</mtext><mo separator="true">,</mo><mtext>可以拓扑排序</mtext></mrow><annotation encoding="application/x-tex">顶点数=1, 强连通图无环, 可以拓扑排序</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">顶点数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">强连通图无环</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">可以拓扑排序</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>顶点数</mtext><mo>&gt;</mo><mn>1</mn><mo separator="true">,</mo><mtext>强连通图有环</mtext><mo separator="true">,</mo><mtext>不能拓扑排序</mtext></mrow><annotation encoding="application/x-tex">顶点数&gt;1, 强连通图有环, 不能拓扑排序</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord cjk_fallback">顶点数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">强连通图有环</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">不能拓扑排序</span></span></span></span></p><h2 id="结构与遍历">结构与遍历</h2><h3 id="结构">结构</h3><h4 id="邻接矩阵">邻接矩阵</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span><br>&#123;<br>    <span class="hljs-type">int</span> n;<br>    ElemType edges[MAXSIZE][MAXSIZE];<br>&#125;<br>MGraph;<br></code></pre></td></tr></table></figure><ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>有向图的邻接矩阵</mtext><mo separator="true">,</mo><mtext>主对角线以下为</mtext><mn>0</mn><mo separator="true">,</mo><mtext>边必为小</mtext><mo>→</mo><mtext>大</mtext><mo>⇒</mo><mtext>必为无环图</mtext><mo>⇒</mo><mtext>可以拓扑排序</mtext></mrow><annotation encoding="application/x-tex">有向图的邻接矩阵, 主对角线以下为0, 边必为 小 \to 大 \Rightarrow 必为无环图 \Rightarrow 可以拓扑排序</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">有向图的邻接矩阵</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">主对角线以下为</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">边必为小</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">大</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">必为无环图</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">可以拓扑排序</span></span></span></span></li><li>无向图的邻接矩阵是对称矩阵</li></ol><h4 id="邻接表">邻接表</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span><br>&#123;<br>    ElemType vex, weight;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> *next;<br>&#125;<br>Node, * Ptr;<br><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span><br>&#123;<br>    <span class="hljs-type">int</span> n;<br>    Ptr adjlist[MAXSIZE];<br>&#125;<br>AGraph;<br></code></pre></td></tr></table></figure><h3 id="遍历">遍历</h3><p>图的遍历中每个顶点仅被访问一次</p><h4 id="dfs">dfs</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(AGraph &amp;G, <span class="hljs-type">int</span> v, <span class="hljs-type">bool</span> visited[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (visited[v])<br>        <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-built_in">visit</span>(v);<br>    visited[v] = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-keyword">for</span> (Ptr p = G.adjlist[v]-&gt;next; p; p = p-&gt;next)<br>        <span class="hljs-built_in">dfs</span>(G, p-&gt;vex, visited);<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DFS</span><span class="hljs-params">(AGraph &amp;G, <span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">bool</span> visited[MAXSIZE] = &#123;<span class="hljs-literal">false</span>&#125;;<br><br>    <span class="hljs-built_in">dfs</span>(G, v, visited);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="bfs">bfs</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BFS</span><span class="hljs-params">(AGraph &amp;G, <span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">bool</span> visited[MAXSIZE] = &#123;<span class="hljs-literal">false</span>&#125;;<br>    queue&lt;ElemType&gt; que;<br><br>    que.<span class="hljs-built_in">push</span>(v);<br><br>    <span class="hljs-keyword">while</span> (!que.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        ElemType vex = que.<span class="hljs-built_in">front</span>();<br>        que.<span class="hljs-built_in">pop</span>();<br><br>        <span class="hljs-built_in">visit</span>(vex);<br>        visited[vex] = <span class="hljs-literal">true</span>;<br><br>        <span class="hljs-keyword">for</span> (Ptr p = G.adjlist[vex]-&gt;next; p; p = p-&gt;next)<br>            <span class="hljs-keyword">if</span> (!visited[p-&gt;vex])<br>                que.<span class="hljs-built_in">push</span>(p-&gt;vex);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>边权均相等，bfs 可求单源最短路</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>树</title>
    <link href="/2023/07/23/%E6%A0%91/"/>
    <url>/2023/07/23/%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<h1>树</h1><h2 id="树的概念与性质">树的概念与性质</h2><h3 id="概念">概念</h3><h4 id="1">1</h4><p>结点的度: 结点的子结点个数</p><p>树都度: 树上结点度的最大值</p><h4 id="2">2</h4><p>结点的层次: 从根(1)向叶数层数</p><p>树的高(深)度: 树上结点的最大层数</p><h4 id="3">3</h4><p>满二叉树: 一直平铺，铺满最后一层的二叉树</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">    <span class="hljs-number">1</span><br>   / <span class="hljs-string">\</span><br>  <span class="hljs-number">2</span>   <span class="hljs-number">3</span><br> / <span class="hljs-string">\</span> / <span class="hljs-string">\</span><br><span class="hljs-number">4</span>  <span class="hljs-number">5</span> <span class="hljs-number">6</span>  <span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><h4 id="4">4</h4><p>完全二叉树: 一直平铺，顺着铺到只有最后一层未必铺完的二叉树</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">    <span class="hljs-number">1</span><br>   / \<br>  <span class="hljs-number">2</span>   <span class="hljs-number">3</span><br> <span class="hljs-regexp">/ \ /</span><br><span class="hljs-number">4</span>  <span class="hljs-number">5</span> <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><h4 id="5">5</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>平衡二叉树</mtext><mo>:</mo><mi mathvariant="normal">∀</mi><mtext>结点左右子树深度差</mtext><mo>≤</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">平衡二叉树: \forall 结点左右子树深度差 \le 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">平衡二叉树</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.136em;"></span><span class="mord">∀</span><span class="mord cjk_fallback">结点左右子树深度差</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></p><h4 id="6">6</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>只有</mtext><mn>1</mn><mtext>个结点的树既是根也是叶</mtext></mrow><annotation encoding="application/x-tex">只有1个结点的树既是根也是叶</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">只有</span><span class="mord">1</span><span class="mord cjk_fallback">个结点的树既是根也是叶</span></span></span></span></p><h3 id="性质">性质</h3><h4 id="树的性质">树的性质</h4><h5 id="1-2">1</h5><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>树上结点除根有且仅有</mtext><mn>1</mn><mtext>个前驱</mtext><mo>⇒</mo><mi>n</mi><mtext>个结点的树有</mtext><mi>n</mi><mo>−</mo><mn>1</mn><mtext>条边</mtext></mrow><annotation encoding="application/x-tex">树上结点除根有且仅有1个前驱 \Rightarrow n 个结点的树有 n - 1 条边</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">树上结点除根有且仅有</span><span class="mord">1</span><span class="mord cjk_fallback">个前驱</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个结点的树有</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">1</span><span class="mord cjk_fallback">条边</span></span></span></span></span></p><h5 id="2-2">2</h5><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>度为</mtext><mi>m</mi><mtext>的树度为</mtext><mi>i</mi><mtext>的结点个数</mtext><mo>=</mo><msub><mi>n</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>i</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">}</mo><mspace linebreak="newline"></mspace><mtext>树的边数</mtext><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>m</mi></munderover><mo stretchy="false">(</mo><mi>i</mi><mo>⋅</mo><msub><mi>n</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">度为m的树度为i的结点个数 = n_i, i \in \{0, ... , m\} \\树的边数 = \sum_{i = 0}^m (i \cdot n_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">度为</span><span class="mord mathnormal">m</span><span class="mord cjk_fallback">的树度为</span><span class="mord mathnormal">i</span><span class="mord cjk_fallback">的结点个数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mclose">}</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">树的边数</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><h5 id="3-2">3</h5><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mn mathvariant="bold">1</mn><mo separator="true">,</mo><mn mathvariant="bold">2</mn></mrow><mo>⇒</mo><mo stretchy="false">(</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>m</mi></munderover><msub><mi>n</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>−</mo><mn>1</mn><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>m</mi></munderover><mi>i</mi><mo>⋅</mo><msub><mi>n</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\mathbf{1, 2} \Rightarrow (\sum_{i=0}^m n_i) - 1 = \sum_{i = 0}^m i \cdot n_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathbf">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">2</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mopen">(</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><h5 id="4-2">4</h5><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>m</mi><mtext>叉树</mtext><mo separator="true">,</mo><mi>n</mi><mtext>个结点</mtext><mo separator="true">,</mo><mtext>高</mtext><mi>h</mi><mspace linebreak="newline"></mspace><mi>n</mi><mo>≤</mo><mfrac><mrow><mn>1</mn><mo>−</mo><msup><mi>m</mi><mrow><mi>h</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>⋅</mo><mi>m</mi></mrow><mrow><mn>1</mn><mo>−</mo><mi>m</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><msup><mi>m</mi><mi>h</mi></msup><mo>−</mo><mn>1</mn></mrow><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></mfrac><mspace linebreak="newline"></mspace><mi>h</mi><mo>≥</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mi>m</mi></msub><mrow><mo fence="true">(</mo><mi>n</mi><mrow><mo fence="true">(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mo fence="true">)</mo></mrow><mo>+</mo><mn>1</mn><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">m叉树, n个结点, 高h \\n \le \frac{1 - m^{h - 1} \cdot m}{1 - m} = \frac{m^h - 1}{m - 1} \\h \ge \log_{m}\left(n\left(m-1\right)+1\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">m</span><span class="mord cjk_fallback">叉树</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个结点</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">高</span><span class="mord mathnormal">h</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2954em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5261em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2954em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5261em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.136em;"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0573em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></span></p><h4 id="二叉树的性质">二叉树的性质</h4><h5 id="1-3">1</h5><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mtext>个结点构成Catalan</mtext><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mtext>种不同二叉树</mtext></mrow><annotation encoding="application/x-tex">n个结点构成\text{Catalan}(n)种不同二叉树</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">个结点构成</span><span class="mord text"><span class="mord">Catalan</span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mord cjk_fallback">种不同二叉树</span></span></span></span></p><h5 id="2-3">2</h5><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>度为</mtext><mn>2</mn><mtext>的树至少有</mtext><mn>1</mn><mtext>个度为</mtext><mn>2</mn><mtext>的结点</mtext><mo>⇒</mo><mtext>至少</mtext><mn>3</mn><mtext>个结点</mtext></mrow><annotation encoding="application/x-tex">度为2的树至少有1个度为2的结点 \Rightarrow 至少3个结点</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">度为</span><span class="mord">2</span><span class="mord cjk_fallback">的树至少有</span><span class="mord">1</span><span class="mord cjk_fallback">个度为</span><span class="mord">2</span><span class="mord cjk_fallback">的结点</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">至少</span><span class="mord">3</span><span class="mord cjk_fallback">个结点</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>二叉树可为空</mtext></mrow><annotation encoding="application/x-tex">二叉树可为空</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">二叉树可为空</span></span></span></span></p><h5 id="3-3">3</h5><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>总结点数</mtext><mi>n</mi><mo>=</mo><msub><mi>n</mi><mn>0</mn></msub><mo>+</mo><msub><mi>n</mi><mn>1</mn></msub><mo>+</mo><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">总结点数n = n_0 + n_1 + n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">总结点数</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>总边数</mtext><mi>n</mi><mo>−</mo><mn>1</mn><mo>=</mo><mn>0</mn><mo>⋅</mo><msub><mi>n</mi><mn>0</mn></msub><mo>+</mo><mn>1</mn><mo>⋅</mo><msub><mi>n</mi><mn>1</mn></msub><mo>+</mo><mn>2</mn><mo>⋅</mo><msub><mi>n</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">总边数n - 1 = 0 \cdot n_0 + 1 \cdot n_1 + 2 \cdot n_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord cjk_fallback">总边数</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mn>0</mn></msub><mo>=</mo><msub><mi>n</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn><mtext>即双分支结点比叶子结点少</mtext><mn>1</mn><mtext>个</mtext></mrow><annotation encoding="application/x-tex">n_0 = n_2 + 1即双分支结点比叶子结点少1个</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">1</span><span class="mord cjk_fallback">即双分支结点比叶子结点少</span><span class="mord">1</span><span class="mord cjk_fallback">个</span></span></span></span></p><h5 id="4-3">4</h5><p>二叉树的叶子结点在二叉树前/中/后遍历序列的先后顺序相同</p><h4 id="满二叉树的性质">满二叉树的性质</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>满二叉树从根</mtext><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mtext>层序编号</mtext></mrow><annotation encoding="application/x-tex">满二叉树从根(1)层序编号</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">满二叉树从根</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mord cjk_fallback">层序编号</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>结点</mtext><mi>i</mi><mtext>的</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>序号</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>左结点</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>2</mn><mi>i</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>右结点</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>父结点</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">[</mo><mfrac><mi>i</mi><mn>2</mn></mfrac><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{matrix}结点i的 &amp; 序号 \\左结点 &amp; 2i \\右结点 &amp; 2i + 1 \\父结点 &amp; [\frac{i}{2}]\end{matrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.8157em;vertical-align:-2.1578em;"></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6578em;"><span style="top:-4.8178em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">结点</span><span class="mord mathnormal">i</span><span class="mord cjk_fallback">的</span></span></span><span style="top:-3.6178em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">左结点</span></span></span><span style="top:-2.4178em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">右结点</span></span></span><span style="top:-1.2022em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">父结点</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1578em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6578em;"><span style="top:-4.8178em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">序号</span></span></span><span style="top:-3.6178em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal">i</span></span></span><span style="top:-2.4178em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span><span style="top:-1.2022em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">[</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8557em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">]</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1578em;"><span></span></span></span></span></span></span></span></span></span></span></p><h4 id="完全二叉树的性质">完全二叉树的性质</h4><h5 id="1-4">1</h5><p>叶子结点最多有(倒数)2层</p><h5 id="2-4">2</h5><p>完全二叉树第1层有1个结点(根)，其余非底层结点数为偶</p><p>若底层结点数为偶即总结点数为奇，所有分支都有左右孩子</p><p>若总结点数为偶，则存在1个只有左孩子的分支</p><h5 id="3-4">3</h5><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∵</mo><mi mathvariant="normal">∀</mi><mtext>非根结点都有父结点</mtext></mrow><annotation encoding="application/x-tex">\because \forall 非根结点都有父结点</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6922em;"></span><span class="mrel amsrm">∵</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">∀</span><span class="mord cjk_fallback">非根结点都有父结点</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∴</mo><mtext>最后</mtext><mn>1</mn><mtext>个叶子结点</mtext><mi>n</mi><mtext>的父结点</mtext><mo stretchy="false">[</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo stretchy="false">]</mo><mtext>是最后</mtext><mn>1</mn><mtext>个分支结点</mtext></mrow><annotation encoding="application/x-tex">\therefore 最后1个叶子结点 n 的父结点 [\frac{n}{2}] 是最后1个分支结点</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6922em;"></span><span class="mrel amsrm">∴</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em;"></span><span class="mord cjk_fallback">最后</span><span class="mord">1</span><span class="mord cjk_fallback">个叶子结点</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">的父结点</span><span class="mopen">[</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">]</span><span class="mord cjk_fallback">是最后</span><span class="mord">1</span><span class="mord cjk_fallback">个分支结点</span></span></span></span></p><h2 id="树的算法">树的算法</h2><h3 id="序遍历">*序遍历</h3><h4 id="前-中-后序遍历">前/中/后序遍历</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p><h4 id="层序遍历">层序遍历</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LevelOrder</span><span class="hljs-params">(BiTree T)</span></span><br><span class="hljs-function"></span>&#123;<br>    queue&lt;BiTree&gt; Q;<br><br>    Q.<span class="hljs-built_in">push</span>(T);<br><br>    BiTree p;<br><br>    <span class="hljs-keyword">while</span> (!Q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        p = Q.<span class="hljs-built_in">front</span>();<br>        Q.<span class="hljs-built_in">pop</span>();<br><br>        <span class="hljs-built_in">visit</span>(p);<br><br>        <span class="hljs-keyword">if</span> (p-&gt;lchild != <span class="hljs-literal">NULL</span>)          <span class="hljs-comment">// 入队前判断节点是否合法</span><br>            Q.<span class="hljs-built_in">push</span>(p-&gt;lchild);<br><br>        <span class="hljs-keyword">if</span> (p-&gt;rchild != <span class="hljs-literal">NULL</span>)<br>            Q.<span class="hljs-built_in">push</span>(p-&gt;rchild);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>二叉树先序序列与后序序列相反</mtext><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mtext>二叉树退化为链</mtext></mrow><annotation encoding="application/x-tex">二叉树先序序列与后序序列相反 \iff 二叉树退化为链</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7073em;vertical-align:-0.024em;"></span><span class="mord cjk_fallback">二叉树先序序列与后序序列相反</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟺</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">二叉树退化为链</span></span></span></span></span></p><h3 id="从前序与中序遍历序列构造二叉树">从前序与中序遍历序列构造二叉树</h3><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>前序</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>层序</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>后序</mtext></mstyle></mtd></mtr></mtable><mo fence="true">}</mo></mrow><mo>+</mo><mtext>中序遍历序列</mtext><mo>⇒</mo><mtext>唯一确定二叉树</mtext></mrow><annotation encoding="application/x-tex">\left.\begin{matrix}前序 \\层序 \\后序\end{matrix}\right\}+ 中序遍历序列 \Rightarrow 唯一确定二叉树</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">前序</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">层序</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">后序</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-2.5em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎭</span></span></span><span style="top:-2.492em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.016em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.8889em' height='0.016em' style='width:0.8889em' viewBox='0 0 888.89 16' preserveAspectRatio='xMinYMin'><path d='M384 0 H504 V16 H384z M384 0 H504 V16 H384z'/></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎬</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.016em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.8889em' height='0.016em' style='width:0.8889em' viewBox='0 0 888.89 16' preserveAspectRatio='xMinYMin'><path d='M384 0 H504 V16 H384z M384 0 H504 V16 H384z'/></svg></span></span><span style="top:-4.3em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎫</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">中序遍历序列</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">唯一确定二叉树</span></span></span></span></span></p><p>从*序与中序遍历序列构造二叉树，由一个参数为子问题中序序列的函数，通过*序序列找到根，然后以此分割区间，继续递归</p><p>前序序列根在序列头，层序序列根为层序序列第一个在中序序列的元素，后序序列根在序列尾</p><p>左区间为左子树序列，右区间为右子树序列</p><p>前序，层序先递归左子树，再递归右子树</p><p>后序先递归右子树，再递归左子树</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">split_seg</span>(<span class="hljs-params">inorder, val</span>):<br>    idx = inorder.index(val)<br>    <span class="hljs-keyword">return</span> TreeNode(val), inorder[: idx], inorder[idx + <span class="hljs-number">1</span>:]<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">inorder_preorder_buildTree</span>(<span class="hljs-params">inorder, preorder</span>):<br>    preorder = deque(preorder)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">sub_inorder</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> sub_inorder:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>        val = preorder.popleft()<br>        root, left, right = split_seg(sub_inorder, val)<br><br>        root.left = dfs(left)<br>        root.right = dfs(right)<br><br>        <span class="hljs-keyword">return</span> root<br><br>    <span class="hljs-keyword">return</span> dfs(inorder)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">inorder_levorder_buildTree</span>(<span class="hljs-params">inorder, levorder</span>):<br>    levorder = deque(levorder)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">sub_inorder</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> sub_inorder:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>        <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> levorder:<br>            <span class="hljs-keyword">if</span> val <span class="hljs-keyword">in</span> sub_inorder:<br>                root, left, right = split_seg(sub_inorder, val)<br><br>                root.left = dfs(left)<br>                root.right = dfs(right)<br><br>                <span class="hljs-keyword">return</span> root<br><br>    <span class="hljs-keyword">return</span> dfs(inorder)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">inorder_postorder_buildTree</span>(<span class="hljs-params">inorder, postorder</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">sub_inorder</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> sub_inorder:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>        val = postorder.pop()<br>        root, left, right = split_seg(sub_inorder, val)<br><br>        root.right = dfs(right)<br>        root.left = dfs(left)<br><br>        <span class="hljs-keyword">return</span> root<br><br>    <span class="hljs-keyword">return</span> dfs(inorder)<br></code></pre></td></tr></table></figure><h2 id="树与森林">树与森林</h2><h3 id="树与森林的存储结构">树与森林的存储结构</h3><h4 id="顺序存储结构">顺序存储结构</h4><h5 id="双亲存储结构">双亲存储结构</h5><p>数组存储父结点序号</p><h5 id="顺序二叉树">顺序二叉树</h5><p>根据高度开一棵满二叉树，将二叉树嵌入，不存在结点置空</p><p>下标从1开始，继承完全二叉树性质</p><h4 id="链式存储结构">链式存储结构</h4><h5 id="孩子存储结构">孩子存储结构</h5><p>邻接表</p><h5 id="孩子兄弟存储结构">孩子兄弟存储结构</h5><p>链式二叉树</p><h3 id="树与森林的转换">树与森林的转换</h3><h4 id="树-to-二叉树"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>树</mtext><mo>→</mo><mtext>二叉树</mtext></mrow><annotation encoding="application/x-tex">树 \to 二叉树</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">树</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">二叉树</span></span></span></span></h4><p>左孩子右兄弟</p><img src="屏幕截图 2023-07-31 171059.png" alt="屏幕截图 2023-07-31 171059" style="zoom: 50%;" /><h4 id="二叉树-to-树"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>二叉树</mtext><mo>→</mo><mtext>树</mtext></mrow><annotation encoding="application/x-tex">二叉树 \to 树</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">二叉树</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">树</span></span></span></span></h4><p>左孩子右兄弟法的逆过程</p><h4 id="森林-to-二叉树"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>森林</mtext><mo>→</mo><mtext>二叉树</mtext></mrow><annotation encoding="application/x-tex">森林 \to 二叉树</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">森林</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">二叉树</span></span></span></span></h4><ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>每棵树</mtext><mo>→</mo><mtext>二叉树</mtext></mrow><annotation encoding="application/x-tex">每棵树 \to 二叉树</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">每棵树</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">二叉树</span></span></span></span></li><li>每棵树作为兄弟按照左孩子右兄弟法连接</li></ol><img src="image-20230731171914828.png" alt="image-20230731171914828" style="zoom: 50%;" /><img src="image-20230731171928517.png" alt="image-20230731171928517" style="zoom:80%;" /><h3 id="树与森林的遍历">树与森林的遍历</h3><h4 id="一般树的遍历">一般树的遍历</h4><h5 id="先根遍历">先根遍历</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">preorder</span>(<span class="hljs-params">tree</span>):<br>    <span class="hljs-keyword">if</span> tree:<br>        root, subs = tree<br><br>        <span class="hljs-built_in">print</span>(root, end=<span class="hljs-string">&#x27; &#x27;</span>)<br><br>        <span class="hljs-keyword">for</span> sub <span class="hljs-keyword">in</span> subs:<br>            preorder(sub)<br></code></pre></td></tr></table></figure><h5 id="后根遍历">后根遍历</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">postorder</span>(<span class="hljs-params">tree</span>):<br>    <span class="hljs-keyword">if</span> tree:<br>        root, subs = tree<br><br>        <span class="hljs-keyword">for</span> sub <span class="hljs-keyword">in</span> subs:<br>            postorder(sub)<br><br>        <span class="hljs-built_in">print</span>(root, end=<span class="hljs-string">&#x27; &#x27;</span>)<br></code></pre></td></tr></table></figure><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>树的后根遍历</mtext><mo>:</mo><mtext>访问所有子树</mtext><mo>→</mo><mtext>访问当前结点</mtext><mo>→</mo><mtext>访问兄弟</mtext><mspace linebreak="newline"></mspace><mtext>当树转化为二叉树后</mtext><mo separator="true">,</mo><mtext>树的后根遍历相当于</mtext><mo>:</mo><mtext>访问左子树</mtext><mo>→</mo><mtext>访问根</mtext><mo>→</mo><mtext>访问右子树</mtext><mspace linebreak="newline"></mspace><mo>∴</mo><mtext>树的后根遍历序列</mtext><mo>=</mo><mtext>树转化为二叉树后的中序遍历序列</mtext></mrow><annotation encoding="application/x-tex">树的后根遍历: 访问所有子树 \to 访问当前结点 \to 访问兄弟 \\当树转化为二叉树后, 树的后根遍历相当于: 访问左子树 \to 访问根 \to 访问右子树 \\\therefore 树的后根遍历序列 = 树转化为二叉树后的中序遍历序列</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">树的后根遍历</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">访问所有子树</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">访问当前结点</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">访问兄弟</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord cjk_fallback">当树转化为二叉树后</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">树的后根遍历相当于</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">访问左子树</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">访问根</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">访问右子树</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6922em;"></span><span class="mrel amsrm">∴</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">树的后根遍历序列</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">树转化为二叉树后的中序遍历序列</span></span></span></span></span></p><h4 id="森林的遍历">森林的遍历</h4><h5 id="先序遍历">先序遍历</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">forest_preorder</span>(<span class="hljs-params">forest</span>):<br>    <span class="hljs-keyword">for</span> tree <span class="hljs-keyword">in</span> forest:<br>        tree_preorder(tree)<br></code></pre></td></tr></table></figure><h5 id="中-后-序遍历">中(后)序遍历</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">forest_postorder</span>(<span class="hljs-params">forest</span>):<br>    <span class="hljs-keyword">for</span> tree <span class="hljs-keyword">in</span> forest:<br>        tree_postorder(tree)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
